"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){"function"==typeof define&&define.amd?define("scripts",e):e()}(function(){var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(e,t){return e(t={exports:{}},t.exports),t.exports}var t,n=e(function(e){var t,n;t=r,n=function(){function m(e,t,n){if(n){var r=document.createDocumentFragment(),i=!t.hasAttribute("viewBox")&&n.getAttribute("viewBox");i&&t.setAttribute("viewBox",i);for(var o=n.cloneNode(!0);o.childNodes.length;)r.appendChild(o.firstChild);e.appendChild(r)}}function v(r){r.onreadystatechange=function(){if(4===r.readyState){var n=r._cachedDocument;n||((n=r._cachedDocument=document.implementation.createHTMLDocument("")).body.innerHTML=r.responseText,r._cachedTarget={}),r._embeds.splice(0).map(function(e){var t=r._cachedTarget[e.id];t=t||(r._cachedTarget[e.id]=n.getElementById(e.id)),m(e.parent,e.svg,t)})}},r.onreadystatechange()}function b(e){for(var t=e;"svg"!==t.nodeName.toLowerCase()&&(t=t.parentNode););return t}return function(e){var u,d=Object(e),t=window.top!==window.self;u="polyfill"in d?d.polyfill:/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/.test(navigator.userAgent)||(navigator.userAgent.match(/\bEdge\/12\.(\d+)\b/)||[])[1]<10547||(navigator.userAgent.match(/\bAppleWebKit\/(\d+)\b/)||[])[1]<537||/\bEdge\/.(\d+)\b/.test(navigator.userAgent)&&t;var f={},h=window.requestAnimationFrame||setTimeout,p=document.getElementsByTagName("use"),g=0;u&&function e(){for(var t=0;t<p.length;){var n=p[t],r=n.parentNode,i=b(r),o=n.getAttribute("xlink:href")||n.getAttribute("href");if(!o&&d.attributeName&&(o=n.getAttribute(d.attributeName)),i&&o){if(u)if(!d.validate||d.validate(o,i,n)){r.removeChild(n);var l=o.split("#"),a=l.shift(),c=l.join("#");if(a.length){var s=f[a];s||((s=f[a]=new XMLHttpRequest).open("GET",a),s.send(),s._embeds=[]),s._embeds.push({parent:r,svg:i,id:c}),v(s)}else m(r,i,document.getElementById(c))}else++t,++g}else++t}(!p.length||0<p.length-g)&&h(e,67)}()}},e.exports?e.exports=n():t.svg4everybody=n()}),i=e(function(e,t){var n;n=function(){return r={},i.m=n=[function(e,t,n){n.r(t);function r(e){return Array.isArray(e)?e:[e]}function c(e){return e instanceof Node}function i(e,t){if(e&&t){e=e instanceof NodeList?e:[e];for(var n=0;n<e.length&&!0!==t(e[n],n,e.length);n++);}}function o(e){return console.error("[scroll-lock] ".concat(e))}function m(e){if(Array.isArray(e))return e.join(", ")}function l(e){var t=[];return i(e,function(e){return t.push(e)}),t}function v(e,t,n,r){var i=3<arguments.length&&void 0!==r?r:document;if((!(2<arguments.length&&void 0!==n)||n)&&-1!==l(i.querySelectorAll(t)).indexOf(e))return e;for(;(e=e.parentElement)&&-1===l(i.querySelectorAll(t)).indexOf(e););return e}function b(e,t,n){var r=2<arguments.length&&void 0!==n?n:document;return-1!==l(r.querySelectorAll(t)).indexOf(e)}function a(e){return e&&"hidden"===getComputedStyle(e).overflow}function y(e){return e&&(!!a(e)||e.scrollTop<=0)}function S(e){if(e){if(a(e))return 1;var t=e.scrollTop;return e.scrollHeight<=t+e.offsetHeight}}function w(e){return e&&(!!a(e)||e.scrollLeft<=0)}function k(e){if(e){if(a(e))return 1;var t=e.scrollLeft;return e.scrollWidth<=t+e.offsetWidth}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"disablePageScroll",function(){return d}),n.d(t,"enablePageScroll",function(){return f}),n.d(t,"getScrollState",function(){return h}),n.d(t,"clearQueueScrollLocks",function(){return p}),n.d(t,"getTargetScrollBarWidth",function(){return g}),n.d(t,"getCurrentTargetScrollBarWidth",function(){return A}),n.d(t,"getPageScrollBarWidth",function(){return L}),n.d(t,"getCurrentPageScrollBarWidth",function(){return E}),n.d(t,"addScrollableTarget",function(){return O}),n.d(t,"removeScrollableTarget",function(){return T}),n.d(t,"addScrollableSelector",function(){return x}),n.d(t,"removeScrollableSelector",function(){return P}),n.d(t,"addLockableTarget",function(){return q}),n.d(t,"addLockableSelector",function(){return F}),n.d(t,"setFillGapMethod",function(){return j}),n.d(t,"addFillGapTarget",function(){return B}),n.d(t,"removeFillGapTarget",function(){return G}),n.d(t,"addFillGapSelector",function(){return C}),n.d(t,"removeFillGapSelector",function(){return W}),n.d(t,"refillGaps",function(){return N});var u=["padding","margin","width","max-width","none"],M={scroll:!0,queue:0,scrollableSelectors:["[data-scroll-lock-scrollable]"],lockableSelectors:["body","[data-scroll-lock-lockable]"],fillGapSelectors:["body","[data-scroll-lock-fill-gap]","[data-scroll-lock-lockable]"],fillGapMethod:u[0],startTouchY:0,startTouchX:0},d=function(e){M.queue<=0&&(M.scroll=!1,I(),$()),O(e),M.queue++},f=function(e){0<M.queue&&M.queue--,M.queue<=0&&(M.scroll=!0,Y(),U()),T(e)},h=function(){return M.scroll},p=function(){M.queue=0},g=function(e,t){var n=1<arguments.length&&void 0!==t&&t;if(c(e)){var r=e.style.overflowY;n?h()||(e.style.overflowY=e.getAttribute("data-scroll-lock-saved-overflow-y-property")):e.style.overflowY="scroll";var i=A(e);return e.style.overflowY=r,i}return 0},A=function(e){if(c(e)){if(e===document.body){var t=document.documentElement.clientWidth;return window.innerWidth-t}var n=e.style.borderLeftWidth,r=e.style.borderRightWidth;e.style.borderLeftWidth="0px",e.style.borderRightWidth="0px";var i=e.offsetWidth-e.clientWidth;return e.style.borderLeftWidth=n,e.style.borderRightWidth=r,i}return 0},L=function(e){var t=0<arguments.length&&void 0!==e&&e;return g(document.body,t)},E=function(){return A(document.body)},O=function(e){e&&r(e).map(function(e){i(e,function(e){c(e)?e.setAttribute("data-scroll-lock-scrollable",""):o('"'.concat(e,'" is not a Element.'))})})},T=function(e){e&&r(e).map(function(e){i(e,function(e){c(e)?e.removeAttribute("data-scroll-lock-scrollable"):o('"'.concat(e,'" is not a Element.'))})})},x=function(e){e&&r(e).map(function(e){M.scrollableSelectors.push(e)})},P=function(e){e&&r(e).map(function(t){M.scrollableSelectors=M.scrollableSelectors.filter(function(e){return e!==t})})},q=function(e){e&&(r(e).map(function(e){i(e,function(e){c(e)?e.setAttribute("data-scroll-lock-lockable",""):o('"'.concat(e,'" is not a Element.'))})}),h()||I())},F=function(e){e&&(r(e).map(function(e){M.lockableSelectors.push(e)}),h()||I(),C(e))},j=function(e){if(e)if(-1!==u.indexOf(e))M.fillGapMethod=e,N();else{var t=u.join(", ");o('"'.concat(e,'" method is not available!\nAvailable fill gap methods: ').concat(t,"."))}},B=function(e){e&&r(e).map(function(e){i(e,function(e){c(e)?(e.setAttribute("data-scroll-lock-fill-gap",""),M.scroll||X(e)):o('"'.concat(e,'" is not a Element.'))})})},G=function(e){e&&r(e).map(function(e){i(e,function(e){c(e)?(e.removeAttribute("data-scroll-lock-fill-gap"),M.scroll||Q(e)):o('"'.concat(e,'" is not a Element.'))})})},C=function(e){e&&r(e).map(function(e){-1===M.fillGapSelectors.indexOf(e)&&(M.fillGapSelectors.push(e),M.scroll||K(e))})},W=function(e){e&&r(e).map(function(t){M.fillGapSelectors=M.fillGapSelectors.filter(function(e){return e!==t}),M.scroll||V(t)})},N=function(){M.scroll||$()},I=function(){var e=m(M.lockableSelectors);R(e)},Y=function(){var e=m(M.lockableSelectors);_(e)},R=function(e){var t=document.querySelectorAll(e);i(t,function(e){H(e)})},_=function(e){var t=document.querySelectorAll(e);i(t,function(e){D(e)})},H=function(e){if(c(e)&&"true"!==e.getAttribute("data-scroll-lock-locked")){var t=window.getComputedStyle(e);e.setAttribute("data-scroll-lock-saved-overflow-y-property",t.overflowY),e.setAttribute("data-scroll-lock-saved-inline-overflow-property",e.style.overflow),e.setAttribute("data-scroll-lock-saved-inline-overflow-y-property",e.style.overflowY),e.style.overflow="hidden",e.setAttribute("data-scroll-lock-locked","true")}},D=function(e){c(e)&&"true"===e.getAttribute("data-scroll-lock-locked")&&(e.style.overflow=e.getAttribute("data-scroll-lock-saved-inline-overflow-property"),e.style.overflowY=e.getAttribute("data-scroll-lock-saved-inline-overflow-y-property"),e.removeAttribute("data-scroll-lock-saved-overflow-property"),e.removeAttribute("data-scroll-lock-saved-inline-overflow-property"),e.removeAttribute("data-scroll-lock-saved-inline-overflow-y-property"),e.removeAttribute("data-scroll-lock-locked"))},$=function(){M.fillGapSelectors.map(function(e){K(e)})},U=function(){M.fillGapSelectors.map(function(e){V(e)})},K=function(e){var t=document.querySelectorAll(e),n=-1!==M.lockableSelectors.indexOf(e);i(t,function(e){X(e,n)})},X=function(e,t){var n=1<arguments.length&&void 0!==t&&t;if(c(e)){var r;if(""===e.getAttribute("data-scroll-lock-lockable")||n)r=g(e,!0);else{var i=v(e,m(M.lockableSelectors));r=g(i,!0)}"true"===e.getAttribute("data-scroll-lock-filled-gap")&&Q(e);var o=window.getComputedStyle(e);if(e.setAttribute("data-scroll-lock-filled-gap","true"),e.setAttribute("data-scroll-lock-current-fill-gap-method",M.fillGapMethod),"margin"===M.fillGapMethod){var l=parseFloat(o.marginRight);e.style.marginRight="".concat(l+r,"px")}else if("width"===M.fillGapMethod)e.style.width="calc(100% - ".concat(r,"px)");else if("max-width"===M.fillGapMethod)e.style.maxWidth="calc(100% - ".concat(r,"px)");else if("padding"===M.fillGapMethod){var a=parseFloat(o.paddingRight);e.style.paddingRight="".concat(a+r,"px")}}},V=function(e){var t=document.querySelectorAll(e);i(t,function(e){Q(e)})},Q=function(e){if(c(e)&&"true"===e.getAttribute("data-scroll-lock-filled-gap")){var t=e.getAttribute("data-scroll-lock-current-fill-gap-method");e.removeAttribute("data-scroll-lock-filled-gap"),e.removeAttribute("data-scroll-lock-current-fill-gap-method"),"margin"===t?e.style.marginRight="":"width"===t?e.style.width="":"max-width"===t?e.style.maxWidth="":"padding"===t&&(e.style.paddingRight="")}};"undefined"!=typeof window&&window.addEventListener("resize",function(){N()}),"undefined"!=typeof document&&(document.addEventListener("touchstart",function(e){M.scroll||(M.startTouchY=e.touches[0].clientY,M.startTouchX=e.touches[0].clientX)}),document.addEventListener("touchmove",function(l){if(!M.scroll){var e=M.startTouchY,t=M.startTouchX,n=l.touches[0].clientY,r=l.touches[0].clientX;if(l.touches.length<2){var a=m(M.scrollableSelectors),c=e<n,s=n<e,u=t<r,d=r<t,f=e+3<n,h=n<e-3,p=t+3<r,g=r<t-3;!function e(t,n){var r=1<arguments.length&&void 0!==n&&n;if(t){var i=v(t,a,!1);if(b(t,'input[type="range"]'))return!1;if(r||b(t,'textarea, [contenteditable="true"]')&&v(t,a)||b(t,a)){var o=!1;w(t)&&k(t)?(c&&y(t)||s&&S(t))&&(o=!0):y(t)&&S(t)?(u&&w(t)||d&&k(t))&&(o=!0):(f&&y(t)||h&&S(t)||p&&w(t)||g&&k(t))&&(o=!0),o&&(i?e(i,!0):l.cancelable&&l.preventDefault())}else e(i)}else l.cancelable&&l.preventDefault()}(l.target)}}},{passive:!1}),document.addEventListener("touchend",function(){M.scroll||(M.startTouchY=0,M.startTouchX=0)}));var Z={hide:function(e){o('"hide" is deprecated! Use "disablePageScroll" instead. \n https://github.com/FL3NKEY/scroll-lock#disablepagescrollscrollabletarget'),d(e)},show:function(e){o('"show" is deprecated! Use "enablePageScroll" instead. \n https://github.com/FL3NKEY/scroll-lock#enablepagescrollscrollabletarget'),f(e)},toggle:function(e){o('"toggle" is deprecated! Do not use it.'),h()?d():f(e)},getState:function(){return o('"getState" is deprecated! Use "getScrollState" instead. \n https://github.com/FL3NKEY/scroll-lock#getscrollstate'),h()},getWidth:function(){return o('"getWidth" is deprecated! Use "getPageScrollBarWidth" instead. \n https://github.com/FL3NKEY/scroll-lock#getpagescrollbarwidth'),L()},getCurrentWidth:function(){return o('"getCurrentWidth" is deprecated! Use "getCurrentPageScrollBarWidth" instead. \n https://github.com/FL3NKEY/scroll-lock#getcurrentpagescrollbarwidth'),E()},setScrollableTargets:function(e){o('"setScrollableTargets" is deprecated! Use "addScrollableTarget" instead. \n https://github.com/FL3NKEY/scroll-lock#addscrollabletargetscrollabletarget'),O(e)},setFillGapSelectors:function(e){o('"setFillGapSelectors" is deprecated! Use "addFillGapSelector" instead. \n https://github.com/FL3NKEY/scroll-lock#addfillgapselectorfillgapselector'),C(e)},setFillGapTargets:function(e){o('"setFillGapTargets" is deprecated! Use "addFillGapTarget" instead. \n https://github.com/FL3NKEY/scroll-lock#addfillgaptargetfillgaptarget'),B(e)},clearQueue:function(){o('"clearQueue" is deprecated! Use "clearQueueScrollLocks" instead. \n https://github.com/FL3NKEY/scroll-lock#clearqueuescrolllocks'),p()}},z=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){s(t,e,n[e])})}return t}({disablePageScroll:d,enablePageScroll:f,getScrollState:h,clearQueueScrollLocks:p,getTargetScrollBarWidth:g,getCurrentTargetScrollBarWidth:A,getPageScrollBarWidth:L,getCurrentPageScrollBarWidth:E,addScrollableSelector:x,removeScrollableSelector:P,addScrollableTarget:O,removeScrollableTarget:T,addLockableSelector:F,addLockableTarget:q,addFillGapSelector:C,removeFillGapSelector:W,addFillGapTarget:B,removeFillGapTarget:G,setFillGapMethod:j,refillGaps:N,_state:M},Z);t.default=z}],i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===_typeof(t)&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0).default;function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var n,r},e.exports=n()}),o=(t=i)&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(){function n(e){var t=this;a(this,n),this.container=document.querySelector(e),this.schem={mainMenu:"[data-main-bar]",mainMenuNav:"[data-main-nav]",mainToggle:"[data-main-toggle]",subitems:"[data-main-subitem]",subitemToggle:"[data-subitem-toggle]",subitemList:"[data-subitem-list]"},this.mainSubitems=[],this.mainToggles=[],this.mainMenu=null,this.mainMenuNav=null,this.state={menuOpen:!1,isSublistExpanded:!1,expandedSublist:null,isHidden:!1,width:window.innerWidth},this.scrollDistance=0,this.classes={menuOpen:"is-open",pageScroll:"is-scroll",submenuOpen:"is-expanded",hidden:"is-invisible"},this.container&&(this.initMobileMenu(),this.initScrollListener(),document.addEventListener("keydown",function(e){"Escape"===e.key&&t.closeMenu()}))}return s(n,[{key:"initMobileMenu",value:function(){var t=this;this.mainMenu=this.container.querySelector(this.schem.mainMenu),this.mainMenuNav=this.container.querySelector(this.schem.mainMenuNav),this.mainToggles=Array.prototype.slice.call(this.container.querySelectorAll(this.schem.mainToggle)),this.mainToggles.forEach(function(e){console.log("ssss"),e.addEventListener("click",function(){console.log("clic"),!1===t.state.menuOpen?(console.log("op"),t.openMenu()):(console.log("hi"),t.closeMenu())})}),window.addEventListener("resize",function(){window.innerWidth!==t.state.width&&t.state.menuOpen&&t.closeMenu(),t.state.width=window.innerWidth})}},{key:"initScrollListener",value:function(){var t=this;window.addEventListener("scroll",function(){var e=window.pageYOffset>t.scrollDistance;t.mainMenu.classList.toggle(t.classes.pageScroll,e)})}},{key:"initSubMenu",value:function(){var n=this;Array.prototype.slice.call(this.container.querySelectorAll(this.schem.subitems)).forEach(function(e){n.mainSubitems.push({container:e,menu:e.querySelector(n.schem.subitemList),toggle:e.querySelector(n.schem.subitemToggle)})}),this.mainSubitems.forEach(function(t){t.toggle.addEventListener("click",function(e){n.expandSubMenu(t)})}),document.addEventListener("click",function(e){n.state.expandedSublist&&e.target!==n.state.expandedSublist.container&&!n.state.expandedSublist.container.contains(e.target)&&n.collapseSubMenu()})}},{key:"getHeight",value:function(){return this.mainMenu?this.mainMenu.offsetHeight:0}},{key:"toggleHidden",value:function(e){this.state.isHidden=e,this.mainMenu.classList.toggle(this.classes.hidden,this.state.isHidden)}},{key:"expandSubMenu",value:function(e){this.state.expandedSublist&&this.state.expandedSublist.menu.classList.remove(this.classes.submenuOpen),e.menu.classList.add(this.classes.submenuOpen),this.state.expandedSublist=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach(function(e){u(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},e)}},{key:"collapseSubMenu",value:function(){this.state.expandedSublist&&(this.state.expandedSublist.menu.classList.remove(this.classes.submenuOpen),this.state.expandedSublist=null)}},{key:"closeMenu",value:function(){this.state.menuOpen=!1,this.mainMenu.classList.remove(this.classes.menuOpen),this.mainMenuNav.classList.remove(this.classes.menuOpen),this.collapseSubMenu(),app.scroll.enable(this.mainMenuNav)}},{key:"openMenu",value:function(){this.state.menuOpen=!0,this.mainMenu.classList.add(this.classes.menuOpen),this.mainMenuNav.classList.add(this.classes.menuOpen),app.scroll.disable(this.mainMenuNav)}}]),n}(),f=function(){function n(e){var t=this;a(this,n),this.container=e,this.triggerBtn=this.container.querySelector("[data-test-api]"),this.requestResult=this.container.querySelector("[data-test-result]"),this.requestUrl=this.triggerBtn.dataset.testApi,this.triggerBtn.addEventListener("click",function(e){t.requestResponse()})}return s(n,[{key:"requestResponse",value:function(){var t=this;fetch(this.requestUrl).then(function(e){return e.json()}).then(function(e){e&&(t.requestResult.innerHTML=e.title+e.message)})}}]),n}(),h=function(){function t(e){var n=this;a(this,t),this.container=e,this.form=this.container.querySelector("form"),this.resultInput=this.container.querySelector("[data-results-input]"),this.cancel=this.container.querySelector("[data-button-cancel]"),this.validationRules={required:{test:function(e){return 0<=e.entry.value.length},error:function(){return"please fill in this field"}},email:{test:function(e){return/^[A-Z0-9._%+-]+@[A-Z0-9-]+.+.[A-Z]{2,4}$/i.test(e.entry.value)||0===e.entry.value.length},error:function(){return"Please enter a valid email"}},phone:{test:function(e){return/^([+]?[0-9\s-\(\)]{3,25})*$/i.test(e.entry.value)||0===e.entry.value.length},error:function(){return"Please enter a valid phone number"}},address:{test:function(e){return 5<e.entry.value.length},error:function(){return"Please enter a valid address"}},name:{test:function(e){return 2<e.entry.value.length&&e.entry.value.length<20},error:function(e){return"Please enter a valid ".concat(e)}},message:{test:function(e){return 5<e.entry.value.length},error:function(){return"Please enter a valid message"}},checkif:{test:function(e){return!0===e.entry.checked},error:function(){return"Please checked field"}},suitable:{test:function(t){return 3<n.fileFields.filter(function(e){return e.name===t.entry.name&&!0===e.entry.checked}).length},error:function(){return"Please checked more options"}},select:{test:function(e){return 0<e.entry.selectedIndex},error:function(){return"Please checked more options"}}},this.fileFields=Array.prototype.slice.call(e.querySelectorAll("[data-validate]")).map(function(e){var t=e.closest("[data-field]");return{wrap:t,entry:e,name:e.name,value:e.value,type:e.type,checked:e.checked,message:t.querySelector("[data-validate-mess]"),rules:e.hasAttribute("data-validate")?e.dataset.validate.split("|"):[],validateName:e.hasAttribute("data-validate-as")?e.dataset.validateAs:e.name,isValid:null}}),this.fileFields.forEach(function(e){e.rules.length&&(e.entry.addEventListener("blur",function(){n.validateField(e)}),e.entry.addEventListener("input",function(){n.validateField(e)}))}),this.form.addEventListener("submit",function(e){e.preventDefault(),n.validateForm()&&(n.scrollToElement(),n.formResult())}),this.cancel.addEventListener("click",function(){n.fileFields.forEach(function(e){e.message.innerHTML="",e.wrap.classList.remove("is-invalid")})})}return s(t,[{key:"validateForm",value:function(){var t=this,n=!0;return this.fileFields.forEach(function(e){n=!!t.validateField(e)&&n}),n}},{key:"validateField",value:function(t){var n=this;return t.isValid=!0,t.rules.forEach(function(e){n.validationRules.hasOwnProperty(e)&&!n.validationRules[e].test(t)&&(t.isValid=!1,n.showError(t,n.validationRules[e].error(t.validateName)))}),t.isValid&&this.hideError(t),t.isValid}},{key:"formResult",value:function(){var t=this,n=[];this.fileFields.forEach(function(t){if("radio"===t.type||"checkbox"===t.type){if(!0===t.entry.checked){var e=n.find(function(e){return e.name===t.name});void 0===e?n.push({name:t.name,value:t.entry.value,type:t.type}):e.value+=t.entry.value}}else""!==t.entry.value&&n.push({name:t.name,value:t.entry.value})});var e=n.find(function(e){return"mail"===e.name});void 0===e?n.push({name:"",value:"Do not add to maling list"}):e.value="Add to maling list";n.filter(function(e){return"privacy"!==e.name}).forEach(function(e){0<e.name.length?t.resultInput.innerHTML+="<li><strong>".concat(e.name,"</strong>")+": "+"".concat(e.value,"</li>"):t.resultInput.innerHTML+="<li>".concat(e.value,"</li>")})}},{key:"scrollToElement",value:function(){this.container.classList.toggle("is-sent-success")&&this.container.scrollIntoView({block:"center"})}},{key:"showError",value:function(e,t){e.message.innerHTML=t,e.wrap.classList.add("is-invalid")}},{key:"hideError",value:function(e){e.message.innerHTML="",e.wrap.classList.remove("is-invalid")}}]),t}(),p=function(){function n(e){var t=this;a(this,n),this.$loadMoreBtn=e||null,this.currentPage=1,this.numberOfItems=0,this.$loadMoreBtn&&(this.matrixBlockId=this.$loadMoreBtn.dataset.matrixBlockId,this.categoryId=this.$loadMoreBtn.dataset.categoryId,this.loadMoreURL=this.$loadMoreBtn.dataset.loadMore,this.targetContainerId=this.$loadMoreBtn.dataset.targetContainerId,this.$targetContainer=document.getElementById(this.targetContainerId),this.numberOfItems=this.$targetContainer.childElementCount,this.$loadMoreBtn.addEventListener("click",function(e){t.fireLoading()}))}return s(n,[{key:"fireLoading",value:function(){var t=this,e=this.loadMoreURL+"?page="+this.currentPage+"&categoryId="+this.categoryId+"&matrixBlockId="+this.matrixBlockId;this.currentPage++,fetch(e).then(function(e){return e.json()}).then(function(e){console.log(e),t.drawContent(e.html),e.isLastPage&&(t.$loadMoreBtn.style.display="none")}).catch(function(e){console.log(e)})}},{key:"drawContent",value:function(e){if(this.$targetContainer){this.$targetContainer.innerHTML+=e;var t=this.$targetContainer.childElementCount,n=t-this.numberOfItems;this.fireA11y(this.$targetContainer,n);var r=this.$targetContainer.children[this.numberOfItems];r.querySelector("a")&&r.querySelector("a").focus(),this.numberOfItems=t;var i=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;window.scroll({left:0,top:r.getBoundingClientRect().top+i})}}},{key:"fireA11y",value:function(e,t){var n=document.createElement("span");n.classList.add("visually-hidden"),n.setAttribute("role","alert"),n.innerText=t+" news loaded.",e.insertAdjacentElement("beforebegin",n),setTimeout(function(){n.remove()},3e4)}}]),n}();n(),window.app={header:null,scroll:{disable:o.disablePageScroll,enable:o.enablePageScroll},setInert:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(e){e.setAttribute("inert",!0)})},removeInert:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(e){e.removeAttribute("inert")})},initModule:function(t,e){e?Array.prototype.slice.call(document.querySelectorAll(e)).forEach(function(e){new t(e)}):new t},init:function(){window.app.header=new d(".js-header"),window.app.initModule(h,".js-validate"),window.app.initModule(p,".js-load-more"),app.initModule(f,".js-test-api")}},window.addEventListener("DOMContentLoaded",app.init)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiX3R5cGVvZiIsIm9iaiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwiY29tbW9uanNHbG9iYWwiLCJnbG9iYWxUaGlzIiwid2luZG93IiwiZ2xvYmFsIiwic2VsZiIsImNyZWF0ZUNvbW1vbmpzTW9kdWxlIiwiZm4iLCJtb2R1bGUiLCJleHBvcnRzIiwieCIsInN2ZzRldmVyeWJvZHkiLCJyb290IiwiZW1iZWQiLCJwYXJlbnQiLCJzdmciLCJ0YXJnZXQiLCJmcmFnbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsInZpZXdCb3giLCJoYXNBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJjbG9uZSIsImNsb25lTm9kZSIsImNoaWxkTm9kZXMiLCJsZW5ndGgiLCJhcHBlbmRDaGlsZCIsImZpcnN0Q2hpbGQiLCJsb2FkcmVhZHlzdGF0ZWNoYW5nZSIsInhociIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJjYWNoZWREb2N1bWVudCIsIl9jYWNoZWREb2N1bWVudCIsImltcGxlbWVudGF0aW9uIiwiY3JlYXRlSFRNTERvY3VtZW50IiwiYm9keSIsImlubmVySFRNTCIsInJlc3BvbnNlVGV4dCIsIl9jYWNoZWRUYXJnZXQiLCJfZW1iZWRzIiwic3BsaWNlIiwibWFwIiwiaXRlbSIsImlkIiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRTVkdBbmNlc3RvciIsIm5vZGUiLCJub2RlTmFtZSIsInRvTG93ZXJDYXNlIiwicGFyZW50Tm9kZSIsInJhd29wdHMiLCJwb2x5ZmlsbCIsIm9wdHMiLCJPYmplY3QiLCJpbklmcmFtZSIsInRvcCIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJtYXRjaCIsInJlcXVlc3RzIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic2V0VGltZW91dCIsInVzZXMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsIm51bWJlck9mU3ZnVXNlRWxlbWVudHNUb0J5cGFzcyIsIm9uaW50ZXJ2YWwiLCJpbmRleCIsInVzZSIsInNyYyIsImF0dHJpYnV0ZU5hbWUiLCJ2YWxpZGF0ZSIsInJlbW92ZUNoaWxkIiwic3JjU3BsaXQiLCJzcGxpdCIsInVybCIsInNoaWZ0Iiwiam9pbiIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNlbmQiLCJwdXNoIiwic2Nyb2xsTG9jayIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibSIsIm1vZHVsZXMiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiciIsImFyZ3VtZW50QXNBcnJheSIsImFyZ3VtZW50IiwiQXJyYXkiLCJpc0FycmF5IiwiaXNFbGVtZW50IiwiTm9kZSIsImVhY2hOb2RlIiwibm9kZUxpc3QiLCJjYWxsYmFjayIsIk5vZGVMaXN0IiwiaSIsInRocm93RXJyb3IiLCJtZXNzYWdlIiwiY29uc29sZSIsImVycm9yIiwiY29uY2F0IiwiYXJyYXlBc1NlbGVjdG9yIiwiYXJyYXkiLCJub2RlTGlzdEFzQXJyYXkiLCJub2RlcyIsImZpbmRQYXJlbnRCeVNlbGVjdG9yIiwiJGVsIiwic2VsZWN0b3IiLCIkcm9vdCIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbmRleE9mIiwicGFyZW50RWxlbWVudCIsImVsZW1lbnRIYXNTZWxlY3RvciIsImVsZW1lbnRIYXNPdmVyZmxvd0hpZGRlbiIsImdldENvbXB1dGVkU3R5bGUiLCJvdmVyZmxvdyIsImVsZW1lbnRTY3JvbGxUb3BPblN0YXJ0Iiwic2Nyb2xsVG9wIiwiZWxlbWVudFNjcm9sbFRvcE9uRW5kIiwic2Nyb2xsSGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwiZWxlbWVudFNjcm9sbExlZnRPblN0YXJ0Iiwic2Nyb2xsTGVmdCIsImVsZW1lbnRTY3JvbGxMZWZ0T25FbmQiLCJzY3JvbGxXaWR0aCIsIm9mZnNldFdpZHRoIiwiX2RlZmluZVByb3BlcnR5Iiwia2V5IiwidmFsdWUiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImQiLCJkaXNhYmxlUGFnZVNjcm9sbCIsImVuYWJsZVBhZ2VTY3JvbGwiLCJnZXRTY3JvbGxTdGF0ZSIsImNsZWFyUXVldWVTY3JvbGxMb2NrcyIsInNjcm9sbF9sb2NrX2dldFRhcmdldFNjcm9sbEJhcldpZHRoIiwic2Nyb2xsX2xvY2tfZ2V0Q3VycmVudFRhcmdldFNjcm9sbEJhcldpZHRoIiwiZ2V0UGFnZVNjcm9sbEJhcldpZHRoIiwiZ2V0Q3VycmVudFBhZ2VTY3JvbGxCYXJXaWR0aCIsInNjcm9sbF9sb2NrX2FkZFNjcm9sbGFibGVUYXJnZXQiLCJzY3JvbGxfbG9ja19yZW1vdmVTY3JvbGxhYmxlVGFyZ2V0Iiwic2Nyb2xsX2xvY2tfYWRkU2Nyb2xsYWJsZVNlbGVjdG9yIiwic2Nyb2xsX2xvY2tfcmVtb3ZlU2Nyb2xsYWJsZVNlbGVjdG9yIiwic2Nyb2xsX2xvY2tfYWRkTG9ja2FibGVUYXJnZXQiLCJzY3JvbGxfbG9ja19hZGRMb2NrYWJsZVNlbGVjdG9yIiwic2Nyb2xsX2xvY2tfc2V0RmlsbEdhcE1ldGhvZCIsInNjcm9sbF9sb2NrX2FkZEZpbGxHYXBUYXJnZXQiLCJzY3JvbGxfbG9ja19yZW1vdmVGaWxsR2FwVGFyZ2V0Iiwic2Nyb2xsX2xvY2tfYWRkRmlsbEdhcFNlbGVjdG9yIiwic2Nyb2xsX2xvY2tfcmVtb3ZlRmlsbEdhcFNlbGVjdG9yIiwicmVmaWxsR2FwcyIsIkZJTExfR0FQX0FWQUlMQUJMRV9NRVRIT0RTIiwic3RhdGUiLCJzY3JvbGwiLCJxdWV1ZSIsInNjcm9sbGFibGVTZWxlY3RvcnMiLCJsb2NrYWJsZVNlbGVjdG9ycyIsImZpbGxHYXBTZWxlY3RvcnMiLCJmaWxsR2FwTWV0aG9kIiwic3RhcnRUb3VjaFkiLCJzdGFydFRvdWNoWCIsInNjcm9sbF9sb2NrX2hpZGVMb2NrYWJsZU92ZXJmbG93IiwiZmlsbEdhcHMiLCJzY3JvbGxfbG9ja19zaG93TG9ja2FibGVPdmVyZmxvdyIsInVuZmlsbEdhcHMiLCIkdGFyZ2V0Iiwib25seUV4aXN0cyIsImN1cnJlbnRPdmVyZmxvd1lQcm9wZXJ0eSIsInN0eWxlIiwib3ZlcmZsb3dZIiwid2lkdGgiLCJkb2N1bWVudFdpZHRoIiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJpbm5lcldpZHRoIiwiYm9yZGVyTGVmdFdpZHRoQ3VycmVudFByb3BlcnR5IiwiYm9yZGVyTGVmdFdpZHRoIiwiYm9yZGVyUmlnaHRXaWR0aEN1cnJlbnRQcm9wZXJ0eSIsImJvcmRlclJpZ2h0V2lkdGgiLCJfY3VycmVudFdpZHRoIiwiJHRhcmdldHMiLCJyZW1vdmVBdHRyaWJ1dGUiLCJmaWx0ZXIiLCJzU2VsZWN0b3IiLCJtZXRob2QiLCJtZXRob2RzIiwic2Nyb2xsX2xvY2tfZmlsbEdhcFRhcmdldCIsInNjcm9sbF9sb2NrX3VuZmlsbEdhcFRhcmdldCIsInNjcm9sbF9sb2NrX2ZpbGxHYXBTZWxlY3RvciIsImZTZWxlY3RvciIsInNjcm9sbF9sb2NrX3VuZmlsbEdhcFNlbGVjdG9yIiwic2Nyb2xsX2xvY2tfaGlkZUxvY2thYmxlT3ZlcmZsb3dTZWxlY3RvciIsInNjcm9sbF9sb2NrX3Nob3dMb2NrYWJsZU92ZXJmbG93U2VsZWN0b3IiLCJzY3JvbGxfbG9ja19oaWRlTG9ja2FibGVPdmVyZmxvd1RhcmdldCIsInNjcm9sbF9sb2NrX3Nob3dMb2NrYWJsZU92ZXJmbG93VGFyZ2V0IiwiY29tcHV0ZWRTdHlsZSIsImlzTG9ja2FibGUiLCJzY3JvbGxCYXJXaWR0aCIsIiRsb2NrYWJsZVBhcmVudCIsImN1cnJlbnRNYXJnaW4iLCJwYXJzZUZsb2F0IiwibWFyZ2luUmlnaHQiLCJtYXhXaWR0aCIsImN1cnJlbnRQYWRkaW5nIiwicGFkZGluZ1JpZ2h0IiwiY3VycmVudEZpbGxHYXBNZXRob2QiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRvdWNoZXMiLCJjbGllbnRZIiwiY2xpZW50WCIsImN1cnJlbnRDbGllbnRZIiwiY3VycmVudENsaWVudFgiLCJkaXJlY3Rpb24iLCJkaXJlY3Rpb25XaXRoT2Zmc2V0IiwiaGFuZGxlIiwic2tpcCIsInBhcmVudFNjcm9sbGFibGVFbCIsInByZXZlbnQiLCJjYW5jZWxhYmxlIiwicHJldmVudERlZmF1bHQiLCJwYXNzaXZlIiwiZGVwcmVjYXRlZE1ldGhvZHMiLCJoaWRlIiwic2hvdyIsInRvZ2dsZSIsImdldFN0YXRlIiwiZ2V0V2lkdGgiLCJnZXRDdXJyZW50V2lkdGgiLCJzZXRTY3JvbGxhYmxlVGFyZ2V0cyIsInNldEZpbGxHYXBTZWxlY3RvcnMiLCJzZXRGaWxsR2FwVGFyZ2V0cyIsImNsZWFyUXVldWUiLCJzb3VyY2UiLCJvd25LZXlzIiwia2V5cyIsImdldE93blByb3BlcnR5U3ltYm9scyIsInN5bSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImZvckVhY2giLCJfb2JqZWN0U3ByZWFkIiwiZ2V0VGFyZ2V0U2Nyb2xsQmFyV2lkdGgiLCJnZXRDdXJyZW50VGFyZ2V0U2Nyb2xsQmFyV2lkdGgiLCJhZGRTY3JvbGxhYmxlU2VsZWN0b3IiLCJyZW1vdmVTY3JvbGxhYmxlU2VsZWN0b3IiLCJhZGRTY3JvbGxhYmxlVGFyZ2V0IiwicmVtb3ZlU2Nyb2xsYWJsZVRhcmdldCIsImFkZExvY2thYmxlU2VsZWN0b3IiLCJhZGRMb2NrYWJsZVRhcmdldCIsImFkZEZpbGxHYXBTZWxlY3RvciIsInJlbW92ZUZpbGxHYXBTZWxlY3RvciIsImFkZEZpbGxHYXBUYXJnZXQiLCJyZW1vdmVGaWxsR2FwVGFyZ2V0Iiwic2V0RmlsbEdhcE1ldGhvZCIsIl9zdGF0ZSIsImMiLCJuYW1lIiwiZ2V0dGVyIiwibyIsImdldCIsInRvU3RyaW5nVGFnIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwicCIsInMiLCJtb2R1bGVJZCIsImwiLCJzY3JvbGxMb2NrJDEiLCJlbnVtZXJhYmxlT25seSIsInN5bWJvbHMiLCJhcHBseSIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfZGVmaW5lUHJvcGVydGllcyIsInByb3BzIiwiZGVzY3JpcHRvciIsIl9jcmVhdGVDbGFzcyIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIkhlYWRlciIsImNvbnRhaW5lciIsIl90aGlzIiwidGhpcyIsInF1ZXJ5U2VsZWN0b3IiLCJzY2hlbSIsIm1haW5NZW51IiwibWFpbk1lbnVOYXYiLCJtYWluVG9nZ2xlIiwic3ViaXRlbXMiLCJzdWJpdGVtVG9nZ2xlIiwic3ViaXRlbUxpc3QiLCJtYWluU3ViaXRlbXMiLCJtYWluVG9nZ2xlcyIsIm1lbnVPcGVuIiwiaXNTdWJsaXN0RXhwYW5kZWQiLCJleHBhbmRlZFN1Ymxpc3QiLCJpc0hpZGRlbiIsInNjcm9sbERpc3RhbmNlIiwiY2xhc3NlcyIsInBhZ2VTY3JvbGwiLCJzdWJtZW51T3BlbiIsImhpZGRlbiIsImluaXRNb2JpbGVNZW51IiwiaW5pdFNjcm9sbExpc3RlbmVyIiwiZXZlbnQiLCJjbG9zZU1lbnUiLCJfdGhpczIiLCJzbGljZSIsInN3aXRjaGVyIiwibG9nIiwib3Blbk1lbnUiLCJfdGhpczMiLCJpc0VuYWJsZSIsInBhZ2VZT2Zmc2V0IiwiY2xhc3NMaXN0IiwiX3RoaXM0Iiwic3ViaXRlbSIsIm1lbnUiLCJldnQiLCJleHBhbmRTdWJNZW51IiwiY29udGFpbnMiLCJjb2xsYXBzZVN1Yk1lbnUiLCJpc09mZiIsIml0ZW1Ub09wZW4iLCJyZW1vdmUiLCJhZGQiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIiwiZGVmaW5lUHJvcGVydGllcyIsIl9vYmplY3RTcHJlYWQyIiwiYXBwIiwiZW5hYmxlIiwiZGlzYWJsZSIsInRlc3RBcGkiLCJ0cmlnZ2VyQnRuIiwicmVxdWVzdFJlc3VsdCIsInJlcXVlc3RVcmwiLCJkYXRhc2V0IiwicmVxdWVzdFJlc3BvbnNlIiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwiZGF0YSIsInRpdGxlIiwiVmFsaWRhdGlvbiIsImZvcm0iLCJyZXN1bHRJbnB1dCIsImNhbmNlbCIsInZhbGlkYXRpb25SdWxlcyIsInJlcXVpcmVkIiwidmFsIiwiZW50cnkiLCJlbWFpbCIsInBob25lIiwiYWRkcmVzcyIsImZpZWxkIiwiY2hlY2tpZiIsImNoZWNrZWQiLCJzdWl0YWJsZSIsImZpbGVGaWVsZHMiLCJlbGVtIiwic2VsZWN0Iiwic2VsZWN0ZWRJbmRleCIsIndyYXBwZXIiLCJjbG9zZXN0Iiwid3JhcCIsInR5cGUiLCJydWxlcyIsInZhbGlkYXRlTmFtZSIsInZhbGlkYXRlQXMiLCJpc1ZhbGlkIiwidmFsaWRhdGVGaWVsZCIsInZhbGlkYXRlRm9ybSIsInNjcm9sbFRvRWxlbWVudCIsImZvcm1SZXN1bHQiLCJmb3JtSXNWYWxpZCIsInJ1bGUiLCJzaG93RXJyb3IiLCJoaWRlRXJyb3IiLCJ2YWx1ZUxpc3QiLCJjaGVja2VkRWxlbWVudCIsImZpbmQiLCJmaW5kTWFpbCIsInNjcm9sbEludG9WaWV3IiwiYmxvY2siLCJMb2FkTW9yZSIsImJ0biIsIiRsb2FkTW9yZUJ0biIsImN1cnJlbnRQYWdlIiwibnVtYmVyT2ZJdGVtcyIsIm1hdHJpeEJsb2NrSWQiLCJjYXRlZ29yeUlkIiwibG9hZE1vcmVVUkwiLCJsb2FkTW9yZSIsInRhcmdldENvbnRhaW5lcklkIiwiJHRhcmdldENvbnRhaW5lciIsImNoaWxkRWxlbWVudENvdW50IiwiZmlyZUxvYWRpbmciLCJidG5VcmwiLCJqc29uUmVzcG9uc2UiLCJkcmF3Q29udGVudCIsImh0bWwiLCJpc0xhc3RQYWdlIiwiZGlzcGxheSIsIm5ld0l0ZW1zTGlzdCIsIm5ld051bWJlck9mSXRlbXMiLCJudW1iZXJPZk5ld05ld3MiLCJmaXJlQTExeSIsIiRmaXJzdE5ld0l0ZW0iLCJjaGlsZHJlbiIsImZvY3VzIiwibGVmdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImNvdW50IiwiJGhpZGRlbkRlc2NyaXB0aW9uIiwiY3JlYXRlRWxlbWVudCIsImlubmVyVGV4dCIsImluc2VydEFkamFjZW50RWxlbWVudCIsImhlYWRlciIsInNldEluZXJ0IiwiX2xlbiIsImFyZ3MiLCJfa2V5IiwicmVtb3ZlSW5lcnQiLCJfbGVuMiIsIl9rZXkyIiwiaW5pdE1vZHVsZSIsIk1vZHVsZSIsImluaXQiXSwibWFwcGluZ3MiOiJBQUFBLGFBRUEsU0FBU0EsUUFBUUMsR0FBbVYsT0FBdE9ELFFBQXJELG1CQUFYRSxRQUFvRCxpQkFBcEJBLE9BQU9DLFNBQW1DLFNBQWlCRixHQUFPLGNBQWNBLEdBQTJCLFNBQWlCQSxHQUFPLE9BQU9BLEdBQXlCLG1CQUFYQyxRQUF5QkQsRUFBSUcsY0FBZ0JGLFFBQVVELElBQVFDLE9BQU9HLFVBQVksZ0JBQWtCSixJQUF5QkEsSUFFblgsU0FBV0ssR0FDUyxtQkFBWEMsUUFBeUJBLE9BQU9DLElBQU1ELE9BQU8sVUFBV0QsR0FBV0EsSUFENUUsQ0FFRyxXQUdELElBQUlHLEVBQXVDLG9CQUFmQyxXQUE2QkEsV0FBK0Isb0JBQVhDLE9BQXlCQSxPQUEyQixvQkFBWEMsT0FBeUJBLE9BQXlCLG9CQUFUQyxLQUF1QkEsS0FBTyxHQU03TCxTQUFTQyxFQUFxQkMsRUFBSUMsR0FDaEMsT0FFR0QsRUFGSUMsRUFBUyxDQUNkQyxRQUFTLElBQ0dELEVBQU9DLFNBQVVELEVBQU9DLFFBR3hDLElBVnVCQyxFQVVuQkMsRUFBZ0JMLEVBQXFCLFNBQVVFLEdBQ2hELElBQVVJLEVBQU1kLEVBQU5jLEVBS1RYLEVBTGVILEVBS0MsV0FFaEIsU0FBU2UsRUFBTUMsRUFBUUMsRUFBS0MsR0FFMUIsR0FBSUEsRUFBUSxDQUVWLElBQUlDLEVBQVdDLFNBQVNDLHlCQUNwQkMsR0FBV0wsRUFBSU0sYUFBYSxZQUFjTCxFQUFPTSxhQUFhLFdBRWxFRixHQUFXTCxFQUFJUSxhQUFhLFVBQVdILEdBRXZDLElBQ0EsSUFBSUksRUFBUVIsRUFBT1MsV0FBVSxHQUFLRCxFQUFNRSxXQUFXQyxRQUNqRFYsRUFBU1csWUFBWUosRUFBTUssWUFJN0JmLEVBQU9jLFlBQVlYLElBSXZCLFNBQVNhLEVBQXFCQyxHQUU1QkEsRUFBSUMsbUJBQXFCLFdBRXZCLEdBQUksSUFBTUQsRUFBSUUsV0FBWSxDQUV4QixJQUFJQyxFQUFpQkgsRUFBSUksZ0JBRXpCRCxLQUFtQkEsRUFBaUJILEVBQUlJLGdCQUFrQmpCLFNBQVNrQixlQUFlQyxtQkFBbUIsS0FBb0JDLEtBQUtDLFVBQVlSLEVBQUlTLGFBQWNULEVBQUlVLGNBQWdCLElBQ2hMVixFQUFJVyxRQUFRQyxPQUFPLEdBQUdDLElBQUksU0FBVUMsR0FFbEMsSUFBSTdCLEVBQVNlLEVBQUlVLGNBQWNJLEVBQUtDLElBRXpCOUIsRUFBWEEsSUFBb0JlLEVBQUlVLGNBQWNJLEVBQUtDLElBQU1aLEVBQWVhLGVBQWVGLEVBQUtDLEtBQ3BGakMsRUFBTWdDLEVBQUsvQixPQUFRK0IsRUFBSzlCLElBQUtDLE9BSW5DZSxFQUFJQyxxQkF1RU4sU0FBU2dCLEVBQWVDLEdBQ3RCLElBQUssSUFBSWxDLEVBQU1rQyxFQUFNLFFBQVVsQyxFQUFJbUMsU0FBU0MsZ0JBQWtCcEMsRUFBTUEsRUFBSXFDLGNBRXhFLE9BQU9yQyxFQUdULE9BMUVBLFNBQXVCc0MsR0FtRHJCLElBQUlDLEVBQ0FDLEVBQU9DLE9BQU9ILEdBS2RJLEVBQVd0RCxPQUFPdUQsTUFBUXZELE9BQU9FLEtBQ3JDaUQsRUFBVyxhQUFjQyxFQUFPQSxFQUFLRCxTQUxyQiwwQ0FLMENLLEtBQUtDLFVBQVVDLGFBQWVELFVBQVVDLFVBQVVDLE1BSDFGLHdCQUdnSCxJQUFJLEdBQUssUUFBVUYsVUFBVUMsVUFBVUMsTUFKMUosMkJBSTZLLElBQUksR0FBSyxLQUZ4TCxtQkFFc01ILEtBQUtDLFVBQVVDLFlBQWNKLEVBRWhQLElBQUlNLEVBQVcsR0FDWEMsRUFBd0I3RCxPQUFPNkQsdUJBQXlCQyxXQUN4REMsRUFBT2hELFNBQVNpRCxxQkFBcUIsT0FDckNDLEVBQWlDLEVBRXJDZCxHQWhFQSxTQUFTZSxJQUVQLElBQ0EsSUFBSUMsRUFBUSxFQUFHQSxFQUFRSixFQUFLdkMsUUFBUyxDQUVuQyxJQUFJNEMsRUFBTUwsRUFBS0ksR0FDWHhELEVBQVN5RCxFQUFJbkIsV0FDYnJDLEVBQU1pQyxFQUFlbEMsR0FDckIwRCxFQUFNRCxFQUFJakQsYUFBYSxlQUFpQmlELEVBQUlqRCxhQUFhLFFBRTdELElBQUtrRCxHQUFPakIsRUFBS2tCLGdCQUFrQkQsRUFBTUQsRUFBSWpELGFBQWFpQyxFQUFLa0IsZ0JBQWlCMUQsR0FBT3lELEdBQ3JGLEdBQUlsQixFQUNGLElBQUtDLEVBQUttQixVQUFZbkIsRUFBS21CLFNBQVNGLEVBQUt6RCxFQUFLd0QsR0FBTSxDQUVsRHpELEVBQU82RCxZQUFZSixHQUVuQixJQUFJSyxFQUFXSixFQUFJSyxNQUFNLEtBQ3JCQyxFQUFNRixFQUFTRyxRQUNmakMsRUFBSzhCLEVBQVNJLEtBQUssS0FFdkIsR0FBSUYsRUFBSW5ELE9BQVEsQ0FFZCxJQUFJSSxFQUFNZ0MsRUFBU2UsR0FFbkIvQyxLQUFRQSxFQUFNZ0MsRUFBU2UsR0FBTyxJQUFJRyxnQkFBc0JDLEtBQUssTUFBT0osR0FBTS9DLEVBQUlvRCxPQUFRcEQsRUFBSVcsUUFBVSxJQUNwR1gsRUFBSVcsUUFBUTBDLEtBQUssQ0FDZnRFLE9BQVFBLEVBQ1JDLElBQUtBLEVBQ0wrQixHQUFJQSxJQUVOaEIsRUFBcUJDLFFBR3JCbEIsRUFBTUMsRUFBUUMsRUFBS0csU0FBUzZCLGVBQWVELFVBSTNDd0IsSUFBU0YsUUFLYkUsSUFLSkosRUFBS3ZDLFFBQXlELEVBQS9DdUMsRUFBS3ZDLE9BQVN5QyxJQUF1Q0osRUFBc0JLLEVBQVksSUFpQjlGQSxLQS9HZDdELEVBQU9DLFFBR1BELEVBQU9DLFFBQVVYLElBQVljLEVBQUtELGNBQWdCYixNQXdIbER1RixFQUFhL0UsRUFBcUIsU0FBVUUsRUFBUUMsR0FDdEQsSUFBaURYLEVBQUFBLEVBRTlCLFdBQ2pCLE9BU1F3RixFQUFtQixHQTBFdkJDLEVBQW9CQyxFQWpGWkMsRUE0UFQsQ0FJRCxTQUFVakYsRUFBUWtGLEVBQXFCSCxHQUNyQ0EsRUFBb0JJLEVBQUVELEdBR0EsU0FBbEJFLEVBQTJDQyxHQUM3QyxPQUFPQyxNQUFNQyxRQUFRRixHQUFZQSxFQUFXLENBQUNBLEdBRy9CLFNBQVpHLEVBQStCaEYsR0FDakMsT0FBT0EsYUFBa0JpRixLQU9aLFNBQVhDLEVBQTZCQyxFQUFVQyxHQUN6QyxHQUFJRCxHQUFZQyxFQUFVLENBQ3hCRCxFQUF5QkEsYUFMQUUsU0FLWUYsRUFBVyxDQUFDQSxHQUVqRCxJQUFLLElBQUlHLEVBQUksRUFBR0EsRUFBSUgsRUFBU3hFLFNBQ3VCLElBQTlDeUUsRUFBU0QsRUFBU0csR0FBSUEsRUFBR0gsRUFBU3hFLFFBREgyRSxPQVF4QixTQUFiQyxFQUFpQ0MsR0FDbkMsT0FBT0MsUUFBUUMsTUFBTSxpQkFBaUJDLE9BQU9ILElBR3pCLFNBQWxCSSxFQUEyQ0MsR0FDN0MsR0FBSWYsTUFBTUMsUUFBUWMsR0FFaEIsT0FEZUEsRUFBTTdCLEtBQUssTUFLUixTQUFsQjhCLEVBQTJDWCxHQUM3QyxJQUFJWSxFQUFRLEdBSVosT0FIQWIsRUFBU0MsRUFBVSxTQUFVbEQsR0FDM0IsT0FBTzhELEVBQU0zQixLQUFLbkMsS0FFYjhELEVBR2tCLFNBQXZCQyxFQUFxREMsRUFBS0MsRUFBbkMsRUFBQSxHQUN6QixJQUNJQyxFQUEyQixFQUFuQkMsVUFBVXpGLGFBQStCMEYsSUFGNUIsRUFBQSxFQUV1RG5HLFNBRWhGLE1BSDhCLEVBQW5Ca0csVUFBVXpGLGFBQStCMEYsSUFEM0IsSUFBQSxLQUl1RCxJQUFwRVAsRUFBZ0JLLEVBQU1HLGlCQUFpQkosSUFBV0ssUUFBUU4sR0FDcEUsT0FBT0EsRUFHVCxNQUFRQSxFQUFNQSxFQUFJTyxpQkFBc0YsSUFBcEVWLEVBQWdCSyxFQUFNRyxpQkFBaUJKLElBQVdLLFFBQVFOLEtBRTlGLE9BQU9BLEVBR2dCLFNBQXJCUSxFQUFpRFIsRUFBS0MsRUFBakMsR0FDdkIsSUFBSUMsRUFBMkIsRUFBbkJDLFVBQVV6RixhQUErQjBGLElBRDlCLEVBQUEsRUFDeURuRyxTQUVoRixPQUQ4RSxJQUFwRTRGLEVBQWdCSyxFQUFNRyxpQkFBaUJKLElBQVdLLFFBQVFOLEdBSXZDLFNBQTNCUyxFQUE2RFQsR0FDL0QsT0FBSUEsR0FFZ0QsV0FEOUJVLGlCQUFpQlYsR0FDQVcsU0FLWCxTQUExQkMsRUFBMkRaLEdBQzdELE9BQUlBLE1BQ0VTLEVBQXlCVCxJQUliQSxFQUFJYSxXQUNBLEdBSUksU0FBeEJDLEVBQXVEZCxHQUN6RCxHQUFJQSxFQUFLLENBQ1AsR0FBSVMsRUFBeUJULEdBQzNCLE9BQU8sRUFHVCxJQUFJYSxFQUFZYixFQUFJYSxVQUdwQixPQUZtQmIsRUFBSWUsY0FDR0YsRUFBWWIsRUFBSWdCLGNBS2YsU0FBM0JDLEVBQTZEakIsR0FDL0QsT0FBSUEsTUFDRVMsRUFBeUJULElBSVpBLEVBQUlrQixZQUNBLEdBSUksU0FBekJDLEVBQXlEbkIsR0FDM0QsR0FBSUEsRUFBSyxDQUNQLEdBQUlTLEVBQXlCVCxHQUMzQixPQUFPLEVBR1QsSUFBSWtCLEVBQWFsQixFQUFJa0IsV0FHckIsT0FGa0JsQixFQUFJb0IsYUFDSUYsRUFBYWxCLEVBQUlxQixhQTJKL0MsU0FBU0MsRUFBZ0I5SSxFQUFLK0ksRUFBS0MsR0FZakMsT0FYSUQsS0FBTy9JLEVBQ1QrRCxPQUFPa0YsZUFBZWpKLEVBQUsrSSxFQUFLLENBQzlCQyxNQUFPQSxFQUNQRSxZQUFZLEVBQ1pDLGNBQWMsRUFDZEMsVUFBVSxJQUdacEosRUFBSStJLEdBQU9DLEVBR05oSixFQXJKVDhGLEVBQW9CdUQsRUFBRXBELEVBQXFCLG9CQUFxQixXQUM5RCxPQUFPcUQsSUFLVHhELEVBQW9CdUQsRUFBRXBELEVBQXFCLG1CQUFvQixXQUM3RCxPQUFPc0QsSUFLVHpELEVBQW9CdUQsRUFBRXBELEVBQXFCLGlCQUFrQixXQUMzRCxPQUFPdUQsSUFLVDFELEVBQW9CdUQsRUFBRXBELEVBQXFCLHdCQUF5QixXQUNsRSxPQUFPd0QsSUFLVDNELEVBQW9CdUQsRUFBRXBELEVBQXFCLDBCQUEyQixXQUNwRSxPQUFPeUQsSUFLVDVELEVBQW9CdUQsRUFBRXBELEVBQXFCLGlDQUFrQyxXQUMzRSxPQUFPMEQsSUFLVDdELEVBQW9CdUQsRUFBRXBELEVBQXFCLHdCQUF5QixXQUNsRSxPQUFPMkQsSUFLVDlELEVBQW9CdUQsRUFBRXBELEVBQXFCLCtCQUFnQyxXQUN6RSxPQUFPNEQsSUFLVC9ELEVBQW9CdUQsRUFBRXBELEVBQXFCLHNCQUF1QixXQUNoRSxPQUFPNkQsSUFLVGhFLEVBQW9CdUQsRUFBRXBELEVBQXFCLHlCQUEwQixXQUNuRSxPQUFPOEQsSUFLVGpFLEVBQW9CdUQsRUFBRXBELEVBQXFCLHdCQUF5QixXQUNsRSxPQUFPK0QsSUFLVGxFLEVBQW9CdUQsRUFBRXBELEVBQXFCLDJCQUE0QixXQUNyRSxPQUFPZ0UsSUFLVG5FLEVBQW9CdUQsRUFBRXBELEVBQXFCLG9CQUFxQixXQUM5RCxPQUFPaUUsSUFLVHBFLEVBQW9CdUQsRUFBRXBELEVBQXFCLHNCQUF1QixXQUNoRSxPQUFPa0UsSUFLVHJFLEVBQW9CdUQsRUFBRXBELEVBQXFCLG1CQUFvQixXQUM3RCxPQUFPbUUsSUFLVHRFLEVBQW9CdUQsRUFBRXBELEVBQXFCLG1CQUFvQixXQUM3RCxPQUFPb0UsSUFLVHZFLEVBQW9CdUQsRUFBRXBELEVBQXFCLHNCQUF1QixXQUNoRSxPQUFPcUUsSUFLVHhFLEVBQW9CdUQsRUFBRXBELEVBQXFCLHFCQUFzQixXQUMvRCxPQUFPc0UsSUFLVHpFLEVBQW9CdUQsRUFBRXBELEVBQXFCLHdCQUF5QixXQUNsRSxPQUFPdUUsSUFLVDFFLEVBQW9CdUQsRUFBRXBELEVBQXFCLGFBQWMsV0FDdkQsT0FBT3dFLElBcUNULElBQUlDLEVBQTZCLENBQUMsVUFBVyxTQUFVLFFBQVMsWUFBYSxRQUV6RUMsRUFBUSxDQUNWQyxRQUFRLEVBQ1JDLE1BQU8sRUFDUEMsb0JBQXFCLENBQUMsaUNBQ3RCQyxrQkFBbUIsQ0FBQyxPQUFRLCtCQUM1QkMsaUJBQWtCLENBQUMsT0FBUSw4QkFBK0IsK0JBQzFEQyxjQUFlUCxFQUEyQixHQUUxQ1EsWUFBYSxFQUNiQyxZQUFhLEdBR1g3QixFQUFvQixTQUEyQi9ILEdBQzdDb0osRUFBTUUsT0FBUyxJQUNqQkYsRUFBTUMsUUFBUyxFQUNmUSxJQUNBQyxLQUdGdkIsRUFBZ0N2SSxHQUNoQ29KLEVBQU1FLFNBR0p0QixFQUFtQixTQUEwQmhJLEdBQ2pDLEVBQWRvSixFQUFNRSxPQUFhRixFQUFNRSxRQUVyQkYsRUFBTUUsT0FBUyxJQUNqQkYsRUFBTUMsUUFBUyxFQUNmVSxJQUNBQyxLQUdGeEIsRUFBbUN4SSxJQUdqQ2lJLEVBQWlCLFdBQ25CLE9BQU9tQixFQUFNQyxRQUdYbkIsRUFBd0IsV0FDMUJrQixFQUFNRSxNQUFRLEdBR1puQixFQUFzQyxTQUFpQzhCLEVBQWpDLEdBQ3hDLElBQUlDLEVBQWdDLEVBQW5COUQsVUFBVXpGLGFBQStCMEYsSUFEbEIsR0FBQSxFQUd4QyxHQUFJckIsRUFBVWlGLEdBQVUsQ0FDdEIsSUFBSUUsRUFBMkJGLEVBQVFHLE1BQU1DLFVBRXpDSCxFQUNHakMsTUFDSGdDLEVBQVFHLE1BQU1DLFVBQVlKLEVBQVEzSixhQUFhLCtDQUdqRDJKLEVBQVFHLE1BQU1DLFVBQVksU0FHNUIsSUFBSUMsRUFBUWxDLEVBQTJDNkIsR0FFdkQsT0FEQUEsRUFBUUcsTUFBTUMsVUFBWUYsRUFDbkJHLEVBRVAsT0FBTyxHQUlQbEMsRUFBNkMsU0FBd0M2QixHQUN2RixHQUFJakYsRUFBVWlGLEdBQVUsQ0FDdEIsR0FBSUEsSUFBWS9KLFNBQVNvQixLQUFNLENBQzdCLElBQUlpSixFQUFnQnJLLFNBQVNzSyxnQkFBZ0JDLFlBRzdDLE9BRmtCdEwsT0FBT3VMLFdBQ1FILEVBR2pDLElBQUlJLEVBQWlDVixFQUFRRyxNQUFNUSxnQkFDL0NDLEVBQWtDWixFQUFRRyxNQUFNVSxpQkFDcERiLEVBQVFHLE1BQU1RLGdCQUFrQixNQUNoQ1gsRUFBUUcsTUFBTVUsaUJBQW1CLE1BRWpDLElBQUlDLEVBQWdCZCxFQUFRM0MsWUFBYzJDLEVBQVFRLFlBSWxELE9BRkFSLEVBQVFHLE1BQU1RLGdCQUFrQkQsRUFDaENWLEVBQVFHLE1BQU1VLGlCQUFtQkQsRUFDMUJFLEVBR1QsT0FBTyxHQUlQMUMsRUFBd0IsU0FBQSxHQUMxQixJQUFJNkIsRUFBZ0MsRUFBbkI5RCxVQUFVekYsYUFBK0IwRixJQURoQyxHQUFBLEVBRTFCLE9BQU84QixFQUFvQ2pJLFNBQVNvQixLQUFNNEksSUFHeEQ1QixFQUErQixXQUNqQyxPQUFPRixFQUEyQ2xJLFNBQVNvQixPQUd6RGlILEVBQWtDLFNBQTZCdkksR0FDN0RBLEdBQ1k0RSxFQUFnQjVFLEdBQ3RCNEIsSUFBSSxTQUFVb0osR0FDcEI5RixFQUFTOEYsRUFBVSxTQUFVZixHQUN2QmpGLEVBQVVpRixHQUNaQSxFQUFRMUosYUFBYSw4QkFBK0IsSUFFcERnRixFQUFXLElBQUtJLE9BQU9zRSxFQUFTLDZCQU90Q3pCLEVBQXFDLFNBQWdDeEksR0FDbkVBLEdBQ1k0RSxFQUFnQjVFLEdBQ3RCNEIsSUFBSSxTQUFVb0osR0FDcEI5RixFQUFTOEYsRUFBVSxTQUFVZixHQUN2QmpGLEVBQVVpRixHQUNaQSxFQUFRZ0IsZ0JBQWdCLCtCQUV4QjFGLEVBQVcsSUFBS0ksT0FBT3NFLEVBQVMsNkJBT3RDeEIsRUFBb0MsU0FBK0J2QyxHQUNqRUEsR0FDY3RCLEVBQWdCc0IsR0FDdEJ0RSxJQUFJLFNBQVVzRSxHQUN0QmtELEVBQU1HLG9CQUFvQm5GLEtBQUs4QixNQUtqQ3dDLEVBQXVDLFNBQWtDeEMsR0FDdkVBLEdBQ2N0QixFQUFnQnNCLEdBQ3RCdEUsSUFBSSxTQUFVc0UsR0FDdEJrRCxFQUFNRyxvQkFBc0JILEVBQU1HLG9CQUFvQjJCLE9BQU8sU0FBVUMsR0FDckUsT0FBT0EsSUFBY2pGLE9BTXpCeUMsRUFBZ0MsU0FBMkIzSSxHQUN6REEsSUFDWTRFLEVBQWdCNUUsR0FDdEI0QixJQUFJLFNBQVVvSixHQUNwQjlGLEVBQVM4RixFQUFVLFNBQVVmLEdBQ3ZCakYsRUFBVWlGLEdBQ1pBLEVBQVExSixhQUFhLDRCQUE2QixJQUVsRGdGLEVBQVcsSUFBS0ksT0FBT3NFLEVBQVMsNEJBS2pDaEMsS0FDSDRCLE1BS0ZqQixFQUFrQyxTQUE2QjFDLEdBQzdEQSxJQUNjdEIsRUFBZ0JzQixHQUN0QnRFLElBQUksU0FBVXNFLEdBQ3RCa0QsRUFBTUksa0JBQWtCcEYsS0FBSzhCLEtBRzFCK0IsS0FDSDRCLElBR0ZiLEVBQStCOUMsS0FJL0IyQyxFQUErQixTQUEwQnVDLEdBQzNELEdBQUlBLEVBQ0YsSUFBb0QsSUFBaERqQyxFQUEyQjVDLFFBQVE2RSxHQUNyQ2hDLEVBQU1NLGNBQWdCMEIsRUFDdEJsQyxRQUNLLENBQ0wsSUFBSW1DLEVBQVVsQyxFQUEyQm5GLEtBQUssTUFDOUN1QixFQUFXLElBQUtJLE9BQU95RixFQUFRLDREQUE2RHpGLE9BQU8wRixFQUFTLFFBSzlHdkMsRUFBK0IsU0FBMEI5SSxHQUN2REEsR0FDWTRFLEVBQWdCNUUsR0FDdEI0QixJQUFJLFNBQVVvSixHQUNwQjlGLEVBQVM4RixFQUFVLFNBQVVmLEdBQ3ZCakYsRUFBVWlGLElBQ1pBLEVBQVExSixhQUFhLDRCQUE2QixJQUU3QzZJLEVBQU1DLFFBQ1RpQyxFQUEwQnJCLElBRzVCMUUsRUFBVyxJQUFLSSxPQUFPc0UsRUFBUyw2QkFPdENsQixFQUFrQyxTQUE2Qi9JLEdBQzdEQSxHQUNZNEUsRUFBZ0I1RSxHQUN0QjRCLElBQUksU0FBVW9KLEdBQ3BCOUYsRUFBUzhGLEVBQVUsU0FBVWYsR0FDdkJqRixFQUFVaUYsSUFDWkEsRUFBUWdCLGdCQUFnQiw2QkFFbkI3QixFQUFNQyxRQUNUa0MsRUFBNEJ0QixJQUc5QjFFLEVBQVcsSUFBS0ksT0FBT3NFLEVBQVMsNkJBT3RDakIsRUFBaUMsU0FBNEI5QyxHQUMzREEsR0FDY3RCLEVBQWdCc0IsR0FDdEJ0RSxJQUFJLFNBQVVzRSxJQUM0QixJQUE5Q2tELEVBQU1LLGlCQUFpQmxELFFBQVFMLEtBQ2pDa0QsRUFBTUssaUJBQWlCckYsS0FBSzhCLEdBRXZCa0QsRUFBTUMsUUFDVG1DLEVBQTRCdEYsT0FPbEMrQyxFQUFvQyxTQUErQi9DLEdBQ2pFQSxHQUNjdEIsRUFBZ0JzQixHQUN0QnRFLElBQUksU0FBVXNFLEdBQ3RCa0QsRUFBTUssaUJBQW1CTCxFQUFNSyxpQkFBaUJ5QixPQUFPLFNBQVVPLEdBQy9ELE9BQU9BLElBQWN2RixJQUdsQmtELEVBQU1DLFFBQ1RxQyxFQUE4QnhGLE1BTWxDZ0QsRUFBYSxXQUNWRSxFQUFNQyxRQUNUUyxLQUlBRCxFQUFtQyxXQUNyQyxJQUFJM0QsRUFBV04sRUFBZ0J3RCxFQUFNSSxtQkFDckNtQyxFQUF5Q3pGLElBR3ZDNkQsRUFBbUMsV0FDckMsSUFBSTdELEVBQVdOLEVBQWdCd0QsRUFBTUksbUJBQ3JDb0MsRUFBeUMxRixJQUd2Q3lGLEVBQTJDLFNBQXNDekYsR0FDbkYsSUFBSThFLEVBQVc5SyxTQUFTb0csaUJBQWlCSixHQUN6Q2hCLEVBQVM4RixFQUFVLFNBQVVmLEdBQzNCNEIsRUFBdUM1QixNQUl2QzJCLEVBQTJDLFNBQXNDMUYsR0FDbkYsSUFBSThFLEVBQVc5SyxTQUFTb0csaUJBQWlCSixHQUN6Q2hCLEVBQVM4RixFQUFVLFNBQVVmLEdBQzNCNkIsRUFBdUM3QixNQUl2QzRCLEVBQXlDLFNBQW9DNUIsR0FDL0UsR0FBSWpGLEVBQVVpRixJQUFnRSxTQUFwREEsRUFBUTNKLGFBQWEsMkJBQXVDLENBQ3BGLElBQUl5TCxFQUFnQjVNLE9BQU93SCxpQkFBaUJzRCxHQUM1Q0EsRUFBUTFKLGFBQWEsNkNBQThDd0wsRUFBYzFCLFdBQ2pGSixFQUFRMUosYUFBYSxrREFBbUQwSixFQUFRRyxNQUFNeEQsVUFDdEZxRCxFQUFRMUosYUFBYSxvREFBcUQwSixFQUFRRyxNQUFNQyxXQUN4RkosRUFBUUcsTUFBTXhELFNBQVcsU0FDekJxRCxFQUFRMUosYUFBYSwwQkFBMkIsVUFJaER1TCxFQUF5QyxTQUFvQzdCLEdBQzNFakYsRUFBVWlGLElBQWdFLFNBQXBEQSxFQUFRM0osYUFBYSw2QkFDN0MySixFQUFRRyxNQUFNeEQsU0FBV3FELEVBQVEzSixhQUFhLG1EQUM5QzJKLEVBQVFHLE1BQU1DLFVBQVlKLEVBQVEzSixhQUFhLHFEQUMvQzJKLEVBQVFnQixnQkFBZ0IsNENBQ3hCaEIsRUFBUWdCLGdCQUFnQixtREFDeEJoQixFQUFRZ0IsZ0JBQWdCLHFEQUN4QmhCLEVBQVFnQixnQkFBZ0IsNkJBSXhCbkIsRUFBVyxXQUNiVixFQUFNSyxpQkFBaUI3SCxJQUFJLFNBQVVzRSxHQUNuQ3NGLEVBQTRCdEYsTUFJNUI4RCxFQUFhLFdBQ2ZaLEVBQU1LLGlCQUFpQjdILElBQUksU0FBVXNFLEdBQ25Dd0YsRUFBOEJ4RixNQUk5QnNGLEVBQThCLFNBQXlCdEYsR0FDekQsSUFBSThFLEVBQVc5SyxTQUFTb0csaUJBQWlCSixHQUNyQzhGLEdBQTRELElBQS9DNUMsRUFBTUksa0JBQWtCakQsUUFBUUwsR0FDakRoQixFQUFTOEYsRUFBVSxTQUFVZixHQUMzQnFCLEVBQTBCckIsRUFBUytCLE1BSW5DVixFQUE0QixTQUF1QnJCLEVBQXZCLEdBQzlCLElBQUkrQixFQUFnQyxFQUFuQjVGLFVBQVV6RixhQUErQjBGLElBRDVCLEdBQUEsRUFHOUIsR0FBSXJCLEVBQVVpRixHQUFVLENBQ3RCLElBQUlnQyxFQUVKLEdBQTBELEtBQXREaEMsRUFBUTNKLGFBQWEsOEJBQXVDMEwsRUFDOURDLEVBQWlCOUQsRUFBb0M4QixHQUFTLE9BQ3pELENBQ0wsSUFBSWlDLEVBQWtCbEcsRUFBcUJpRSxFQUFTckUsRUFBZ0J3RCxFQUFNSSxvQkFDMUV5QyxFQUFpQjlELEVBQW9DK0QsR0FBaUIsR0FHWixTQUF4RGpDLEVBQVEzSixhQUFhLGdDQUN2QmlMLEVBQTRCdEIsR0FHOUIsSUFBSThCLEVBQWdCNU0sT0FBT3dILGlCQUFpQnNELEdBSTVDLEdBSEFBLEVBQVExSixhQUFhLDhCQUErQixRQUNwRDBKLEVBQVExSixhQUFhLDJDQUE0QzZJLEVBQU1NLGVBRTNDLFdBQXhCTixFQUFNTSxjQUE0QixDQUNwQyxJQUFJeUMsRUFBZ0JDLFdBQVdMLEVBQWNNLGFBQzdDcEMsRUFBUUcsTUFBTWlDLFlBQWMsR0FBRzFHLE9BQU93RyxFQUFnQkYsRUFBZ0IsV0FDakUsR0FBNEIsVUFBeEI3QyxFQUFNTSxjQUNmTyxFQUFRRyxNQUFNRSxNQUFRLGVBQWUzRSxPQUFPc0csRUFBZ0IsWUFDdkQsR0FBNEIsY0FBeEI3QyxFQUFNTSxjQUNmTyxFQUFRRyxNQUFNa0MsU0FBVyxlQUFlM0csT0FBT3NHLEVBQWdCLFlBQzFELEdBQTRCLFlBQXhCN0MsRUFBTU0sY0FBNkIsQ0FDNUMsSUFBSTZDLEVBQWlCSCxXQUFXTCxFQUFjUyxjQUM5Q3ZDLEVBQVFHLE1BQU1vQyxhQUFlLEdBQUc3RyxPQUFPNEcsRUFBaUJOLEVBQWdCLFNBSzFFUCxFQUFnQyxTQUEyQnhGLEdBQzdELElBQUk4RSxFQUFXOUssU0FBU29HLGlCQUFpQkosR0FDekNoQixFQUFTOEYsRUFBVSxTQUFVZixHQUMzQnNCLEVBQTRCdEIsTUFJNUJzQixFQUE4QixTQUF5QnRCLEdBQ3pELEdBQUlqRixFQUFVaUYsSUFDZ0QsU0FBeERBLEVBQVEzSixhQUFhLCtCQUEyQyxDQUNsRSxJQUFJbU0sRUFBdUJ4QyxFQUFRM0osYUFBYSw0Q0FDaEQySixFQUFRZ0IsZ0JBQWdCLCtCQUN4QmhCLEVBQVFnQixnQkFBZ0IsNENBRUssV0FBekJ3QixFQUNGeEMsRUFBUUcsTUFBTWlDLFlBQWMsR0FDTSxVQUF6QkksRUFDVHhDLEVBQVFHLE1BQU1FLE1BQVEsR0FDWSxjQUF6Qm1DLEVBQ1R4QyxFQUFRRyxNQUFNa0MsU0FBVyxHQUNTLFlBQXpCRyxJQUNUeEMsRUFBUUcsTUFBTW9DLGFBQWUsTUErRmYsb0JBQVhyTixRQUNUQSxPQUFPdU4saUJBQWlCLFNBMUZYLFdBQ2J4RCxNQTRGc0Isb0JBQWJoSixXQUNUQSxTQUFTd00saUJBQWlCLGFBMUZULFNBQXNCQyxHQUNsQ3ZELEVBQU1DLFNBQ1RELEVBQU1PLFlBQWNnRCxFQUFFQyxRQUFRLEdBQUdDLFFBQ2pDekQsRUFBTVEsWUFBYytDLEVBQUVDLFFBQVEsR0FBR0UsV0F3Rm5DNU0sU0FBU3dNLGlCQUFpQixZQXBGRSxTQUFxQkMsR0FDakQsSUFBS3ZELEVBQU1DLE9BQVEsQ0FDakIsSUFBSU0sRUFBY1AsRUFBTU8sWUFDcEJDLEVBQWNSLEVBQU1RLFlBQ3BCbUQsRUFBaUJKLEVBQUVDLFFBQVEsR0FBR0MsUUFDOUJHLEVBQWlCTCxFQUFFQyxRQUFRLEdBQUdFLFFBRWxDLEdBQUlILEVBQUVDLFFBQVFqTSxPQUFTLEVBQUcsQ0FDeEIsSUFBSXVGLEVBQVdOLEVBQWdCd0QsRUFBTUcscUJBQ2pDMEQsRUFDRXRELEVBQWNvRCxFQURoQkUsRUFFa0JGLEVBQWRwRCxFQUZKc0QsRUFHSXJELEVBQWNvRCxFQUhsQkMsRUFJbUJELEVBQWRwRCxFQUVMc0QsRUFDRXZELEVBeGF3QixFQXdhc0JvRCxFQURoREcsRUFFa0RILEVBQTlDcEQsRUF6YXNCLEVBdWExQnVELEVBR0l0RCxFQTFhc0IsRUEwYXdCb0QsRUFIbERFLEVBSW1ERixFQUE5Q3BELEVBM2FxQixHQThhakIsU0FBU3VELEVBQU9sSCxFQUFoQixHQUNYLElBQUltSCxFQUEwQixFQUFuQmhILFVBQVV6RixhQUErQjBGLElBRHpDLEdBQUEsRUFHWCxHQUFJSixFQUFLLENBQ1AsSUFBSW9ILEVBQXFCckgsRUFBcUJDLEVBQUtDLEdBQVUsR0FFN0QsR0FubEJETyxFQW1sQnlCUixFQXBsQmpCLHVCQXFsQkwsT0FBTyxFQUdULEdBQUltSCxHQTVsQkwzRyxFQTRsQnNDUixFQTdsQjlCLHVDQTZsQnNDRCxFQUFxQkMsRUFBS0MsSUFBYU8sRUFBbUJSLEVBQUtDLEdBQVcsQ0FDckgsSUFBSW9ILEdBQVUsRUFFVnBHLEVBQXlCakIsSUFBUW1CLEVBQXVCbkIsSUFDdERnSCxHQUFnQnBHLEVBQXdCWixJQUFRZ0gsR0FBa0JsRyxFQUFzQmQsTUFDMUZxSCxHQUFVLEdBRUh6RyxFQUF3QlosSUFBUWMsRUFBc0JkLElBQzNEZ0gsR0FBa0IvRixFQUF5QmpCLElBQVFnSCxHQUFtQjdGLEVBQXVCbkIsTUFDL0ZxSCxHQUFVLElBRUhKLEdBQTBCckcsRUFBd0JaLElBQVFpSCxHQUE0Qm5HLEVBQXNCZCxJQUFRaUgsR0FBNEJoRyxFQUF5QmpCLElBQVFpSCxHQUE2QjlGLEVBQXVCbkIsTUFDOU9xSCxHQUFVLEdBR1JBLElBQ0VELEVBQ0ZGLEVBQU9FLEdBQW9CLEdBRXZCVixFQUFFWSxZQUNKWixFQUFFYSx1QkFLUkwsRUFBT0UsUUFHTFYsRUFBRVksWUFDSlosRUFBRWEsaUJBS1JMLENBQU9SLEVBQUUzTSxXQWtCbUQsQ0FDOUR5TixTQUFTLElBRVh2TixTQUFTd00saUJBQWlCLFdBaEJYLFdBQ1Z0RCxFQUFNQyxTQUNURCxFQUFNTyxZQUFjLEVBQ3BCUCxFQUFNUSxZQUFjLE1BZ0J4QixJQUFJOEQsRUFBb0IsQ0FDdEJDLEtBQU0sU0FBYzNOLEdBQ2xCdUYsRUFBVyxzSUFDWHdDLEVBQWtCL0gsSUFFcEI0TixLQUFNLFNBQWM1TixHQUNsQnVGLEVBQVcsb0lBQ1h5QyxFQUFpQmhJLElBRW5CNk4sT0FBUSxTQUFnQjdOLEdBQ3RCdUYsRUFBVywwQ0FFUDBDLElBQ0ZGLElBRUFDLEVBQWlCaEksSUFHckI4TixTQUFVLFdBRVIsT0FEQXZJLEVBQVcsb0hBQ0owQyxLQUVUOEYsU0FBVSxXQUVSLE9BREF4SSxFQUFXLGtJQUNKOEMsS0FFVDJGLGdCQUFpQixXQUVmLE9BREF6SSxFQUFXLHVKQUNKK0MsS0FFVDJGLHFCQUFzQixTQUE4QmpPLEdBQ2xEdUYsRUFBVywwSkFDWGdELEVBQWdDdkksSUFFbENrTyxvQkFBcUIsU0FBNkJoSSxHQUNoRFgsRUFBVyxzSkFDWHlELEVBQStCOUMsSUFFakNpSSxrQkFBbUIsU0FBMkJuTyxHQUM1Q3VGLEVBQVcsOElBQ1h1RCxFQUE2QjlJLElBRS9Cb08sV0FBWSxXQUNWN0ksRUFBVyxvSUFDWDJDLE1BSUE3RCxFQXJrQkosU0FBdUJyRSxHQUNyQixJQUFLLElBQUlzRixFQUFJLEVBQUdBLEVBQUljLFVBQVV6RixPQUFRMkUsSUFBSyxDQUN6QyxJQUFJK0ksRUFBeUIsTUFBaEJqSSxVQUFVZCxHQUFhYyxVQUFVZCxHQUFLLEdBQy9DZ0osRUFBVTlMLE9BQU8rTCxLQUFLRixHQUVrQixtQkFBakM3TCxPQUFPZ00sd0JBQ2hCRixFQUFVQSxFQUFRM0ksT0FBT25ELE9BQU9nTSxzQkFBc0JILEdBQVFuRCxPQUFPLFNBQVV1RCxHQUM3RSxPQUFPak0sT0FBT2tNLHlCQUF5QkwsRUFBUUksR0FBSzlHLGVBSXhEMkcsRUFBUUssUUFBUSxTQUFVbkgsR0FDeEJELEVBQWdCdkgsRUFBUXdILEVBQUs2RyxFQUFPN0csTUFJeEMsT0FBT3hILEVBcWpCUTRPLENBQWMsQ0FDN0I3RyxrQkFBbUJBLEVBQ25CQyxpQkFBa0JBLEVBQ2xCQyxlQUFnQkEsRUFDaEJDLHNCQUF1QkEsRUFDdkIyRyx3QkFBeUIxRyxFQUN6QjJHLCtCQUFnQzFHLEVBQ2hDQyxzQkFBdUJBLEVBQ3ZCQyw2QkFBOEJBLEVBQzlCeUcsc0JBQXVCdEcsRUFDdkJ1Ryx5QkFBMEJ0RyxFQUMxQnVHLG9CQUFxQjFHLEVBQ3JCMkcsdUJBQXdCMUcsRUFDeEIyRyxvQkFBcUJ2RyxFQUNyQndHLGtCQUFtQnpHLEVBQ25CMEcsbUJBQW9CckcsRUFDcEJzRyxzQkFBdUJyRyxFQUN2QnNHLGlCQUFrQnpHLEVBQ2xCMEcsb0JBQXFCekcsRUFDckIwRyxpQkFBa0I1RyxFQUNsQkssV0FBWUEsRUFDWndHLE9BQVF0RyxHQUNQc0UsR0FJSGhKLEVBQTZCLFFBQUlMLElBbmdDakNFLEVBQW9Cb0wsRUFBSXJMLEVBUXhCQyxFQUFvQnVELEVBQUksU0FBVXJJLEVBQVNtUSxFQUFNQyxHQUUxQ3RMLEVBQW9CdUwsRUFBRXJRLEVBQVNtUSxJQUVsQ3BOLE9BQU9rRixlQUFlakksRUFBU21RLEVBQU0sQ0FDbkNqSSxZQUFZLEVBQ1pvSSxJQUFLRixLQWVYdEwsRUFBb0JJLEVBQUksU0FBVWxGLEdBRVYsb0JBQVhmLFFBQTBCQSxPQUFPc1IsYUFFMUN4TixPQUFPa0YsZUFBZWpJLEVBQVNmLE9BQU9zUixZQUFhLENBQ2pEdkksTUFBTyxXQU9YakYsT0FBT2tGLGVBQWVqSSxFQUFTLGFBQWMsQ0FDM0NnSSxPQUFPLEtBd0JYbEQsRUFBb0IwTCxFQUFJLFNBQVV4SSxFQUFPeUksR0FLdkMsR0FIVyxFQUFQQSxJQUFVekksRUFBUWxELEVBQW9Ca0QsSUFHL0IsRUFBUHlJLEVBQVUsT0FBT3pJLEVBR3JCLEdBQVcsRUFBUHlJLEdBQStCLFdBQW5CMVIsUUFBUWlKLElBQXVCQSxHQUFTQSxFQUFNMEksV0FBWSxPQUFPMUksRUFHakYsSUFBSTJJLEVBQUs1TixPQUFPNk4sT0FBTyxNQWF2QixHQVZBOUwsRUFBb0JJLEVBQUV5TCxHQUl0QjVOLE9BQU9rRixlQUFlMEksRUFBSSxVQUFXLENBQ25DekksWUFBWSxFQUNaRixNQUFPQSxJQUlFLEVBQVB5SSxHQUE0QixpQkFBVHpJLEVBQW1CLElBQUssSUFBSUQsS0FBT0MsRUFDeERsRCxFQUFvQnVELEVBQUVzSSxFQUFJNUksRUFBSyxTQUFVQSxHQUN2QyxPQUFPQyxFQUFNRCxJQUNiOEksS0FBSyxLQUFNOUksSUFJZixPQUFPNEksR0FXVDdMLEVBQW9CZ00sRUFBSSxTQUFVL1EsR0FFaEMsSUFBSXFRLEVBQVNyUSxHQUFVQSxFQUFPMlEsV0FFOUIsV0FDRSxPQUFPM1EsRUFBZ0IsU0FHekIsV0FDRSxPQUFPQSxHQVFULE9BSkErRSxFQUFvQnVELEVBQUUrSCxFQUFRLElBQUtBLEdBSTVCQSxHQVdUdEwsRUFBb0J1TCxFQUFJLFNBQVVVLEVBQVFDLEdBQ3hDLE9BQU9qTyxPQUFPM0QsVUFBVTZSLGVBQWVDLEtBQUtILEVBQVFDLElBVXREbE0sRUFBb0JxTSxFQUFJLEdBVWpCck0sRUFBb0JBLEVBQW9Cc00sRUFBSSxHQTIyQnZELFFBbGxDSSxTQUFTdE0sRUFBb0J1TSxHQU8zQixHQUFJeE0sRUFBaUJ3TSxHQUVuQixPQUFPeE0sRUFBaUJ3TSxHQUFVclIsUUFTcEMsSUFBSUQsRUFBUzhFLEVBQWlCd00sR0FBWSxDQUV4Q3hMLEVBQUd3TCxFQUdIQyxHQUFHLEVBR0h0UixRQUFTLElBMkJYLE9BaEJBZ0YsRUFBUXFNLEdBQVVILEtBQUtuUixFQUFPQyxRQUFTRCxFQUFRQSxFQUFPQyxRQUFTOEUsR0FRL0QvRSxFQUFPdVIsR0FBSSxFQVFKdlIsRUFBT0MsUUFwRWxCLElBQVVnRixFQU9KSCxHQVhSOUUsRUFBT0MsUUFBVVgsTUF3bUNqQmtTLEdBanZDbUJ0UixFQWl2Q1UyRSxJQWh2Q25CM0UsRUFBRXlRLFlBQWMzTixPQUFPM0QsVUFBVTZSLGVBQWVDLEtBQUtqUixFQUFHLFdBQWFBLEVBQVcsUUFBSUEsRUFrdkNsRyxTQUFTNE8sRUFBUWtDLEVBQVFTLEdBQ3ZCLElBQUkxQyxFQUFPL0wsT0FBTytMLEtBQUtpQyxHQUV2QixHQUFJaE8sT0FBT2dNLHNCQUF1QixDQUNoQyxJQUFJMEMsRUFBVTFPLE9BQU9nTSxzQkFBc0JnQyxHQUV2Q1MsSUFDRkMsRUFBVUEsRUFBUWhHLE9BQU8sU0FBVXVELEdBQ2pDLE9BQU9qTSxPQUFPa00seUJBQXlCOEIsRUFBUS9CLEdBQUs5RyxjQUl4RDRHLEVBQUtuSyxLQUFLK00sTUFBTTVDLEVBQU0yQyxHQUd4QixPQUFPM0MsRUF1QlQsU0FBUzZDLEVBQWdCQyxFQUFVQyxHQUNqQyxLQUFNRCxhQUFvQkMsR0FDeEIsTUFBTSxJQUFJQyxVQUFVLHFDQUl4QixTQUFTQyxFQUFrQnhSLEVBQVF5UixHQUNqQyxJQUFLLElBQUluTSxFQUFJLEVBQUdBLEVBQUltTSxFQUFNOVEsT0FBUTJFLElBQUssQ0FDckMsSUFBSW9NLEVBQWFELEVBQU1uTSxHQUN2Qm9NLEVBQVcvSixXQUFhK0osRUFBVy9KLGFBQWMsRUFDakQrSixFQUFXOUosY0FBZSxFQUN0QixVQUFXOEosSUFBWUEsRUFBVzdKLFVBQVcsR0FDakRyRixPQUFPa0YsZUFBZTFILEVBQVEwUixFQUFXbEssSUFBS2tLLElBSWxELFNBQVNDLEVBQWFMLEVBQWFNLEVBQVlDLEdBRzdDLE9BRklELEdBQVlKLEVBQWtCRixFQUFZelMsVUFBVytTLEdBQ3JEQyxHQUFhTCxFQUFrQkYsRUFBYU8sR0FDekNQLEVBR1QsU0FBUy9KLEVBQWdCOUksRUFBSytJLEVBQUtDLEdBWWpDLE9BWElELEtBQU8vSSxFQUNUK0QsT0FBT2tGLGVBQWVqSixFQUFLK0ksRUFBSyxDQUM5QkMsTUFBT0EsRUFDUEUsWUFBWSxFQUNaQyxjQUFjLEVBQ2RDLFVBQVUsSUFHWnBKLEVBQUkrSSxHQUFPQyxFQUdOaEosRUFHVCxJQUFJcVQsRUFBc0IsV0FDeEIsU0FBU0EsRUFBT0MsR0FDZCxJQUFJQyxFQUFRQyxLQUVaYixFQUFnQmEsS0FBTUgsR0FFdEJHLEtBQUtGLFVBQVk3UixTQUFTZ1MsY0FBY0gsR0FDeENFLEtBQUtFLE1BQVEsQ0FDWEMsU0FBVSxrQkFDVkMsWUFBYSxrQkFDYkMsV0FBWSxxQkFDWkMsU0FBVSxzQkFDVkMsY0FBZSx3QkFDZkMsWUFBYSx1QkFFZlIsS0FBS1MsYUFBZSxHQUNwQlQsS0FBS1UsWUFBYyxHQUNuQlYsS0FBS0csU0FBVyxLQUNoQkgsS0FBS0ksWUFBYyxLQUNuQkosS0FBSzdJLE1BQVEsQ0FDWHdKLFVBQVUsRUFDVkMsbUJBQW1CLEVBQ25CQyxnQkFBaUIsS0FDakJDLFVBQVUsRUFDVnpJLE1BQU9uTCxPQUFPdUwsWUFFaEJ1SCxLQUFLZSxlQUFpQixFQUN0QmYsS0FBS2dCLFFBQVUsQ0FDYkwsU0FBVSxVQUNWTSxXQUFZLFlBQ1pDLFlBQWEsY0FDYkMsT0FBUSxnQkFHTm5CLEtBQUtGLFlBRVBFLEtBQUtvQixpQkFDTHBCLEtBQUtxQixxQkFDTHBULFNBQVN3TSxpQkFBaUIsVUFBVyxTQUFVNkcsR0FHakMsV0FGRkEsRUFBTS9MLEtBR2R3SyxFQUFNd0IsZUEwSGQsT0FuSEE3QixFQUFhRyxFQUFRLENBQUMsQ0FDcEJ0SyxJQUFLLGlCQUNMQyxNQUFPLFdBQ0wsSUFBSWdNLEVBQVN4QixLQUViQSxLQUFLRyxTQUFXSCxLQUFLRixVQUFVRyxjQUFjRCxLQUFLRSxNQUFNQyxVQUN4REgsS0FBS0ksWUFBY0osS0FBS0YsVUFBVUcsY0FBY0QsS0FBS0UsTUFBTUUsYUFDM0RKLEtBQUtVLFlBQWM3TixNQUFNakcsVUFBVTZVLE1BQU0vQyxLQUFLc0IsS0FBS0YsVUFBVXpMLGlCQUFpQjJMLEtBQUtFLE1BQU1HLGFBQ3pGTCxLQUFLVSxZQUFZaEUsUUFBUSxTQUFVZ0YsR0FDakNsTyxRQUFRbU8sSUFBSSxRQUNaRCxFQUFTakgsaUJBQWlCLFFBQVMsV0FDakNqSCxRQUFRbU8sSUFBSSxTQUVrQixJQUExQkgsRUFBT3JLLE1BQU13SixVQUNmbk4sUUFBUW1PLElBQUksTUFFWkgsRUFBT0ksYUFFUHBPLFFBQVFtTyxJQUFJLE1BRVpILEVBQU9ELGlCQUliclUsT0FBT3VOLGlCQUFpQixTQUFVLFdBQzVCdk4sT0FBT3VMLGFBQWUrSSxFQUFPckssTUFBTWtCLE9BQVNtSixFQUFPckssTUFBTXdKLFVBQzNEYSxFQUFPRCxZQUdUQyxFQUFPckssTUFBTWtCLE1BQVFuTCxPQUFPdUwsZUFHL0IsQ0FDRGxELElBQUsscUJBQ0xDLE1BQU8sV0FDTCxJQUFJcU0sRUFBUzdCLEtBRWI5UyxPQUFPdU4saUJBQWlCLFNBQVUsV0FDaEMsSUFBSXFILEVBQVc1VSxPQUFPNlUsWUFBY0YsRUFBT2QsZUFFM0NjLEVBQU8xQixTQUFTNkIsVUFBVXBHLE9BQU9pRyxFQUFPYixRQUFRQyxXQUFZYSxPQUcvRCxDQUNEdk0sSUFBSyxjQUNMQyxNQUFPLFdBQ0wsSUFBSXlNLEVBQVNqQyxLQUVibk4sTUFBTWpHLFVBQVU2VSxNQUFNL0MsS0FBS3NCLEtBQUtGLFVBQVV6TCxpQkFBaUIyTCxLQUFLRSxNQUFNSSxXQUFXNUQsUUFBUSxTQUFVd0YsR0FDakdELEVBQU94QixhQUFhdE8sS0FBSyxDQUN2QjJOLFVBQVdvQyxFQUNYQyxLQUFNRCxFQUFRakMsY0FBY2dDLEVBQU8vQixNQUFNTSxhQUN6QzVFLE9BQVFzRyxFQUFRakMsY0FBY2dDLEVBQU8vQixNQUFNSyxtQkFHL0NQLEtBQUtTLGFBQWEvRCxRQUFRLFNBQVU5TSxHQUNsQ0EsRUFBS2dNLE9BQU9uQixpQkFBaUIsUUFBUyxTQUFVMkgsR0FDOUNILEVBQU9JLGNBQWN6UyxPQUd6QjNCLFNBQVN3TSxpQkFBaUIsUUFBUyxTQUFVMkgsR0FFckNILEVBQU85SyxNQUFNMEosaUJBQW1CdUIsRUFBSXJVLFNBQVdrVSxFQUFPOUssTUFBTTBKLGdCQUFnQmYsWUFBY21DLEVBQU85SyxNQUFNMEosZ0JBQWdCZixVQUFVd0MsU0FBU0YsRUFBSXJVLFNBQ2xKa1UsRUFBT00sc0JBSVosQ0FDRGhOLElBQUssWUFDTEMsTUFBTyxXQUNMLE9BQU93SyxLQUFLRyxTQUFXSCxLQUFLRyxTQUFTbkwsYUFBZSxJQUVyRCxDQUNETyxJQUFLLGVBQ0xDLE1BQU8sU0FBc0JnTixHQUMzQnhDLEtBQUs3SSxNQUFNMkosU0FBVzBCLEVBQ3RCeEMsS0FBS0csU0FBUzZCLFVBQVVwRyxPQUFPb0UsS0FBS2dCLFFBQVFHLE9BQVFuQixLQUFLN0ksTUFBTTJKLFlBRWhFLENBQ0R2TCxJQUFLLGdCQUNMQyxNQUFPLFNBQXVCaU4sR0FDdEJ6QyxLQUFLN0ksTUFBTTBKLGlCQUNmYixLQUFLN0ksTUFBTTBKLGdCQUFnQnNCLEtBQUtILFVBQVVVLE9BQU8xQyxLQUFLZ0IsUUFBUUUsYUFHaEV1QixFQUFXTixLQUFLSCxVQUFVVyxJQUFJM0MsS0FBS2dCLFFBQVFFLGFBQzNDbEIsS0FBSzdJLE1BQU0wSixnQkFoTWpCLFNBQXdCOVMsR0FDdEIsSUFBSyxJQUFJc0YsRUFBSSxFQUFHQSxFQUFJYyxVQUFVekYsT0FBUTJFLElBQUssQ0FDekMsSUFBSStJLEVBQXlCLE1BQWhCakksVUFBVWQsR0FBYWMsVUFBVWQsR0FBSyxHQUUvQ0EsRUFBSSxFQUNOZ0osRUFBUTlMLE9BQU82TCxJQUFTLEdBQU1NLFFBQVEsU0FBVW5ILEdBQzlDRCxFQUFnQnZILEVBQVF3SCxFQUFLNkcsRUFBTzdHLE1BRTdCaEYsT0FBT3FTLDBCQUNoQnJTLE9BQU9zUyxpQkFBaUI5VSxFQUFRd0MsT0FBT3FTLDBCQUEwQnhHLElBRWpFQyxFQUFROUwsT0FBTzZMLElBQVNNLFFBQVEsU0FBVW5ILEdBQ3hDaEYsT0FBT2tGLGVBQWUxSCxFQUFRd0gsRUFBS2hGLE9BQU9rTSx5QkFBeUJMLEVBQVE3RyxNQUtqRixPQUFPeEgsRUErSzBCK1UsQ0FBZSxHQUFJTCxLQUVqRCxDQUNEbE4sSUFBSyxrQkFDTEMsTUFBTyxXQUNDd0ssS0FBSzdJLE1BQU0wSixrQkFDZmIsS0FBSzdJLE1BQU0wSixnQkFBZ0JzQixLQUFLSCxVQUFVVSxPQUFPMUMsS0FBS2dCLFFBQVFFLGFBQzlEbEIsS0FBSzdJLE1BQU0wSixnQkFBa0IsUUFHaEMsQ0FDRHRMLElBQUssWUFDTEMsTUFBTyxXQUNMd0ssS0FBSzdJLE1BQU13SixVQUFXLEVBQ3RCWCxLQUFLRyxTQUFTNkIsVUFBVVUsT0FBTzFDLEtBQUtnQixRQUFRTCxVQUM1Q1gsS0FBS0ksWUFBWTRCLFVBQVVVLE9BQU8xQyxLQUFLZ0IsUUFBUUwsVUFDL0NYLEtBQUt1QyxrQkFDTFEsSUFBSTNMLE9BQU80TCxPQUFPaEQsS0FBS0ksZUFFeEIsQ0FDRDdLLElBQUssV0FDTEMsTUFBTyxXQUNMd0ssS0FBSzdJLE1BQU13SixVQUFXLEVBQ3RCWCxLQUFLRyxTQUFTNkIsVUFBVVcsSUFBSTNDLEtBQUtnQixRQUFRTCxVQUN6Q1gsS0FBS0ksWUFBWTRCLFVBQVVXLElBQUkzQyxLQUFLZ0IsUUFBUUwsVUFDNUNvQyxJQUFJM0wsT0FBTzZMLFFBQVFqRCxLQUFLSSxpQkFJckJQLEVBcEtpQixHQXVLdEJxRCxFQUF1QixXQUN6QixTQUFTQSxFQUFRcEQsR0FDZixJQUFJQyxFQUFRQyxLQUVaYixFQUFnQmEsS0FBTWtELEdBRXRCbEQsS0FBS0YsVUFBWUEsRUFDakJFLEtBQUttRCxXQUFhbkQsS0FBS0YsVUFBVUcsY0FBYyxtQkFDL0NELEtBQUtvRCxjQUFnQnBELEtBQUtGLFVBQVVHLGNBQWMsc0JBQ2xERCxLQUFLcUQsV0FBYXJELEtBQUttRCxXQUFXRyxRQUFRSixRQUMxQ2xELEtBQUttRCxXQUFXMUksaUJBQWlCLFFBQVMsU0FBVTJILEdBQ2xEckMsRUFBTXdELG9CQW1CVixPQWZBN0QsRUFBYXdELEVBQVMsQ0FBQyxDQUNyQjNOLElBQUssa0JBQ0xDLE1BQU8sV0FDTCxJQUFJZ00sRUFBU3hCLEtBRWJ3RCxNQUFNeEQsS0FBS3FELFlBQVlJLEtBQUssU0FBVUMsR0FDcEMsT0FBT0EsRUFBU0MsU0FDZkYsS0FBSyxTQUFVRyxHQUNaQSxJQUNGcEMsRUFBTzRCLGNBQWM5VCxVQUFZc1UsRUFBS0MsTUFBUUQsRUFBS3JRLGVBTXBEMlAsRUE5QmtCLEdBaUN2QlksRUFBMEIsV0FDNUIsU0FBU0EsRUFBV2hFLEdBQ2xCLElBQUlDLEVBQVFDLEtBRVpiLEVBQWdCYSxLQUFNOEQsR0FFdEI5RCxLQUFLRixVQUFZQSxFQUNqQkUsS0FBSytELEtBQU8vRCxLQUFLRixVQUFVRyxjQUFjLFFBQ3pDRCxLQUFLZ0UsWUFBY2hFLEtBQUtGLFVBQVVHLGNBQWMsd0JBQ2hERCxLQUFLaUUsT0FBU2pFLEtBQUtGLFVBQVVHLGNBQWMsd0JBQzNDRCxLQUFLa0UsZ0JBQWtCLENBQ3JCQyxTQUFVLENBQ1J6VCxLQUFNLFNBQWMwVCxHQUNsQixPQUFpQyxHQUExQkEsRUFBSUMsTUFBTTdPLE1BQU05RyxRQUV6QitFLE1BQU8sV0FDTCxNQUFPLDhCQUdYNlEsTUFBTyxDQUNMNVQsS0FBTSxTQUFjMFQsR0FFbEIsTUFEWSw0Q0FDQzFULEtBQUswVCxFQUFJQyxNQUFNN08sUUFBcUMsSUFBM0I0TyxFQUFJQyxNQUFNN08sTUFBTTlHLFFBRXhEK0UsTUFBTyxXQUNMLE1BQU8sK0JBR1g4USxNQUFPLENBQ0w3VCxLQUFNLFNBQWMwVCxHQUVsQixNQURZLCtCQUNDMVQsS0FBSzBULEVBQUlDLE1BQU03TyxRQUFxQyxJQUEzQjRPLEVBQUlDLE1BQU03TyxNQUFNOUcsUUFFeEQrRSxNQUFPLFdBQ0wsTUFBTyxzQ0FHWCtRLFFBQVMsQ0FDUDlULEtBQU0sU0FBYzBULEdBQ2xCLE9BQWdDLEVBQXpCQSxFQUFJQyxNQUFNN08sTUFBTTlHLFFBRXpCK0UsTUFBTyxXQUNMLE1BQU8saUNBR1hrSyxLQUFNLENBQ0pqTixLQUFNLFNBQWMwVCxHQUlsQixPQUFnQyxFQUF6QkEsRUFBSUMsTUFBTTdPLE1BQU05RyxRQUFjMFYsRUFBSUMsTUFBTTdPLE1BQU05RyxPQUFTLElBRWhFK0UsTUFBTyxTQUFlZ1IsR0FDcEIsTUFBTyx3QkFBd0IvUSxPQUFPK1EsS0FHMUNsUixRQUFTLENBQ1A3QyxLQUFNLFNBQWMwVCxHQUNsQixPQUFnQyxFQUF6QkEsRUFBSUMsTUFBTTdPLE1BQU05RyxRQUV6QitFLE1BQU8sV0FDTCxNQUFPLGlDQUdYaVIsUUFBUyxDQUNQaFUsS0FBTSxTQUFjMFQsR0FDbEIsT0FBNkIsSUFBdEJBLEVBQUlDLE1BQU1NLFNBRW5CbFIsTUFBTyxXQUNMLE1BQU8seUJBR1htUixTQUFVLENBQ1JsVSxLQUFNLFNBQWMwVCxHQUtsQixPQUE2QixFQUpWckUsRUFBTThFLFdBQVc1TCxPQUFPLFNBQVU2TCxHQUNuRCxPQUFPQSxFQUFLbkgsT0FBU3lHLEVBQUlDLE1BQU0xRyxPQUErQixJQUF2Qm1ILEVBQUtULE1BQU1NLFVBR2hDalcsUUFFdEIrRSxNQUFPLFdBQ0wsTUFBTyxnQ0FHWHNSLE9BQVEsQ0FDTnJVLEtBQU0sU0FBYzBULEdBQ2xCLE9BQWlDLEVBQTFCQSxFQUFJQyxNQUFNVyxlQUVuQnZSLE1BQU8sV0FDTCxNQUFPLGlDQUlidU0sS0FBSzZFLFdBQWFoUyxNQUFNakcsVUFBVTZVLE1BQU0vQyxLQUFLb0IsRUFBVXpMLGlCQUFpQixvQkFBb0IxRSxJQUFJLFNBQVU4VSxHQUN4RyxJQUFJUSxFQUFVUixFQUFNUyxRQUFRLGdCQUM1QixNQUFPLENBQ0xDLEtBQU1GLEVBQ05aLE1BQU9JLEVBQ1A5RyxLQUFNOEcsRUFBTTlHLEtBQ1puSSxNQUFPaVAsRUFBTWpQLE1BQ2I0UCxLQUFNWCxFQUFNVyxLQUNaVCxRQUFTRixFQUFNRSxRQUNmcFIsUUFBUzBSLEVBQVFoRixjQUFjLHdCQUMvQm9GLE1BQU9aLEVBQU1yVyxhQUFhLGlCQUFtQnFXLEVBQU1uQixRQUFRN1IsU0FBU0csTUFBTSxLQUFPLEdBQ2pGMFQsYUFBY2IsRUFBTXJXLGFBQWEsb0JBQXNCcVcsRUFBTW5CLFFBQVFpQyxXQUFhZCxFQUFNOUcsS0FDeEY2SCxRQUFTLFFBR2J4RixLQUFLNkUsV0FBV25JLFFBQVEsU0FBVTlNLEdBQzVCQSxFQUFLeVYsTUFBTTNXLFNBQ2JrQixFQUFLeVUsTUFBTTVKLGlCQUFpQixPQUFRLFdBQ2xDc0YsRUFBTTBGLGNBQWM3VixLQUV0QkEsRUFBS3lVLE1BQU01SixpQkFBaUIsUUFBUyxXQUNuQ3NGLEVBQU0wRixjQUFjN1YsUUFJMUJvUSxLQUFLK0QsS0FBS3RKLGlCQUFpQixTQUFVLFNBQVU2RyxHQUM3Q0EsRUFBTS9GLGlCQUVGd0UsRUFBTTJGLGlCQUNSM0YsRUFBTTRGLGtCQUVONUYsRUFBTTZGLGdCQUdWNUYsS0FBS2lFLE9BQU94SixpQkFBaUIsUUFBUyxXQUNwQ3NGLEVBQU04RSxXQUFXbkksUUFBUSxTQUFVK0gsR0FDakNBLEVBQU1sUixRQUFRakUsVUFBWSxHQUMxQm1WLEVBQU1VLEtBQUtuRCxVQUFVVSxPQUFPLGtCQW1IbEMsT0E5R0FoRCxFQUFhb0UsRUFBWSxDQUFDLENBQ3hCdk8sSUFBSyxlQUNMQyxNQUFPLFdBQ0wsSUFBSWdNLEVBQVN4QixLQUVUNkYsR0FBYyxFQUlsQixPQUhBN0YsS0FBSzZFLFdBQVduSSxRQUFRLFNBQVUrSCxHQUNoQ29CLElBQWNyRSxFQUFPaUUsY0FBY2hCLElBQVNvQixJQUV2Q0EsSUFFUixDQUNEdFEsSUFBSyxnQkFDTEMsTUFBTyxTQUF1QmlQLEdBQzVCLElBQUk1QyxFQUFTN0IsS0FlYixPQWJBeUUsRUFBTWUsU0FBVSxFQUNoQmYsRUFBTVksTUFBTTNJLFFBQVEsU0FBVW9KLEdBQ3hCakUsRUFBT3FDLGdCQUFnQnpGLGVBQWVxSCxLQUFVakUsRUFBT3FDLGdCQUFnQjRCLEdBQU1wVixLQUFLK1QsS0FDcEZBLEVBQU1lLFNBQVUsRUFFaEIzRCxFQUFPa0UsVUFBVXRCLEVBQU81QyxFQUFPcUMsZ0JBQWdCNEIsR0FBTXJTLE1BQU1nUixFQUFNYSxrQkFJakViLEVBQU1lLFNBQ1J4RixLQUFLZ0csVUFBVXZCLEdBR1ZBLEVBQU1lLFVBRWQsQ0FDRGpRLElBQUssYUFDTEMsTUFBTyxXQUNMLElBQUl5TSxFQUFTakMsS0FFVGlHLEVBQVksR0FDaEJqRyxLQUFLNkUsV0FBV25JLFFBQVEsU0FBVTlNLEdBQ2hDLEdBQWtCLFVBQWRBLEVBQUt3VixNQUFrQyxhQUFkeFYsRUFBS3dWLE1BQ2hDLElBQTJCLElBQXZCeFYsRUFBS3lVLE1BQU1NLFFBQWtCLENBQy9CLElBQUl1QixFQUFpQkQsRUFBVUUsS0FBSyxTQUFVOVMsR0FDNUMsT0FBT0EsRUFBRXNLLE9BQVMvTixFQUFLK04sWUFHSyxJQUFuQnVJLEVBQ1RELEVBQVU5VCxLQUFLLENBQ2J3TCxLQUFNL04sRUFBSytOLEtBQ1huSSxNQUFPNUYsRUFBS3lVLE1BQU03TyxNQUNsQjRQLEtBQU14VixFQUFLd1YsT0FHYmMsRUFBZTFRLE9BQVM1RixFQUFLeVUsTUFBTTdPLFdBR1QsS0FBckI1RixFQUFLeVUsTUFBTTdPLE9BQ3BCeVEsRUFBVTlULEtBQUssQ0FDYndMLEtBQU0vTixFQUFLK04sS0FDWG5JLE1BQU81RixFQUFLeVUsTUFBTTdPLFVBSXhCLElBQ0k0USxFQUFXSCxFQUFVRSxLQUFLLFNBQVV2VyxHQUN0QyxNQUZnQixTQUVUQSxFQUFLK04sWUFHVSxJQUFieUksRUFDVEgsRUFBVTlULEtBQUssQ0FDYndMLEtBQU0sR0FDTm5JLE1BQU8sOEJBR1Q0USxFQUFTNVEsTUFBUSxxQkFJRnlRLEVBQVVoTixPQUFPLFNBQVVySixHQUMxQyxNQUZlLFlBRVJBLEVBQUsrTixPQUVIakIsUUFBUSxTQUFVOU0sR0FDSixFQUFuQkEsRUFBSytOLEtBQUtqUCxPQUNadVQsRUFBTytCLFlBQVkxVSxXQUFhLGVBQWVvRSxPQUFPOUQsRUFBSytOLEtBQU0sYUFBZSxLQUFPLEdBQUdqSyxPQUFPOUQsRUFBSzRGLE1BQU8sU0FFN0d5TSxFQUFPK0IsWUFBWTFVLFdBQWEsT0FBT29FLE9BQU85RCxFQUFLNEYsTUFBTyxhQUkvRCxDQUNERCxJQUFLLGtCQUNMQyxNQUFPLFdBQ0R3SyxLQUFLRixVQUFVa0MsVUFBVXBHLE9BQU8sb0JBQ2xDb0UsS0FBS0YsVUFBVXVHLGVBQWUsQ0FDNUJDLE1BQU8sYUFJWixDQUNEL1EsSUFBSyxZQUNMQyxNQUFPLFNBQW1CaVAsRUFBT2xSLEdBQy9Ca1IsRUFBTWxSLFFBQVFqRSxVQUFZaUUsRUFDMUJrUixFQUFNVSxLQUFLbkQsVUFBVVcsSUFBSSxnQkFFMUIsQ0FDRHBOLElBQUssWUFDTEMsTUFBTyxTQUFtQmlQLEdBQ3hCQSxFQUFNbFIsUUFBUWpFLFVBQVksR0FDMUJtVixFQUFNVSxLQUFLbkQsVUFBVVUsT0FBTyxrQkFJekJvQixFQXJQcUIsR0F3UDFCeUMsRUFBd0IsV0FDMUIsU0FBU0EsRUFBU0MsR0FDaEIsSUFBSXpHLEVBQVFDLEtBRVpiLEVBQWdCYSxLQUFNdUcsR0FFdEJ2RyxLQUFLeUcsYUFBZUQsR0FBWSxLQUNoQ3hHLEtBQUswRyxZQUFjLEVBQ25CMUcsS0FBSzJHLGNBQWdCLEVBRWpCM0csS0FBS3lHLGVBQ1B6RyxLQUFLNEcsY0FBZ0I1RyxLQUFLeUcsYUFBYW5ELFFBQVFzRCxjQUMvQzVHLEtBQUs2RyxXQUFhN0csS0FBS3lHLGFBQWFuRCxRQUFRdUQsV0FDNUM3RyxLQUFLOEcsWUFBYzlHLEtBQUt5RyxhQUFhbkQsUUFBUXlELFNBQzdDL0csS0FBS2dILGtCQUFvQmhILEtBQUt5RyxhQUFhbkQsUUFBUTBELGtCQUNuRGhILEtBQUtpSCxpQkFBbUJoWixTQUFTNkIsZUFBZWtRLEtBQUtnSCxtQkFDckRoSCxLQUFLMkcsY0FBZ0IzRyxLQUFLaUgsaUJBQWlCQyxrQkFDM0NsSCxLQUFLeUcsYUFBYWhNLGlCQUFpQixRQUFTLFNBQVUySCxHQUNwRHJDLEVBQU1vSCxpQkE4RFosT0F6REF6SCxFQUFhNkcsRUFBVSxDQUFDLENBQ3RCaFIsSUFBSyxjQUNMQyxNQUFPLFdBQ0wsSUFBSWdNLEVBQVN4QixLQUVUb0gsRUFBU3BILEtBQUs4RyxZQUFjLFNBQVc5RyxLQUFLMEcsWUFBYyxlQUFpQjFHLEtBQUs2RyxXQUFhLGtCQUFvQjdHLEtBQUs0RyxjQUMxSDVHLEtBQUswRyxjQUNMbEQsTUFBTTRELEdBQVEzRCxLQUFLLFNBQVVDLEdBQzNCLE9BQU9BLEVBQVNDLFNBQ2ZGLEtBQUssU0FBVTRELEdBQ2hCN1QsUUFBUW1PLElBQUkwRixHQUVaN0YsRUFBTzhGLFlBQVlELEVBQWFFLE1BRTVCRixFQUFhRyxhQUNmaEcsRUFBT2lGLGFBQWF0TyxNQUFNc1AsUUFBVSxVQUU5QixNQUFFLFNBQVVoVSxHQUNwQkQsUUFBUW1PLElBQUlsTyxPQUdmLENBQ0Q4QixJQUFLLGNBQ0xDLE1BQU8sU0FBcUJrUyxHQUMxQixHQUFJMUgsS0FBS2lILGlCQUFrQixDQUN6QmpILEtBQUtpSCxpQkFBaUIzWCxXQUFhb1ksRUFDbkMsSUFBSUMsRUFBbUIzSCxLQUFLaUgsaUJBQWlCQyxrQkFDekNVLEVBQWtCRCxFQUFtQjNILEtBQUsyRyxjQUM5QzNHLEtBQUs2SCxTQUFTN0gsS0FBS2lILGlCQUFrQlcsR0FDckMsSUFBSUUsRUFBZ0I5SCxLQUFLaUgsaUJBQWlCYyxTQUFTL0gsS0FBSzJHLGVBRXBEbUIsRUFBYzdILGNBQWMsTUFDOUI2SCxFQUFjN0gsY0FBYyxLQUFLK0gsUUFHbkNoSSxLQUFLMkcsY0FBZ0JnQixFQUNyQixJQUFJOVMsRUFBWTNILE9BQU82VSxhQUFlOVQsU0FBU3NLLGdCQUFnQjFELFdBQWE1RyxTQUFTb0IsS0FBS3dGLFVBQzFGM0gsT0FBT2tLLE9BQU8sQ0FDWjZRLEtBQU0sRUFDTnhYLElBQUtxWCxFQUFjSSx3QkFBd0J6WCxJQUFNb0UsT0FJdEQsQ0FDRFUsSUFBSyxXQUNMQyxNQUFPLFNBQWtCM0gsRUFBUXNhLEdBQy9CLElBQUlDLEVBQXFCbmEsU0FBU29hLGNBQWMsUUFDaERELEVBQW1CcEcsVUFBVVcsSUFBSSxtQkFDakN5RixFQUFtQjlaLGFBQWEsT0FBUSxTQUN4QzhaLEVBQW1CRSxVQUFZSCxFQUFRLGdCQUN2Q3RhLEVBQU8wYSxzQkFBc0IsY0FBZUgsR0FDNUNwWCxXQUFXLFdBQ1RvWCxFQUFtQjFGLFVBQ2xCLFNBSUE2RCxFQWhGbUIsR0FtRjVCN1ksSUFDQVIsT0FBTzZWLElBQU0sQ0FDWHlGLE9BQVEsS0FDUnBSLE9BQVEsQ0FDTjZMLFFBQVNsRSxFQUFhakosa0JBQ3RCa04sT0FBUWpFLEVBQWFoSixrQkFFdkIwUyxTQUFVLFdBQ1IsSUFBSyxJQUFJQyxFQUFPdlUsVUFBVXpGLE9BQVFpYSxFQUFPLElBQUk5VixNQUFNNlYsR0FBT0UsRUFBTyxFQUFHQSxFQUFPRixFQUFNRSxJQUMvRUQsRUFBS0MsR0FBUXpVLFVBQVV5VSxHQUd6QkQsRUFBS2pNLFFBQVEsU0FBVTlNLEdBQ3JCQSxFQUFLdEIsYUFBYSxTQUFTLE1BRy9CdWEsWUFBYSxXQUNYLElBQUssSUFBSUMsRUFBUTNVLFVBQVV6RixPQUFRaWEsRUFBTyxJQUFJOVYsTUFBTWlXLEdBQVFDLEVBQVEsRUFBR0EsRUFBUUQsRUFBT0MsSUFDcEZKLEVBQUtJLEdBQVM1VSxVQUFVNFUsR0FHMUJKLEVBQUtqTSxRQUFRLFNBQVU5TSxHQUNyQkEsRUFBS29KLGdCQUFnQixZQUd6QmdRLFdBQVksU0FBb0JDLEVBQVFoVixHQUNoQ0EsRUFDU3BCLE1BQU1qRyxVQUFVNlUsTUFBTS9DLEtBQUt6USxTQUFTb0csaUJBQWlCSixJQUMzRHlJLFFBQVEsU0FBVTRKLEdBQ3ZCLElBQUkyQyxFQUFPM0MsS0FHYixJQUFJMkMsR0FHUkMsS0FBTSxXQUNKaGMsT0FBTzZWLElBQUl5RixPQUFTLElBQUkzSSxFQUFPLGNBQy9CM1MsT0FBTzZWLElBQUlpRyxXQUFXbEYsRUFBWSxnQkFDbEM1VyxPQUFPNlYsSUFBSWlHLFdBQVd6QyxFQUFVLGlCQUNoQ3hELElBQUlpRyxXQUFXOUYsRUFBUyxrQkFHNUJoVyxPQUFPdU4saUJBQWlCLG1CQUFvQnNJLElBQUltRyIsImZpbGUiOiJzY3JpcHRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZSgnc2NyaXB0cycsIGZhY3RvcnkpIDogZmFjdG9yeSgpO1xufSkoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIGNvbW1vbmpzR2xvYmFsID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDoge307XG5cbiAgZnVuY3Rpb24gdW53cmFwRXhwb3J0cyh4KSB7XG4gICAgcmV0dXJuIHggJiYgeC5fX2VzTW9kdWxlICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh4LCAnZGVmYXVsdCcpID8geFsnZGVmYXVsdCddIDogeDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZuLCBtb2R1bGUpIHtcbiAgICByZXR1cm4gbW9kdWxlID0ge1xuICAgICAgZXhwb3J0czoge31cbiAgICB9LCBmbihtb2R1bGUsIG1vZHVsZS5leHBvcnRzKSwgbW9kdWxlLmV4cG9ydHM7XG4gIH1cblxuICB2YXIgc3ZnNGV2ZXJ5Ym9keSA9IGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZ1bmN0aW9uIChtb2R1bGUpIHtcbiAgICAhZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgICAgIG1vZHVsZS5leHBvcnRzID8gLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0XG4gICAgICAvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcbiAgICAgIC8vIGxpa2UgTm9kZS5cbiAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDogcm9vdC5zdmc0ZXZlcnlib2R5ID0gZmFjdG9yeSgpO1xuICAgIH0oY29tbW9uanNHbG9iYWwsIGZ1bmN0aW9uICgpIHtcbiAgICAgIC8qISBzdmc0ZXZlcnlib2R5IHYyLjEuOSB8IGdpdGh1Yi5jb20vam9uYXRoYW50bmVhbC9zdmc0ZXZlcnlib2R5ICovXG4gICAgICBmdW5jdGlvbiBlbWJlZChwYXJlbnQsIHN2ZywgdGFyZ2V0KSB7XG4gICAgICAgIC8vIGlmIHRoZSB0YXJnZXQgZXhpc3RzXG4gICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAvLyBjcmVhdGUgYSBkb2N1bWVudCBmcmFnbWVudCB0byBob2xkIHRoZSBjb250ZW50cyBvZiB0aGUgdGFyZ2V0XG4gICAgICAgICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgICAgICAgICAgICB2aWV3Qm94ID0gIXN2Zy5oYXNBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIpICYmIHRhcmdldC5nZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIpOyAvLyBjb25kaXRpb25hbGx5IHNldCB0aGUgdmlld0JveCBvbiB0aGUgc3ZnXG5cbiAgICAgICAgICB2aWV3Qm94ICYmIHN2Zy5zZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIsIHZpZXdCb3gpOyAvLyBjb3B5IHRoZSBjb250ZW50cyBvZiB0aGUgY2xvbmUgaW50byB0aGUgZnJhZ21lbnRcblxuICAgICAgICAgIGZvciAoIC8vIGNsb25lIHRoZSB0YXJnZXRcbiAgICAgICAgICB2YXIgY2xvbmUgPSB0YXJnZXQuY2xvbmVOb2RlKCEwKTsgY2xvbmUuY2hpbGROb2Rlcy5sZW5ndGg7KSB7XG4gICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChjbG9uZS5maXJzdENoaWxkKTtcbiAgICAgICAgICB9IC8vIGFwcGVuZCB0aGUgZnJhZ21lbnQgaW50byB0aGUgc3ZnXG5cblxuICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gbG9hZHJlYWR5c3RhdGVjaGFuZ2UoeGhyKSB7XG4gICAgICAgIC8vIGxpc3RlbiB0byBjaGFuZ2VzIGluIHRoZSByZXF1ZXN0XG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gaWYgdGhlIHJlcXVlc3QgaXMgcmVhZHlcbiAgICAgICAgICBpZiAoNCA9PT0geGhyLnJlYWR5U3RhdGUpIHtcbiAgICAgICAgICAgIC8vIGdldCB0aGUgY2FjaGVkIGh0bWwgZG9jdW1lbnRcbiAgICAgICAgICAgIHZhciBjYWNoZWREb2N1bWVudCA9IHhoci5fY2FjaGVkRG9jdW1lbnQ7IC8vIGVuc3VyZSB0aGUgY2FjaGVkIGh0bWwgZG9jdW1lbnQgYmFzZWQgb24gdGhlIHhociByZXNwb25zZVxuXG4gICAgICAgICAgICBjYWNoZWREb2N1bWVudCB8fCAoY2FjaGVkRG9jdW1lbnQgPSB4aHIuX2NhY2hlZERvY3VtZW50ID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KFwiXCIpLCBjYWNoZWREb2N1bWVudC5ib2R5LmlubmVySFRNTCA9IHhoci5yZXNwb25zZVRleHQsIHhoci5fY2FjaGVkVGFyZ2V0ID0ge30pLCAvLyBjbGVhciB0aGUgeGhyIGVtYmVkcyBsaXN0IGFuZCBlbWJlZCBlYWNoIGl0ZW1cbiAgICAgICAgICAgIHhoci5fZW1iZWRzLnNwbGljZSgwKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBjYWNoZWQgdGFyZ2V0XG4gICAgICAgICAgICAgIHZhciB0YXJnZXQgPSB4aHIuX2NhY2hlZFRhcmdldFtpdGVtLmlkXTsgLy8gZW5zdXJlIHRoZSBjYWNoZWQgdGFyZ2V0XG5cbiAgICAgICAgICAgICAgdGFyZ2V0IHx8ICh0YXJnZXQgPSB4aHIuX2NhY2hlZFRhcmdldFtpdGVtLmlkXSA9IGNhY2hlZERvY3VtZW50LmdldEVsZW1lbnRCeUlkKGl0ZW0uaWQpKSwgLy8gZW1iZWQgdGhlIHRhcmdldCBpbnRvIHRoZSBzdmdcbiAgICAgICAgICAgICAgZW1iZWQoaXRlbS5wYXJlbnQsIGl0ZW0uc3ZnLCB0YXJnZXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCAvLyB0ZXN0IHRoZSByZWFkeSBzdGF0ZSBjaGFuZ2UgaW1tZWRpYXRlbHlcbiAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSgpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzdmc0ZXZlcnlib2R5KHJhd29wdHMpIHtcbiAgICAgICAgZnVuY3Rpb24gb25pbnRlcnZhbCgpIHtcbiAgICAgICAgICAvLyB3aGlsZSB0aGUgaW5kZXggZXhpc3RzIGluIHRoZSBsaXZlIDx1c2U+IGNvbGxlY3Rpb25cbiAgICAgICAgICBmb3IgKCAvLyBnZXQgdGhlIGNhY2hlZCA8dXNlPiBpbmRleFxuICAgICAgICAgIHZhciBpbmRleCA9IDA7IGluZGV4IDwgdXNlcy5sZW5ndGg7KSB7XG4gICAgICAgICAgICAvLyBnZXQgdGhlIGN1cnJlbnQgPHVzZT5cbiAgICAgICAgICAgIHZhciB1c2UgPSB1c2VzW2luZGV4XSxcbiAgICAgICAgICAgICAgICBwYXJlbnQgPSB1c2UucGFyZW50Tm9kZSxcbiAgICAgICAgICAgICAgICBzdmcgPSBnZXRTVkdBbmNlc3RvcihwYXJlbnQpLFxuICAgICAgICAgICAgICAgIHNyYyA9IHVzZS5nZXRBdHRyaWJ1dGUoXCJ4bGluazpocmVmXCIpIHx8IHVzZS5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpO1xuXG4gICAgICAgICAgICBpZiAoIXNyYyAmJiBvcHRzLmF0dHJpYnV0ZU5hbWUgJiYgKHNyYyA9IHVzZS5nZXRBdHRyaWJ1dGUob3B0cy5hdHRyaWJ1dGVOYW1lKSksIHN2ZyAmJiBzcmMpIHtcbiAgICAgICAgICAgICAgaWYgKHBvbHlmaWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvcHRzLnZhbGlkYXRlIHx8IG9wdHMudmFsaWRhdGUoc3JjLCBzdmcsIHVzZSkpIHtcbiAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgPHVzZT4gZWxlbWVudFxuICAgICAgICAgICAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKHVzZSk7IC8vIHBhcnNlIHRoZSBzcmMgYW5kIGdldCB0aGUgdXJsIGFuZCBpZFxuXG4gICAgICAgICAgICAgICAgICB2YXIgc3JjU3BsaXQgPSBzcmMuc3BsaXQoXCIjXCIpLFxuICAgICAgICAgICAgICAgICAgICAgIHVybCA9IHNyY1NwbGl0LnNoaWZ0KCksXG4gICAgICAgICAgICAgICAgICAgICAgaWQgPSBzcmNTcGxpdC5qb2luKFwiI1wiKTsgLy8gaWYgdGhlIGxpbmsgaXMgZXh0ZXJuYWxcblxuICAgICAgICAgICAgICAgICAgaWYgKHVybC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBjYWNoZWQgeGhyIHJlcXVlc3RcbiAgICAgICAgICAgICAgICAgICAgdmFyIHhociA9IHJlcXVlc3RzW3VybF07IC8vIGVuc3VyZSB0aGUgeGhyIHJlcXVlc3QgZXhpc3RzXG5cbiAgICAgICAgICAgICAgICAgICAgeGhyIHx8ICh4aHIgPSByZXF1ZXN0c1t1cmxdID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksIHhoci5vcGVuKFwiR0VUXCIsIHVybCksIHhoci5zZW5kKCksIHhoci5fZW1iZWRzID0gW10pLCAvLyBhZGQgdGhlIHN2ZyBhbmQgaWQgYXMgYW4gaXRlbSB0byB0aGUgeGhyIGVtYmVkcyBsaXN0XG4gICAgICAgICAgICAgICAgICAgIHhoci5fZW1iZWRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgIHBhcmVudDogcGFyZW50LFxuICAgICAgICAgICAgICAgICAgICAgIHN2Zzogc3ZnLFxuICAgICAgICAgICAgICAgICAgICAgIGlkOiBpZFxuICAgICAgICAgICAgICAgICAgICB9KSwgLy8gcHJlcGFyZSB0aGUgeGhyIHJlYWR5IHN0YXRlIGNoYW5nZSBldmVudFxuICAgICAgICAgICAgICAgICAgICBsb2FkcmVhZHlzdGF0ZWNoYW5nZSh4aHIpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZW1iZWQgdGhlIGxvY2FsIGlkIGludG8gdGhlIHN2Z1xuICAgICAgICAgICAgICAgICAgICBlbWJlZChwYXJlbnQsIHN2ZywgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLy8gaW5jcmVhc2UgdGhlIGluZGV4IHdoZW4gdGhlIHByZXZpb3VzIHZhbHVlIHdhcyBub3QgXCJ2YWxpZFwiXG4gICAgICAgICAgICAgICAgICArK2luZGV4LCArK251bWJlck9mU3ZnVXNlRWxlbWVudHNUb0J5cGFzcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIGluY3JlYXNlIHRoZSBpbmRleCB3aGVuIHRoZSBwcmV2aW91cyB2YWx1ZSB3YXMgbm90IFwidmFsaWRcIlxuICAgICAgICAgICAgICArK2luZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gLy8gY29udGludWUgdGhlIGludGVydmFsXG5cblxuICAgICAgICAgICghdXNlcy5sZW5ndGggfHwgdXNlcy5sZW5ndGggLSBudW1iZXJPZlN2Z1VzZUVsZW1lbnRzVG9CeXBhc3MgPiAwKSAmJiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUob25pbnRlcnZhbCwgNjcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHBvbHlmaWxsLFxuICAgICAgICAgICAgb3B0cyA9IE9iamVjdChyYXdvcHRzKSxcbiAgICAgICAgICAgIG5ld2VySUVVQSA9IC9cXGJUcmlkZW50XFwvWzU2N11cXGJ8XFxiTVNJRSAoPzo5fDEwKVxcLjBcXGIvLFxuICAgICAgICAgICAgd2Via2l0VUEgPSAvXFxiQXBwbGVXZWJLaXRcXC8oXFxkKylcXGIvLFxuICAgICAgICAgICAgb2xkZXJFZGdlVUEgPSAvXFxiRWRnZVxcLzEyXFwuKFxcZCspXFxiLyxcbiAgICAgICAgICAgIGVkZ2VVQSA9IC9cXGJFZGdlXFwvLihcXGQrKVxcYi8sXG4gICAgICAgICAgICBpbklmcmFtZSA9IHdpbmRvdy50b3AgIT09IHdpbmRvdy5zZWxmO1xuICAgICAgICBwb2x5ZmlsbCA9IFwicG9seWZpbGxcIiBpbiBvcHRzID8gb3B0cy5wb2x5ZmlsbCA6IG5ld2VySUVVQS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpIHx8IChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKG9sZGVyRWRnZVVBKSB8fCBbXSlbMV0gPCAxMDU0NyB8fCAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCh3ZWJraXRVQSkgfHwgW10pWzFdIDwgNTM3IHx8IGVkZ2VVQS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmIGluSWZyYW1lOyAvLyBjcmVhdGUgeGhyIHJlcXVlc3RzIG9iamVjdFxuXG4gICAgICAgIHZhciByZXF1ZXN0cyA9IHt9LFxuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCBzZXRUaW1lb3V0LFxuICAgICAgICAgICAgdXNlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidXNlXCIpLFxuICAgICAgICAgICAgbnVtYmVyT2ZTdmdVc2VFbGVtZW50c1RvQnlwYXNzID0gMDsgLy8gY29uZGl0aW9uYWxseSBzdGFydCB0aGUgaW50ZXJ2YWwgaWYgdGhlIHBvbHlmaWxsIGlzIGFjdGl2ZVxuXG4gICAgICAgIHBvbHlmaWxsICYmIG9uaW50ZXJ2YWwoKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZ2V0U1ZHQW5jZXN0b3Iobm9kZSkge1xuICAgICAgICBmb3IgKHZhciBzdmcgPSBub2RlOyBcInN2Z1wiICE9PSBzdmcubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAmJiAoc3ZnID0gc3ZnLnBhcmVudE5vZGUpOykge31cblxuICAgICAgICByZXR1cm4gc3ZnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc3ZnNGV2ZXJ5Ym9keTtcbiAgICB9KTtcbiAgfSk7XG4gIHZhciBzY3JvbGxMb2NrID0gY3JlYXRlQ29tbW9uanNNb2R1bGUoZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykge1xuICAgIChmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG4gICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgICB9KShjb21tb25qc0dsb2JhbCwgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgLyoqKioqKi9cbiAgICAgICAgZnVuY3Rpb24gKG1vZHVsZXMpIHtcbiAgICAgICAgICAvLyB3ZWJwYWNrQm9vdHN0cmFwXG5cbiAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgIC8vIFRoZSBtb2R1bGUgY2FjaGVcblxuICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgdmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbiAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuXG4gICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgIGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbiAgICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblxuICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAgIGlmIChpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuICAgICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgICAgICByZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiAgICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXG4gICAgICAgICAgICAvKioqKioqL1xuXG5cbiAgICAgICAgICAgIHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiAgICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAgICAgaTogbW9kdWxlSWQsXG5cbiAgICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAgICAgbDogZmFsc2UsXG5cbiAgICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAgICAgZXhwb3J0czoge31cbiAgICAgICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgICAvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblxuICAgICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgICAgbW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4gICAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgICAgLy8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuXG4gICAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgICBtb2R1bGUubCA9IHRydWU7XG4gICAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblxuICAgICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICB9XG4gICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgIC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5cbiAgICAgICAgICAvKioqKioqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgIC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG5cbiAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbiAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcblxuICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbiAoZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgICAgaWYgKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiAgICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdldDogZ2V0dGVyXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgIH07XG4gICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuXG4gICAgICAgICAgLyoqKioqKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24gKGV4cG9ydHMpIHtcbiAgICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gICAgICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogJ01vZHVsZSdcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKioqKioqL1xuXG5cbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcbiAgICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICB9O1xuICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgIC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuXG4gICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcblxuICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgLy8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG5cbiAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgIC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuXG4gICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG5cbiAgICAgICAgICAvKioqKioqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbiAodmFsdWUsIG1vZGUpIHtcbiAgICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgICBpZiAobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gICAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgICBpZiAobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAgIGlmIChtb2RlICYgNCAmJiBfdHlwZW9mKHZhbHVlKSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgICAgdmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAgIF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gICAgICAgICAgICAvKioqKioqL1xuXG5cbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7XG4gICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgICBpZiAobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVba2V5XTtcbiAgICAgICAgICAgICAgfS5iaW5kKG51bGwsIGtleSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgICAgcmV0dXJuIG5zO1xuICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICB9O1xuICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgIC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5cbiAgICAgICAgICAvKioqKioqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbiAobW9kdWxlKSB7XG4gICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgICAgdmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddO1xuICAgICAgICAgICAgfSA6XG4gICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG1vZHVsZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gICAgICAgICAgICAvKioqKioqL1xuXG5cbiAgICAgICAgICAgIHJldHVybiBnZXR0ZXI7XG4gICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgIH07XG4gICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgLy8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG5cbiAgICAgICAgICAvKioqKioqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbiAob2JqZWN0LCBwcm9wZXJ0eSkge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgIC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG5cbiAgICAgICAgICAvKioqKioqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcblxuICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICByZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiAgICAgICAgICAvKioqKioqL1xuICAgICAgICB9XG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICAgICAgLyoqKioqKi9cbiAgICAgICAgKFtcbiAgICAgICAgLyogMCAqL1xuXG4gICAgICAgIC8qKiovXG4gICAgICAgIGZ1bmN0aW9uIChtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7IC8vIENPTkNBVEVOQVRFRCBNT0RVTEU6IC4vc3JjL3Rvb2xzLmpzXG5cblxuICAgICAgICAgIHZhciBhcmd1bWVudEFzQXJyYXkgPSBmdW5jdGlvbiBhcmd1bWVudEFzQXJyYXkoYXJndW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGFyZ3VtZW50KSA/IGFyZ3VtZW50IDogW2FyZ3VtZW50XTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIGlzRWxlbWVudCA9IGZ1bmN0aW9uIGlzRWxlbWVudCh0YXJnZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXQgaW5zdGFuY2VvZiBOb2RlO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgaXNFbGVtZW50TGlzdCA9IGZ1bmN0aW9uIGlzRWxlbWVudExpc3Qobm9kZUxpc3QpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlTGlzdCBpbnN0YW5jZW9mIE5vZGVMaXN0O1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgZWFjaE5vZGUgPSBmdW5jdGlvbiBlYWNoTm9kZShub2RlTGlzdCwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGlmIChub2RlTGlzdCAmJiBjYWxsYmFjaykge1xuICAgICAgICAgICAgICBub2RlTGlzdCA9IGlzRWxlbWVudExpc3Qobm9kZUxpc3QpID8gbm9kZUxpc3QgOiBbbm9kZUxpc3RdO1xuXG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZUxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sobm9kZUxpc3RbaV0sIGksIG5vZGVMaXN0Lmxlbmd0aCkgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgdGhyb3dFcnJvciA9IGZ1bmN0aW9uIHRocm93RXJyb3IobWVzc2FnZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJbc2Nyb2xsLWxvY2tdIFwiLmNvbmNhdChtZXNzYWdlKSk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBhcnJheUFzU2VsZWN0b3IgPSBmdW5jdGlvbiBhcnJheUFzU2VsZWN0b3IoYXJyYXkpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycmF5KSkge1xuICAgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBhcnJheS5qb2luKCcsICcpO1xuICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0b3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBub2RlTGlzdEFzQXJyYXkgPSBmdW5jdGlvbiBub2RlTGlzdEFzQXJyYXkobm9kZUxpc3QpIHtcbiAgICAgICAgICAgIHZhciBub2RlcyA9IFtdO1xuICAgICAgICAgICAgZWFjaE5vZGUobm9kZUxpc3QsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBub2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZXM7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBmaW5kUGFyZW50QnlTZWxlY3RvciA9IGZ1bmN0aW9uIGZpbmRQYXJlbnRCeVNlbGVjdG9yKCRlbCwgc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB0cnVlO1xuICAgICAgICAgICAgdmFyICRyb290ID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBkb2N1bWVudDtcblxuICAgICAgICAgICAgaWYgKHNlbGYgJiYgbm9kZUxpc3RBc0FycmF5KCRyb290LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKS5pbmRleE9mKCRlbCkgIT09IC0xKSB7XG4gICAgICAgICAgICAgIHJldHVybiAkZWw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHdoaWxlICgoJGVsID0gJGVsLnBhcmVudEVsZW1lbnQpICYmIG5vZGVMaXN0QXNBcnJheSgkcm9vdC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSkuaW5kZXhPZigkZWwpID09PSAtMSkge31cblxuICAgICAgICAgICAgcmV0dXJuICRlbDtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIGVsZW1lbnRIYXNTZWxlY3RvciA9IGZ1bmN0aW9uIGVsZW1lbnRIYXNTZWxlY3RvcigkZWwsIHNlbGVjdG9yKSB7XG4gICAgICAgICAgICB2YXIgJHJvb3QgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGRvY3VtZW50O1xuICAgICAgICAgICAgdmFyIGhhcyA9IG5vZGVMaXN0QXNBcnJheSgkcm9vdC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSkuaW5kZXhPZigkZWwpICE9PSAtMTtcbiAgICAgICAgICAgIHJldHVybiBoYXM7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBlbGVtZW50SGFzT3ZlcmZsb3dIaWRkZW4gPSBmdW5jdGlvbiBlbGVtZW50SGFzT3ZlcmZsb3dIaWRkZW4oJGVsKSB7XG4gICAgICAgICAgICBpZiAoJGVsKSB7XG4gICAgICAgICAgICAgIHZhciBjb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZSgkZWwpO1xuICAgICAgICAgICAgICB2YXIgb3ZlcmZsb3dJc0hpZGRlbiA9IGNvbXB1dGVkU3R5bGUub3ZlcmZsb3cgPT09ICdoaWRkZW4nO1xuICAgICAgICAgICAgICByZXR1cm4gb3ZlcmZsb3dJc0hpZGRlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIGVsZW1lbnRTY3JvbGxUb3BPblN0YXJ0ID0gZnVuY3Rpb24gZWxlbWVudFNjcm9sbFRvcE9uU3RhcnQoJGVsKSB7XG4gICAgICAgICAgICBpZiAoJGVsKSB7XG4gICAgICAgICAgICAgIGlmIChlbGVtZW50SGFzT3ZlcmZsb3dIaWRkZW4oJGVsKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdmFyIHNjcm9sbFRvcCA9ICRlbC5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgIHJldHVybiBzY3JvbGxUb3AgPD0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIGVsZW1lbnRTY3JvbGxUb3BPbkVuZCA9IGZ1bmN0aW9uIGVsZW1lbnRTY3JvbGxUb3BPbkVuZCgkZWwpIHtcbiAgICAgICAgICAgIGlmICgkZWwpIHtcbiAgICAgICAgICAgICAgaWYgKGVsZW1lbnRIYXNPdmVyZmxvd0hpZGRlbigkZWwpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gJGVsLnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgdmFyIHNjcm9sbEhlaWdodCA9ICRlbC5zY3JvbGxIZWlnaHQ7XG4gICAgICAgICAgICAgIHZhciBzY3JvbGxUb3BXaXRoSGVpZ2h0ID0gc2Nyb2xsVG9wICsgJGVsLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbFRvcFdpdGhIZWlnaHQgPj0gc2Nyb2xsSGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgZWxlbWVudFNjcm9sbExlZnRPblN0YXJ0ID0gZnVuY3Rpb24gZWxlbWVudFNjcm9sbExlZnRPblN0YXJ0KCRlbCkge1xuICAgICAgICAgICAgaWYgKCRlbCkge1xuICAgICAgICAgICAgICBpZiAoZWxlbWVudEhhc092ZXJmbG93SGlkZGVuKCRlbCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHZhciBzY3JvbGxMZWZ0ID0gJGVsLnNjcm9sbExlZnQ7XG4gICAgICAgICAgICAgIHJldHVybiBzY3JvbGxMZWZ0IDw9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBlbGVtZW50U2Nyb2xsTGVmdE9uRW5kID0gZnVuY3Rpb24gZWxlbWVudFNjcm9sbExlZnRPbkVuZCgkZWwpIHtcbiAgICAgICAgICAgIGlmICgkZWwpIHtcbiAgICAgICAgICAgICAgaWYgKGVsZW1lbnRIYXNPdmVyZmxvd0hpZGRlbigkZWwpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB2YXIgc2Nyb2xsTGVmdCA9ICRlbC5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICB2YXIgc2Nyb2xsV2lkdGggPSAkZWwuc2Nyb2xsV2lkdGg7XG4gICAgICAgICAgICAgIHZhciBzY3JvbGxMZWZ0V2l0aFdpZHRoID0gc2Nyb2xsTGVmdCArICRlbC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbExlZnRXaXRoV2lkdGggPj0gc2Nyb2xsV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBlbGVtZW50SXNTY3JvbGxhYmxlRmllbGQgPSBmdW5jdGlvbiBlbGVtZW50SXNTY3JvbGxhYmxlRmllbGQoJGVsKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSAndGV4dGFyZWEsIFtjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCJdJztcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50SGFzU2VsZWN0b3IoJGVsLCBzZWxlY3Rvcik7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBlbGVtZW50SXNJbnB1dFJhbmdlID0gZnVuY3Rpb24gZWxlbWVudElzSW5wdXRSYW5nZSgkZWwpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3RvciA9ICdpbnB1dFt0eXBlPVwicmFuZ2VcIl0nO1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRIYXNTZWxlY3RvcigkZWwsIHNlbGVjdG9yKTtcbiAgICAgICAgICB9OyAvLyBDT05DQVRFTkFURUQgTU9EVUxFOiAuL3NyYy9zY3JvbGwtbG9jay5qc1xuXG4gICAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovXG5cblxuICAgICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImRpc2FibGVQYWdlU2Nyb2xsXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBkaXNhYmxlUGFnZVNjcm9sbDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZW5hYmxlUGFnZVNjcm9sbFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZW5hYmxlUGFnZVNjcm9sbDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZ2V0U2Nyb2xsU3RhdGVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldFNjcm9sbFN0YXRlO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJjbGVhclF1ZXVlU2Nyb2xsTG9ja3NcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNsZWFyUXVldWVTY3JvbGxMb2NrcztcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZ2V0VGFyZ2V0U2Nyb2xsQmFyV2lkdGhcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNjcm9sbF9sb2NrX2dldFRhcmdldFNjcm9sbEJhcldpZHRoO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJnZXRDdXJyZW50VGFyZ2V0U2Nyb2xsQmFyV2lkdGhcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNjcm9sbF9sb2NrX2dldEN1cnJlbnRUYXJnZXRTY3JvbGxCYXJXaWR0aDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZ2V0UGFnZVNjcm9sbEJhcldpZHRoXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRQYWdlU2Nyb2xsQmFyV2lkdGg7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovXG5cblxuICAgICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImdldEN1cnJlbnRQYWdlU2Nyb2xsQmFyV2lkdGhcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldEN1cnJlbnRQYWdlU2Nyb2xsQmFyV2lkdGg7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovXG5cblxuICAgICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImFkZFNjcm9sbGFibGVUYXJnZXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNjcm9sbF9sb2NrX2FkZFNjcm9sbGFibGVUYXJnZXQ7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovXG5cblxuICAgICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInJlbW92ZVNjcm9sbGFibGVUYXJnZXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNjcm9sbF9sb2NrX3JlbW92ZVNjcm9sbGFibGVUYXJnZXQ7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovXG5cblxuICAgICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImFkZFNjcm9sbGFibGVTZWxlY3RvclwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2Nyb2xsX2xvY2tfYWRkU2Nyb2xsYWJsZVNlbGVjdG9yO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJyZW1vdmVTY3JvbGxhYmxlU2VsZWN0b3JcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNjcm9sbF9sb2NrX3JlbW92ZVNjcm9sbGFibGVTZWxlY3RvcjtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiYWRkTG9ja2FibGVUYXJnZXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNjcm9sbF9sb2NrX2FkZExvY2thYmxlVGFyZ2V0O1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJhZGRMb2NrYWJsZVNlbGVjdG9yXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxfbG9ja19hZGRMb2NrYWJsZVNlbGVjdG9yO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJzZXRGaWxsR2FwTWV0aG9kXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxfbG9ja19zZXRGaWxsR2FwTWV0aG9kO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJhZGRGaWxsR2FwVGFyZ2V0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxfbG9ja19hZGRGaWxsR2FwVGFyZ2V0O1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJyZW1vdmVGaWxsR2FwVGFyZ2V0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxfbG9ja19yZW1vdmVGaWxsR2FwVGFyZ2V0O1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJhZGRGaWxsR2FwU2VsZWN0b3JcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNjcm9sbF9sb2NrX2FkZEZpbGxHYXBTZWxlY3RvcjtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwicmVtb3ZlRmlsbEdhcFNlbGVjdG9yXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxfbG9ja19yZW1vdmVGaWxsR2FwU2VsZWN0b3I7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovXG5cblxuICAgICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInJlZmlsbEdhcHNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlZmlsbEdhcHM7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307XG4gICAgICAgICAgICAgIHZhciBvd25LZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTtcblxuICAgICAgICAgICAgICBpZiAodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBvd25LZXlzID0gb3duS2V5cy5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIHN5bSkuZW51bWVyYWJsZTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBvd25LZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoa2V5IGluIG9iaikge1xuICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBvYmpba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBGSUxMX0dBUF9BVkFJTEFCTEVfTUVUSE9EUyA9IFsncGFkZGluZycsICdtYXJnaW4nLCAnd2lkdGgnLCAnbWF4LXdpZHRoJywgJ25vbmUnXTtcbiAgICAgICAgICB2YXIgVE9VQ0hfRElSRUNUSU9OX0RFVEVDVF9PRkZTRVQgPSAzO1xuICAgICAgICAgIHZhciBzdGF0ZSA9IHtcbiAgICAgICAgICAgIHNjcm9sbDogdHJ1ZSxcbiAgICAgICAgICAgIHF1ZXVlOiAwLFxuICAgICAgICAgICAgc2Nyb2xsYWJsZVNlbGVjdG9yczogWydbZGF0YS1zY3JvbGwtbG9jay1zY3JvbGxhYmxlXSddLFxuICAgICAgICAgICAgbG9ja2FibGVTZWxlY3RvcnM6IFsnYm9keScsICdbZGF0YS1zY3JvbGwtbG9jay1sb2NrYWJsZV0nXSxcbiAgICAgICAgICAgIGZpbGxHYXBTZWxlY3RvcnM6IFsnYm9keScsICdbZGF0YS1zY3JvbGwtbG9jay1maWxsLWdhcF0nLCAnW2RhdGEtc2Nyb2xsLWxvY2stbG9ja2FibGVdJ10sXG4gICAgICAgICAgICBmaWxsR2FwTWV0aG9kOiBGSUxMX0dBUF9BVkFJTEFCTEVfTUVUSE9EU1swXSxcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICBzdGFydFRvdWNoWTogMCxcbiAgICAgICAgICAgIHN0YXJ0VG91Y2hYOiAwXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBkaXNhYmxlUGFnZVNjcm9sbCA9IGZ1bmN0aW9uIGRpc2FibGVQYWdlU2Nyb2xsKHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKHN0YXRlLnF1ZXVlIDw9IDApIHtcbiAgICAgICAgICAgICAgc3RhdGUuc2Nyb2xsID0gZmFsc2U7XG4gICAgICAgICAgICAgIHNjcm9sbF9sb2NrX2hpZGVMb2NrYWJsZU92ZXJmbG93KCk7XG4gICAgICAgICAgICAgIGZpbGxHYXBzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNjcm9sbF9sb2NrX2FkZFNjcm9sbGFibGVUYXJnZXQodGFyZ2V0KTtcbiAgICAgICAgICAgIHN0YXRlLnF1ZXVlKys7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBlbmFibGVQYWdlU2Nyb2xsID0gZnVuY3Rpb24gZW5hYmxlUGFnZVNjcm9sbCh0YXJnZXQpIHtcbiAgICAgICAgICAgIHN0YXRlLnF1ZXVlID4gMCAmJiBzdGF0ZS5xdWV1ZS0tO1xuXG4gICAgICAgICAgICBpZiAoc3RhdGUucXVldWUgPD0gMCkge1xuICAgICAgICAgICAgICBzdGF0ZS5zY3JvbGwgPSB0cnVlO1xuICAgICAgICAgICAgICBzY3JvbGxfbG9ja19zaG93TG9ja2FibGVPdmVyZmxvdygpO1xuICAgICAgICAgICAgICB1bmZpbGxHYXBzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNjcm9sbF9sb2NrX3JlbW92ZVNjcm9sbGFibGVUYXJnZXQodGFyZ2V0KTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIGdldFNjcm9sbFN0YXRlID0gZnVuY3Rpb24gZ2V0U2Nyb2xsU3RhdGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGUuc2Nyb2xsO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgY2xlYXJRdWV1ZVNjcm9sbExvY2tzID0gZnVuY3Rpb24gY2xlYXJRdWV1ZVNjcm9sbExvY2tzKCkge1xuICAgICAgICAgICAgc3RhdGUucXVldWUgPSAwO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfZ2V0VGFyZ2V0U2Nyb2xsQmFyV2lkdGggPSBmdW5jdGlvbiBnZXRUYXJnZXRTY3JvbGxCYXJXaWR0aCgkdGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgb25seUV4aXN0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7XG5cbiAgICAgICAgICAgIGlmIChpc0VsZW1lbnQoJHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgdmFyIGN1cnJlbnRPdmVyZmxvd1lQcm9wZXJ0eSA9ICR0YXJnZXQuc3R5bGUub3ZlcmZsb3dZO1xuXG4gICAgICAgICAgICAgIGlmIChvbmx5RXhpc3RzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFnZXRTY3JvbGxTdGF0ZSgpKSB7XG4gICAgICAgICAgICAgICAgICAkdGFyZ2V0LnN0eWxlLm92ZXJmbG93WSA9ICR0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLXNhdmVkLW92ZXJmbG93LXktcHJvcGVydHknKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS5vdmVyZmxvd1kgPSAnc2Nyb2xsJztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHZhciB3aWR0aCA9IHNjcm9sbF9sb2NrX2dldEN1cnJlbnRUYXJnZXRTY3JvbGxCYXJXaWR0aCgkdGFyZ2V0KTtcbiAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS5vdmVyZmxvd1kgPSBjdXJyZW50T3ZlcmZsb3dZUHJvcGVydHk7XG4gICAgICAgICAgICAgIHJldHVybiB3aWR0aDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfZ2V0Q3VycmVudFRhcmdldFNjcm9sbEJhcldpZHRoID0gZnVuY3Rpb24gZ2V0Q3VycmVudFRhcmdldFNjcm9sbEJhcldpZHRoKCR0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmIChpc0VsZW1lbnQoJHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgaWYgKCR0YXJnZXQgPT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZG9jdW1lbnRXaWR0aCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICAgICAgICAgICAgICB2YXIgd2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFdpZHRoID0gd2luZG93V2lkdGggLSBkb2N1bWVudFdpZHRoO1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50V2lkdGg7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGJvcmRlckxlZnRXaWR0aEN1cnJlbnRQcm9wZXJ0eSA9ICR0YXJnZXQuc3R5bGUuYm9yZGVyTGVmdFdpZHRoO1xuICAgICAgICAgICAgICAgIHZhciBib3JkZXJSaWdodFdpZHRoQ3VycmVudFByb3BlcnR5ID0gJHRhcmdldC5zdHlsZS5ib3JkZXJSaWdodFdpZHRoO1xuICAgICAgICAgICAgICAgICR0YXJnZXQuc3R5bGUuYm9yZGVyTGVmdFdpZHRoID0gJzBweCc7XG4gICAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS5ib3JkZXJSaWdodFdpZHRoID0gJzBweCc7XG5cbiAgICAgICAgICAgICAgICB2YXIgX2N1cnJlbnRXaWR0aCA9ICR0YXJnZXQub2Zmc2V0V2lkdGggLSAkdGFyZ2V0LmNsaWVudFdpZHRoO1xuXG4gICAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS5ib3JkZXJMZWZ0V2lkdGggPSBib3JkZXJMZWZ0V2lkdGhDdXJyZW50UHJvcGVydHk7XG4gICAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS5ib3JkZXJSaWdodFdpZHRoID0gYm9yZGVyUmlnaHRXaWR0aEN1cnJlbnRQcm9wZXJ0eTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2N1cnJlbnRXaWR0aDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBnZXRQYWdlU2Nyb2xsQmFyV2lkdGggPSBmdW5jdGlvbiBnZXRQYWdlU2Nyb2xsQmFyV2lkdGgoKSB7XG4gICAgICAgICAgICB2YXIgb25seUV4aXN0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gc2Nyb2xsX2xvY2tfZ2V0VGFyZ2V0U2Nyb2xsQmFyV2lkdGgoZG9jdW1lbnQuYm9keSwgb25seUV4aXN0cyk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBnZXRDdXJyZW50UGFnZVNjcm9sbEJhcldpZHRoID0gZnVuY3Rpb24gZ2V0Q3VycmVudFBhZ2VTY3JvbGxCYXJXaWR0aCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxfbG9ja19nZXRDdXJyZW50VGFyZ2V0U2Nyb2xsQmFyV2lkdGgoZG9jdW1lbnQuYm9keSk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19hZGRTY3JvbGxhYmxlVGFyZ2V0ID0gZnVuY3Rpb24gYWRkU2Nyb2xsYWJsZVRhcmdldCh0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgdmFyIHRhcmdldHMgPSBhcmd1bWVudEFzQXJyYXkodGFyZ2V0KTtcbiAgICAgICAgICAgICAgdGFyZ2V0cy5tYXAoZnVuY3Rpb24gKCR0YXJnZXRzKSB7XG4gICAgICAgICAgICAgICAgZWFjaE5vZGUoJHRhcmdldHMsIGZ1bmN0aW9uICgkdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICBpZiAoaXNFbGVtZW50KCR0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICR0YXJnZXQuc2V0QXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLXNjcm9sbGFibGUnLCAnJyk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvd0Vycm9yKFwiXFxcIlwiLmNvbmNhdCgkdGFyZ2V0LCBcIlxcXCIgaXMgbm90IGEgRWxlbWVudC5cIikpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbF9sb2NrX3JlbW92ZVNjcm9sbGFibGVUYXJnZXQgPSBmdW5jdGlvbiByZW1vdmVTY3JvbGxhYmxlVGFyZ2V0KHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgICB2YXIgdGFyZ2V0cyA9IGFyZ3VtZW50QXNBcnJheSh0YXJnZXQpO1xuICAgICAgICAgICAgICB0YXJnZXRzLm1hcChmdW5jdGlvbiAoJHRhcmdldHMpIHtcbiAgICAgICAgICAgICAgICBlYWNoTm9kZSgkdGFyZ2V0cywgZnVuY3Rpb24gKCR0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChpc0VsZW1lbnQoJHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgJHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stc2Nyb2xsYWJsZScpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3dFcnJvcihcIlxcXCJcIi5jb25jYXQoJHRhcmdldCwgXCJcXFwiIGlzIG5vdCBhIEVsZW1lbnQuXCIpKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19hZGRTY3JvbGxhYmxlU2VsZWN0b3IgPSBmdW5jdGlvbiBhZGRTY3JvbGxhYmxlU2VsZWN0b3Ioc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICB2YXIgc2VsZWN0b3JzID0gYXJndW1lbnRBc0FycmF5KHNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgc2VsZWN0b3JzLm1hcChmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5zY3JvbGxhYmxlU2VsZWN0b3JzLnB1c2goc2VsZWN0b3IpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbF9sb2NrX3JlbW92ZVNjcm9sbGFibGVTZWxlY3RvciA9IGZ1bmN0aW9uIHJlbW92ZVNjcm9sbGFibGVTZWxlY3RvcihzZWxlY3Rvcikge1xuICAgICAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgIHZhciBzZWxlY3RvcnMgPSBhcmd1bWVudEFzQXJyYXkoc2VsZWN0b3IpO1xuICAgICAgICAgICAgICBzZWxlY3RvcnMubWFwKGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgIHN0YXRlLnNjcm9sbGFibGVTZWxlY3RvcnMgPSBzdGF0ZS5zY3JvbGxhYmxlU2VsZWN0b3JzLmZpbHRlcihmdW5jdGlvbiAoc1NlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gc1NlbGVjdG9yICE9PSBzZWxlY3RvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19hZGRMb2NrYWJsZVRhcmdldCA9IGZ1bmN0aW9uIGFkZExvY2thYmxlVGFyZ2V0KHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgICB2YXIgdGFyZ2V0cyA9IGFyZ3VtZW50QXNBcnJheSh0YXJnZXQpO1xuICAgICAgICAgICAgICB0YXJnZXRzLm1hcChmdW5jdGlvbiAoJHRhcmdldHMpIHtcbiAgICAgICAgICAgICAgICBlYWNoTm9kZSgkdGFyZ2V0cywgZnVuY3Rpb24gKCR0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChpc0VsZW1lbnQoJHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgJHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stbG9ja2FibGUnLCAnJyk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvd0Vycm9yKFwiXFxcIlwiLmNvbmNhdCgkdGFyZ2V0LCBcIlxcXCIgaXMgbm90IGEgRWxlbWVudC5cIikpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBpZiAoIWdldFNjcm9sbFN0YXRlKCkpIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxfbG9ja19oaWRlTG9ja2FibGVPdmVyZmxvdygpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19hZGRMb2NrYWJsZVNlbGVjdG9yID0gZnVuY3Rpb24gYWRkTG9ja2FibGVTZWxlY3RvcihzZWxlY3Rvcikge1xuICAgICAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgIHZhciBzZWxlY3RvcnMgPSBhcmd1bWVudEFzQXJyYXkoc2VsZWN0b3IpO1xuICAgICAgICAgICAgICBzZWxlY3RvcnMubWFwKGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgIHN0YXRlLmxvY2thYmxlU2VsZWN0b3JzLnB1c2goc2VsZWN0b3IpO1xuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBpZiAoIWdldFNjcm9sbFN0YXRlKCkpIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxfbG9ja19oaWRlTG9ja2FibGVPdmVyZmxvdygpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgc2Nyb2xsX2xvY2tfYWRkRmlsbEdhcFNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbF9sb2NrX3NldEZpbGxHYXBNZXRob2QgPSBmdW5jdGlvbiBzZXRGaWxsR2FwTWV0aG9kKG1ldGhvZCkge1xuICAgICAgICAgICAgaWYgKG1ldGhvZCkge1xuICAgICAgICAgICAgICBpZiAoRklMTF9HQVBfQVZBSUxBQkxFX01FVEhPRFMuaW5kZXhPZihtZXRob2QpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHN0YXRlLmZpbGxHYXBNZXRob2QgPSBtZXRob2Q7XG4gICAgICAgICAgICAgICAgcmVmaWxsR2FwcygpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBtZXRob2RzID0gRklMTF9HQVBfQVZBSUxBQkxFX01FVEhPRFMuam9pbignLCAnKTtcbiAgICAgICAgICAgICAgICB0aHJvd0Vycm9yKFwiXFxcIlwiLmNvbmNhdChtZXRob2QsIFwiXFxcIiBtZXRob2QgaXMgbm90IGF2YWlsYWJsZSFcXG5BdmFpbGFibGUgZmlsbCBnYXAgbWV0aG9kczogXCIpLmNvbmNhdChtZXRob2RzLCBcIi5cIikpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19hZGRGaWxsR2FwVGFyZ2V0ID0gZnVuY3Rpb24gYWRkRmlsbEdhcFRhcmdldCh0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgdmFyIHRhcmdldHMgPSBhcmd1bWVudEFzQXJyYXkodGFyZ2V0KTtcbiAgICAgICAgICAgICAgdGFyZ2V0cy5tYXAoZnVuY3Rpb24gKCR0YXJnZXRzKSB7XG4gICAgICAgICAgICAgICAgZWFjaE5vZGUoJHRhcmdldHMsIGZ1bmN0aW9uICgkdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICBpZiAoaXNFbGVtZW50KCR0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICR0YXJnZXQuc2V0QXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLWZpbGwtZ2FwJywgJycpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghc3RhdGUuc2Nyb2xsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsX2xvY2tfZmlsbEdhcFRhcmdldCgkdGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3dFcnJvcihcIlxcXCJcIi5jb25jYXQoJHRhcmdldCwgXCJcXFwiIGlzIG5vdCBhIEVsZW1lbnQuXCIpKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19yZW1vdmVGaWxsR2FwVGFyZ2V0ID0gZnVuY3Rpb24gcmVtb3ZlRmlsbEdhcFRhcmdldCh0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgdmFyIHRhcmdldHMgPSBhcmd1bWVudEFzQXJyYXkodGFyZ2V0KTtcbiAgICAgICAgICAgICAgdGFyZ2V0cy5tYXAoZnVuY3Rpb24gKCR0YXJnZXRzKSB7XG4gICAgICAgICAgICAgICAgZWFjaE5vZGUoJHRhcmdldHMsIGZ1bmN0aW9uICgkdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICBpZiAoaXNFbGVtZW50KCR0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICR0YXJnZXQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLWZpbGwtZ2FwJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGF0ZS5zY3JvbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxfbG9ja191bmZpbGxHYXBUYXJnZXQoJHRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93RXJyb3IoXCJcXFwiXCIuY29uY2F0KCR0YXJnZXQsIFwiXFxcIiBpcyBub3QgYSBFbGVtZW50LlwiKSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfYWRkRmlsbEdhcFNlbGVjdG9yID0gZnVuY3Rpb24gYWRkRmlsbEdhcFNlbGVjdG9yKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgdmFyIHNlbGVjdG9ycyA9IGFyZ3VtZW50QXNBcnJheShzZWxlY3Rvcik7XG4gICAgICAgICAgICAgIHNlbGVjdG9ycy5tYXAoZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLmZpbGxHYXBTZWxlY3RvcnMuaW5kZXhPZihzZWxlY3RvcikgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICBzdGF0ZS5maWxsR2FwU2VsZWN0b3JzLnB1c2goc2VsZWN0b3IpO1xuXG4gICAgICAgICAgICAgICAgICBpZiAoIXN0YXRlLnNjcm9sbCkge1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGxfbG9ja19maWxsR2FwU2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19yZW1vdmVGaWxsR2FwU2VsZWN0b3IgPSBmdW5jdGlvbiByZW1vdmVGaWxsR2FwU2VsZWN0b3Ioc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICB2YXIgc2VsZWN0b3JzID0gYXJndW1lbnRBc0FycmF5KHNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgc2VsZWN0b3JzLm1hcChmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5maWxsR2FwU2VsZWN0b3JzID0gc3RhdGUuZmlsbEdhcFNlbGVjdG9ycy5maWx0ZXIoZnVuY3Rpb24gKGZTZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZTZWxlY3RvciAhPT0gc2VsZWN0b3I7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIXN0YXRlLnNjcm9sbCkge1xuICAgICAgICAgICAgICAgICAgc2Nyb2xsX2xvY2tfdW5maWxsR2FwU2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciByZWZpbGxHYXBzID0gZnVuY3Rpb24gcmVmaWxsR2FwcygpIHtcbiAgICAgICAgICAgIGlmICghc3RhdGUuc2Nyb2xsKSB7XG4gICAgICAgICAgICAgIGZpbGxHYXBzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19oaWRlTG9ja2FibGVPdmVyZmxvdyA9IGZ1bmN0aW9uIGhpZGVMb2NrYWJsZU92ZXJmbG93KCkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gYXJyYXlBc1NlbGVjdG9yKHN0YXRlLmxvY2thYmxlU2VsZWN0b3JzKTtcbiAgICAgICAgICAgIHNjcm9sbF9sb2NrX2hpZGVMb2NrYWJsZU92ZXJmbG93U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfc2hvd0xvY2thYmxlT3ZlcmZsb3cgPSBmdW5jdGlvbiBzaG93TG9ja2FibGVPdmVyZmxvdygpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3RvciA9IGFycmF5QXNTZWxlY3RvcihzdGF0ZS5sb2NrYWJsZVNlbGVjdG9ycyk7XG4gICAgICAgICAgICBzY3JvbGxfbG9ja19zaG93TG9ja2FibGVPdmVyZmxvd1NlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbF9sb2NrX2hpZGVMb2NrYWJsZU92ZXJmbG93U2VsZWN0b3IgPSBmdW5jdGlvbiBoaWRlTG9ja2FibGVPdmVyZmxvd1NlbGVjdG9yKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICB2YXIgJHRhcmdldHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICAgICAgICAgIGVhY2hOb2RlKCR0YXJnZXRzLCBmdW5jdGlvbiAoJHRhcmdldCkge1xuICAgICAgICAgICAgICBzY3JvbGxfbG9ja19oaWRlTG9ja2FibGVPdmVyZmxvd1RhcmdldCgkdGFyZ2V0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfc2hvd0xvY2thYmxlT3ZlcmZsb3dTZWxlY3RvciA9IGZ1bmN0aW9uIHNob3dMb2NrYWJsZU92ZXJmbG93U2VsZWN0b3Ioc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHZhciAkdGFyZ2V0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICAgICAgICAgICAgZWFjaE5vZGUoJHRhcmdldHMsIGZ1bmN0aW9uICgkdGFyZ2V0KSB7XG4gICAgICAgICAgICAgIHNjcm9sbF9sb2NrX3Nob3dMb2NrYWJsZU92ZXJmbG93VGFyZ2V0KCR0YXJnZXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19oaWRlTG9ja2FibGVPdmVyZmxvd1RhcmdldCA9IGZ1bmN0aW9uIGhpZGVMb2NrYWJsZU92ZXJmbG93VGFyZ2V0KCR0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmIChpc0VsZW1lbnQoJHRhcmdldCkgJiYgJHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stbG9ja2VkJykgIT09ICd0cnVlJykge1xuICAgICAgICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCR0YXJnZXQpO1xuICAgICAgICAgICAgICAkdGFyZ2V0LnNldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1zYXZlZC1vdmVyZmxvdy15LXByb3BlcnR5JywgY29tcHV0ZWRTdHlsZS5vdmVyZmxvd1kpO1xuICAgICAgICAgICAgICAkdGFyZ2V0LnNldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1zYXZlZC1pbmxpbmUtb3ZlcmZsb3ctcHJvcGVydHknLCAkdGFyZ2V0LnN0eWxlLm92ZXJmbG93KTtcbiAgICAgICAgICAgICAgJHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stc2F2ZWQtaW5saW5lLW92ZXJmbG93LXktcHJvcGVydHknLCAkdGFyZ2V0LnN0eWxlLm92ZXJmbG93WSk7XG4gICAgICAgICAgICAgICR0YXJnZXQuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgICAgICAgICAgJHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stbG9ja2VkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbF9sb2NrX3Nob3dMb2NrYWJsZU92ZXJmbG93VGFyZ2V0ID0gZnVuY3Rpb24gc2hvd0xvY2thYmxlT3ZlcmZsb3dUYXJnZXQoJHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKGlzRWxlbWVudCgkdGFyZ2V0KSAmJiAkdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1sb2NrZWQnKSA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICAgICR0YXJnZXQuc3R5bGUub3ZlcmZsb3cgPSAkdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1zYXZlZC1pbmxpbmUtb3ZlcmZsb3ctcHJvcGVydHknKTtcbiAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS5vdmVyZmxvd1kgPSAkdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1zYXZlZC1pbmxpbmUtb3ZlcmZsb3cteS1wcm9wZXJ0eScpO1xuICAgICAgICAgICAgICAkdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1zYXZlZC1vdmVyZmxvdy1wcm9wZXJ0eScpO1xuICAgICAgICAgICAgICAkdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1zYXZlZC1pbmxpbmUtb3ZlcmZsb3ctcHJvcGVydHknKTtcbiAgICAgICAgICAgICAgJHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stc2F2ZWQtaW5saW5lLW92ZXJmbG93LXktcHJvcGVydHknKTtcbiAgICAgICAgICAgICAgJHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stbG9ja2VkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBmaWxsR2FwcyA9IGZ1bmN0aW9uIGZpbGxHYXBzKCkge1xuICAgICAgICAgICAgc3RhdGUuZmlsbEdhcFNlbGVjdG9ycy5tYXAoZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgIHNjcm9sbF9sb2NrX2ZpbGxHYXBTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHVuZmlsbEdhcHMgPSBmdW5jdGlvbiB1bmZpbGxHYXBzKCkge1xuICAgICAgICAgICAgc3RhdGUuZmlsbEdhcFNlbGVjdG9ycy5tYXAoZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgIHNjcm9sbF9sb2NrX3VuZmlsbEdhcFNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfZmlsbEdhcFNlbGVjdG9yID0gZnVuY3Rpb24gZmlsbEdhcFNlbGVjdG9yKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICB2YXIgJHRhcmdldHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICAgICAgICAgIHZhciBpc0xvY2thYmxlID0gc3RhdGUubG9ja2FibGVTZWxlY3RvcnMuaW5kZXhPZihzZWxlY3RvcikgIT09IC0xO1xuICAgICAgICAgICAgZWFjaE5vZGUoJHRhcmdldHMsIGZ1bmN0aW9uICgkdGFyZ2V0KSB7XG4gICAgICAgICAgICAgIHNjcm9sbF9sb2NrX2ZpbGxHYXBUYXJnZXQoJHRhcmdldCwgaXNMb2NrYWJsZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbF9sb2NrX2ZpbGxHYXBUYXJnZXQgPSBmdW5jdGlvbiBmaWxsR2FwVGFyZ2V0KCR0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBpc0xvY2thYmxlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTtcblxuICAgICAgICAgICAgaWYgKGlzRWxlbWVudCgkdGFyZ2V0KSkge1xuICAgICAgICAgICAgICB2YXIgc2Nyb2xsQmFyV2lkdGg7XG5cbiAgICAgICAgICAgICAgaWYgKCR0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLWxvY2thYmxlJykgPT09ICcnIHx8IGlzTG9ja2FibGUpIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxCYXJXaWR0aCA9IHNjcm9sbF9sb2NrX2dldFRhcmdldFNjcm9sbEJhcldpZHRoKCR0YXJnZXQsIHRydWUpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciAkbG9ja2FibGVQYXJlbnQgPSBmaW5kUGFyZW50QnlTZWxlY3RvcigkdGFyZ2V0LCBhcnJheUFzU2VsZWN0b3Ioc3RhdGUubG9ja2FibGVTZWxlY3RvcnMpKTtcbiAgICAgICAgICAgICAgICBzY3JvbGxCYXJXaWR0aCA9IHNjcm9sbF9sb2NrX2dldFRhcmdldFNjcm9sbEJhcldpZHRoKCRsb2NrYWJsZVBhcmVudCwgdHJ1ZSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoJHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stZmlsbGVkLWdhcCcpID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxfbG9ja191bmZpbGxHYXBUYXJnZXQoJHRhcmdldCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCR0YXJnZXQpO1xuICAgICAgICAgICAgICAkdGFyZ2V0LnNldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1maWxsZWQtZ2FwJywgJ3RydWUnKTtcbiAgICAgICAgICAgICAgJHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stY3VycmVudC1maWxsLWdhcC1tZXRob2QnLCBzdGF0ZS5maWxsR2FwTWV0aG9kKTtcblxuICAgICAgICAgICAgICBpZiAoc3RhdGUuZmlsbEdhcE1ldGhvZCA9PT0gJ21hcmdpbicpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudE1hcmdpbiA9IHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZS5tYXJnaW5SaWdodCk7XG4gICAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS5tYXJnaW5SaWdodCA9IFwiXCIuY29uY2F0KGN1cnJlbnRNYXJnaW4gKyBzY3JvbGxCYXJXaWR0aCwgXCJweFwiKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5maWxsR2FwTWV0aG9kID09PSAnd2lkdGgnKSB7XG4gICAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS53aWR0aCA9IFwiY2FsYygxMDAlIC0gXCIuY29uY2F0KHNjcm9sbEJhcldpZHRoLCBcInB4KVwiKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5maWxsR2FwTWV0aG9kID09PSAnbWF4LXdpZHRoJykge1xuICAgICAgICAgICAgICAgICR0YXJnZXQuc3R5bGUubWF4V2lkdGggPSBcImNhbGMoMTAwJSAtIFwiLmNvbmNhdChzY3JvbGxCYXJXaWR0aCwgXCJweClcIik7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUuZmlsbEdhcE1ldGhvZCA9PT0gJ3BhZGRpbmcnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRQYWRkaW5nID0gcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlLnBhZGRpbmdSaWdodCk7XG4gICAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS5wYWRkaW5nUmlnaHQgPSBcIlwiLmNvbmNhdChjdXJyZW50UGFkZGluZyArIHNjcm9sbEJhcldpZHRoLCBcInB4XCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja191bmZpbGxHYXBTZWxlY3RvciA9IGZ1bmN0aW9uIHVuZmlsbEdhcFNlbGVjdG9yKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICB2YXIgJHRhcmdldHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICAgICAgICAgIGVhY2hOb2RlKCR0YXJnZXRzLCBmdW5jdGlvbiAoJHRhcmdldCkge1xuICAgICAgICAgICAgICBzY3JvbGxfbG9ja191bmZpbGxHYXBUYXJnZXQoJHRhcmdldCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbF9sb2NrX3VuZmlsbEdhcFRhcmdldCA9IGZ1bmN0aW9uIHVuZmlsbEdhcFRhcmdldCgkdGFyZ2V0KSB7XG4gICAgICAgICAgICBpZiAoaXNFbGVtZW50KCR0YXJnZXQpKSB7XG4gICAgICAgICAgICAgIGlmICgkdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1maWxsZWQtZ2FwJykgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50RmlsbEdhcE1ldGhvZCA9ICR0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLWN1cnJlbnQtZmlsbC1nYXAtbWV0aG9kJyk7XG4gICAgICAgICAgICAgICAgJHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stZmlsbGVkLWdhcCcpO1xuICAgICAgICAgICAgICAgICR0YXJnZXQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLWN1cnJlbnQtZmlsbC1nYXAtbWV0aG9kJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEZpbGxHYXBNZXRob2QgPT09ICdtYXJnaW4nKSB7XG4gICAgICAgICAgICAgICAgICAkdGFyZ2V0LnN0eWxlLm1hcmdpblJpZ2h0ID0gXCJcIjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRGaWxsR2FwTWV0aG9kID09PSAnd2lkdGgnKSB7XG4gICAgICAgICAgICAgICAgICAkdGFyZ2V0LnN0eWxlLndpZHRoID0gXCJcIjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRGaWxsR2FwTWV0aG9kID09PSAnbWF4LXdpZHRoJykge1xuICAgICAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS5tYXhXaWR0aCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50RmlsbEdhcE1ldGhvZCA9PT0gJ3BhZGRpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAkdGFyZ2V0LnN0eWxlLnBhZGRpbmdSaWdodCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBvblJlc2l6ZSA9IGZ1bmN0aW9uIG9uUmVzaXplKGUpIHtcbiAgICAgICAgICAgIHJlZmlsbEdhcHMoKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIG9uVG91Y2hTdGFydCA9IGZ1bmN0aW9uIG9uVG91Y2hTdGFydChlKSB7XG4gICAgICAgICAgICBpZiAoIXN0YXRlLnNjcm9sbCkge1xuICAgICAgICAgICAgICBzdGF0ZS5zdGFydFRvdWNoWSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgICAgICAgICBzdGF0ZS5zdGFydFRvdWNoWCA9IGUudG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfb25Ub3VjaE1vdmUgPSBmdW5jdGlvbiBvblRvdWNoTW92ZShlKSB7XG4gICAgICAgICAgICBpZiAoIXN0YXRlLnNjcm9sbCkge1xuICAgICAgICAgICAgICB2YXIgc3RhcnRUb3VjaFkgPSBzdGF0ZS5zdGFydFRvdWNoWSxcbiAgICAgICAgICAgICAgICAgIHN0YXJ0VG91Y2hYID0gc3RhdGUuc3RhcnRUb3VjaFg7XG4gICAgICAgICAgICAgIHZhciBjdXJyZW50Q2xpZW50WSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgICAgICAgICB2YXIgY3VycmVudENsaWVudFggPSBlLnRvdWNoZXNbMF0uY2xpZW50WDtcblxuICAgICAgICAgICAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBhcnJheUFzU2VsZWN0b3Ioc3RhdGUuc2Nyb2xsYWJsZVNlbGVjdG9ycyk7XG4gICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgIHVwOiBzdGFydFRvdWNoWSA8IGN1cnJlbnRDbGllbnRZLFxuICAgICAgICAgICAgICAgICAgZG93bjogc3RhcnRUb3VjaFkgPiBjdXJyZW50Q2xpZW50WSxcbiAgICAgICAgICAgICAgICAgIGxlZnQ6IHN0YXJ0VG91Y2hYIDwgY3VycmVudENsaWVudFgsXG4gICAgICAgICAgICAgICAgICByaWdodDogc3RhcnRUb3VjaFggPiBjdXJyZW50Q2xpZW50WFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbldpdGhPZmZzZXQgPSB7XG4gICAgICAgICAgICAgICAgICB1cDogc3RhcnRUb3VjaFkgKyBUT1VDSF9ESVJFQ1RJT05fREVURUNUX09GRlNFVCA8IGN1cnJlbnRDbGllbnRZLFxuICAgICAgICAgICAgICAgICAgZG93bjogc3RhcnRUb3VjaFkgLSBUT1VDSF9ESVJFQ1RJT05fREVURUNUX09GRlNFVCA+IGN1cnJlbnRDbGllbnRZLFxuICAgICAgICAgICAgICAgICAgbGVmdDogc3RhcnRUb3VjaFggKyBUT1VDSF9ESVJFQ1RJT05fREVURUNUX09GRlNFVCA8IGN1cnJlbnRDbGllbnRYLFxuICAgICAgICAgICAgICAgICAgcmlnaHQ6IHN0YXJ0VG91Y2hYIC0gVE9VQ0hfRElSRUNUSU9OX0RFVEVDVF9PRkZTRVQgPiBjdXJyZW50Q2xpZW50WFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB2YXIgaGFuZGxlID0gZnVuY3Rpb24gaGFuZGxlKCRlbCkge1xuICAgICAgICAgICAgICAgICAgdmFyIHNraXAgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICBpZiAoJGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnRTY3JvbGxhYmxlRWwgPSBmaW5kUGFyZW50QnlTZWxlY3RvcigkZWwsIHNlbGVjdG9yLCBmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRJc0lucHV0UmFuZ2UoJGVsKSkge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChza2lwIHx8IGVsZW1lbnRJc1Njcm9sbGFibGVGaWVsZCgkZWwpICYmIGZpbmRQYXJlbnRCeVNlbGVjdG9yKCRlbCwgc2VsZWN0b3IpIHx8IGVsZW1lbnRIYXNTZWxlY3RvcigkZWwsIHNlbGVjdG9yKSkge1xuICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmV2ZW50ID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudFNjcm9sbExlZnRPblN0YXJ0KCRlbCkgJiYgZWxlbWVudFNjcm9sbExlZnRPbkVuZCgkZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uLnVwICYmIGVsZW1lbnRTY3JvbGxUb3BPblN0YXJ0KCRlbCkgfHwgZGlyZWN0aW9uLmRvd24gJiYgZWxlbWVudFNjcm9sbFRvcE9uRW5kKCRlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmVudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50U2Nyb2xsVG9wT25TdGFydCgkZWwpICYmIGVsZW1lbnRTY3JvbGxUb3BPbkVuZCgkZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uLmxlZnQgJiYgZWxlbWVudFNjcm9sbExlZnRPblN0YXJ0KCRlbCkgfHwgZGlyZWN0aW9uLnJpZ2h0ICYmIGVsZW1lbnRTY3JvbGxMZWZ0T25FbmQoJGVsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbldpdGhPZmZzZXQudXAgJiYgZWxlbWVudFNjcm9sbFRvcE9uU3RhcnQoJGVsKSB8fCBkaXJlY3Rpb25XaXRoT2Zmc2V0LmRvd24gJiYgZWxlbWVudFNjcm9sbFRvcE9uRW5kKCRlbCkgfHwgZGlyZWN0aW9uV2l0aE9mZnNldC5sZWZ0ICYmIGVsZW1lbnRTY3JvbGxMZWZ0T25TdGFydCgkZWwpIHx8IGRpcmVjdGlvbldpdGhPZmZzZXQucmlnaHQgJiYgZWxlbWVudFNjcm9sbExlZnRPbkVuZCgkZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudFNjcm9sbGFibGVFbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGUocGFyZW50U2Nyb2xsYWJsZUVsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmNhbmNlbGFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgaGFuZGxlKHBhcmVudFNjcm9sbGFibGVFbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmNhbmNlbGFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaGFuZGxlKGUudGFyZ2V0KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgb25Ub3VjaEVuZCA9IGZ1bmN0aW9uIG9uVG91Y2hFbmQoZSkge1xuICAgICAgICAgICAgaWYgKCFzdGF0ZS5zY3JvbGwpIHtcbiAgICAgICAgICAgICAgc3RhdGUuc3RhcnRUb3VjaFkgPSAwO1xuICAgICAgICAgICAgICBzdGF0ZS5zdGFydFRvdWNoWCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIG9uUmVzaXplKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIG9uVG91Y2hTdGFydCk7XG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBzY3JvbGxfbG9ja19vblRvdWNoTW92ZSwge1xuICAgICAgICAgICAgICBwYXNzaXZlOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uVG91Y2hFbmQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBkZXByZWNhdGVkTWV0aG9kcyA9IHtcbiAgICAgICAgICAgIGhpZGU6IGZ1bmN0aW9uIGhpZGUodGFyZ2V0KSB7XG4gICAgICAgICAgICAgIHRocm93RXJyb3IoJ1wiaGlkZVwiIGlzIGRlcHJlY2F0ZWQhIFVzZSBcImRpc2FibGVQYWdlU2Nyb2xsXCIgaW5zdGVhZC4gXFxuIGh0dHBzOi8vZ2l0aHViLmNvbS9GTDNOS0VZL3Njcm9sbC1sb2NrI2Rpc2FibGVwYWdlc2Nyb2xsc2Nyb2xsYWJsZXRhcmdldCcpO1xuICAgICAgICAgICAgICBkaXNhYmxlUGFnZVNjcm9sbCh0YXJnZXQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNob3c6IGZ1bmN0aW9uIHNob3codGFyZ2V0KSB7XG4gICAgICAgICAgICAgIHRocm93RXJyb3IoJ1wic2hvd1wiIGlzIGRlcHJlY2F0ZWQhIFVzZSBcImVuYWJsZVBhZ2VTY3JvbGxcIiBpbnN0ZWFkLiBcXG4gaHR0cHM6Ly9naXRodWIuY29tL0ZMM05LRVkvc2Nyb2xsLWxvY2sjZW5hYmxlcGFnZXNjcm9sbHNjcm9sbGFibGV0YXJnZXQnKTtcbiAgICAgICAgICAgICAgZW5hYmxlUGFnZVNjcm9sbCh0YXJnZXQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRvZ2dsZTogZnVuY3Rpb24gdG9nZ2xlKHRhcmdldCkge1xuICAgICAgICAgICAgICB0aHJvd0Vycm9yKCdcInRvZ2dsZVwiIGlzIGRlcHJlY2F0ZWQhIERvIG5vdCB1c2UgaXQuJyk7XG5cbiAgICAgICAgICAgICAgaWYgKGdldFNjcm9sbFN0YXRlKCkpIHtcbiAgICAgICAgICAgICAgICBkaXNhYmxlUGFnZVNjcm9sbCgpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVuYWJsZVBhZ2VTY3JvbGwodGFyZ2V0KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldFN0YXRlOiBmdW5jdGlvbiBnZXRTdGF0ZSgpIHtcbiAgICAgICAgICAgICAgdGhyb3dFcnJvcignXCJnZXRTdGF0ZVwiIGlzIGRlcHJlY2F0ZWQhIFVzZSBcImdldFNjcm9sbFN0YXRlXCIgaW5zdGVhZC4gXFxuIGh0dHBzOi8vZ2l0aHViLmNvbS9GTDNOS0VZL3Njcm9sbC1sb2NrI2dldHNjcm9sbHN0YXRlJyk7XG4gICAgICAgICAgICAgIHJldHVybiBnZXRTY3JvbGxTdGF0ZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldFdpZHRoOiBmdW5jdGlvbiBnZXRXaWR0aCgpIHtcbiAgICAgICAgICAgICAgdGhyb3dFcnJvcignXCJnZXRXaWR0aFwiIGlzIGRlcHJlY2F0ZWQhIFVzZSBcImdldFBhZ2VTY3JvbGxCYXJXaWR0aFwiIGluc3RlYWQuIFxcbiBodHRwczovL2dpdGh1Yi5jb20vRkwzTktFWS9zY3JvbGwtbG9jayNnZXRwYWdlc2Nyb2xsYmFyd2lkdGgnKTtcbiAgICAgICAgICAgICAgcmV0dXJuIGdldFBhZ2VTY3JvbGxCYXJXaWR0aCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldEN1cnJlbnRXaWR0aDogZnVuY3Rpb24gZ2V0Q3VycmVudFdpZHRoKCkge1xuICAgICAgICAgICAgICB0aHJvd0Vycm9yKCdcImdldEN1cnJlbnRXaWR0aFwiIGlzIGRlcHJlY2F0ZWQhIFVzZSBcImdldEN1cnJlbnRQYWdlU2Nyb2xsQmFyV2lkdGhcIiBpbnN0ZWFkLiBcXG4gaHR0cHM6Ly9naXRodWIuY29tL0ZMM05LRVkvc2Nyb2xsLWxvY2sjZ2V0Y3VycmVudHBhZ2VzY3JvbGxiYXJ3aWR0aCcpO1xuICAgICAgICAgICAgICByZXR1cm4gZ2V0Q3VycmVudFBhZ2VTY3JvbGxCYXJXaWR0aCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldFNjcm9sbGFibGVUYXJnZXRzOiBmdW5jdGlvbiBzZXRTY3JvbGxhYmxlVGFyZ2V0cyh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgdGhyb3dFcnJvcignXCJzZXRTY3JvbGxhYmxlVGFyZ2V0c1wiIGlzIGRlcHJlY2F0ZWQhIFVzZSBcImFkZFNjcm9sbGFibGVUYXJnZXRcIiBpbnN0ZWFkLiBcXG4gaHR0cHM6Ly9naXRodWIuY29tL0ZMM05LRVkvc2Nyb2xsLWxvY2sjYWRkc2Nyb2xsYWJsZXRhcmdldHNjcm9sbGFibGV0YXJnZXQnKTtcbiAgICAgICAgICAgICAgc2Nyb2xsX2xvY2tfYWRkU2Nyb2xsYWJsZVRhcmdldCh0YXJnZXQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldEZpbGxHYXBTZWxlY3RvcnM6IGZ1bmN0aW9uIHNldEZpbGxHYXBTZWxlY3RvcnMoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgdGhyb3dFcnJvcignXCJzZXRGaWxsR2FwU2VsZWN0b3JzXCIgaXMgZGVwcmVjYXRlZCEgVXNlIFwiYWRkRmlsbEdhcFNlbGVjdG9yXCIgaW5zdGVhZC4gXFxuIGh0dHBzOi8vZ2l0aHViLmNvbS9GTDNOS0VZL3Njcm9sbC1sb2NrI2FkZGZpbGxnYXBzZWxlY3RvcmZpbGxnYXBzZWxlY3RvcicpO1xuICAgICAgICAgICAgICBzY3JvbGxfbG9ja19hZGRGaWxsR2FwU2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldEZpbGxHYXBUYXJnZXRzOiBmdW5jdGlvbiBzZXRGaWxsR2FwVGFyZ2V0cyh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgdGhyb3dFcnJvcignXCJzZXRGaWxsR2FwVGFyZ2V0c1wiIGlzIGRlcHJlY2F0ZWQhIFVzZSBcImFkZEZpbGxHYXBUYXJnZXRcIiBpbnN0ZWFkLiBcXG4gaHR0cHM6Ly9naXRodWIuY29tL0ZMM05LRVkvc2Nyb2xsLWxvY2sjYWRkZmlsbGdhcHRhcmdldGZpbGxnYXB0YXJnZXQnKTtcbiAgICAgICAgICAgICAgc2Nyb2xsX2xvY2tfYWRkRmlsbEdhcFRhcmdldCh0YXJnZXQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsZWFyUXVldWU6IGZ1bmN0aW9uIGNsZWFyUXVldWUoKSB7XG4gICAgICAgICAgICAgIHRocm93RXJyb3IoJ1wiY2xlYXJRdWV1ZVwiIGlzIGRlcHJlY2F0ZWQhIFVzZSBcImNsZWFyUXVldWVTY3JvbGxMb2Nrc1wiIGluc3RlYWQuIFxcbiBodHRwczovL2dpdGh1Yi5jb20vRkwzTktFWS9zY3JvbGwtbG9jayNjbGVhcnF1ZXVlc2Nyb2xsbG9ja3MnKTtcbiAgICAgICAgICAgICAgY2xlYXJRdWV1ZVNjcm9sbExvY2tzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxMb2NrID0gX29iamVjdFNwcmVhZCh7XG4gICAgICAgICAgICBkaXNhYmxlUGFnZVNjcm9sbDogZGlzYWJsZVBhZ2VTY3JvbGwsXG4gICAgICAgICAgICBlbmFibGVQYWdlU2Nyb2xsOiBlbmFibGVQYWdlU2Nyb2xsLFxuICAgICAgICAgICAgZ2V0U2Nyb2xsU3RhdGU6IGdldFNjcm9sbFN0YXRlLFxuICAgICAgICAgICAgY2xlYXJRdWV1ZVNjcm9sbExvY2tzOiBjbGVhclF1ZXVlU2Nyb2xsTG9ja3MsXG4gICAgICAgICAgICBnZXRUYXJnZXRTY3JvbGxCYXJXaWR0aDogc2Nyb2xsX2xvY2tfZ2V0VGFyZ2V0U2Nyb2xsQmFyV2lkdGgsXG4gICAgICAgICAgICBnZXRDdXJyZW50VGFyZ2V0U2Nyb2xsQmFyV2lkdGg6IHNjcm9sbF9sb2NrX2dldEN1cnJlbnRUYXJnZXRTY3JvbGxCYXJXaWR0aCxcbiAgICAgICAgICAgIGdldFBhZ2VTY3JvbGxCYXJXaWR0aDogZ2V0UGFnZVNjcm9sbEJhcldpZHRoLFxuICAgICAgICAgICAgZ2V0Q3VycmVudFBhZ2VTY3JvbGxCYXJXaWR0aDogZ2V0Q3VycmVudFBhZ2VTY3JvbGxCYXJXaWR0aCxcbiAgICAgICAgICAgIGFkZFNjcm9sbGFibGVTZWxlY3Rvcjogc2Nyb2xsX2xvY2tfYWRkU2Nyb2xsYWJsZVNlbGVjdG9yLFxuICAgICAgICAgICAgcmVtb3ZlU2Nyb2xsYWJsZVNlbGVjdG9yOiBzY3JvbGxfbG9ja19yZW1vdmVTY3JvbGxhYmxlU2VsZWN0b3IsXG4gICAgICAgICAgICBhZGRTY3JvbGxhYmxlVGFyZ2V0OiBzY3JvbGxfbG9ja19hZGRTY3JvbGxhYmxlVGFyZ2V0LFxuICAgICAgICAgICAgcmVtb3ZlU2Nyb2xsYWJsZVRhcmdldDogc2Nyb2xsX2xvY2tfcmVtb3ZlU2Nyb2xsYWJsZVRhcmdldCxcbiAgICAgICAgICAgIGFkZExvY2thYmxlU2VsZWN0b3I6IHNjcm9sbF9sb2NrX2FkZExvY2thYmxlU2VsZWN0b3IsXG4gICAgICAgICAgICBhZGRMb2NrYWJsZVRhcmdldDogc2Nyb2xsX2xvY2tfYWRkTG9ja2FibGVUYXJnZXQsXG4gICAgICAgICAgICBhZGRGaWxsR2FwU2VsZWN0b3I6IHNjcm9sbF9sb2NrX2FkZEZpbGxHYXBTZWxlY3RvcixcbiAgICAgICAgICAgIHJlbW92ZUZpbGxHYXBTZWxlY3Rvcjogc2Nyb2xsX2xvY2tfcmVtb3ZlRmlsbEdhcFNlbGVjdG9yLFxuICAgICAgICAgICAgYWRkRmlsbEdhcFRhcmdldDogc2Nyb2xsX2xvY2tfYWRkRmlsbEdhcFRhcmdldCxcbiAgICAgICAgICAgIHJlbW92ZUZpbGxHYXBUYXJnZXQ6IHNjcm9sbF9sb2NrX3JlbW92ZUZpbGxHYXBUYXJnZXQsXG4gICAgICAgICAgICBzZXRGaWxsR2FwTWV0aG9kOiBzY3JvbGxfbG9ja19zZXRGaWxsR2FwTWV0aG9kLFxuICAgICAgICAgICAgcmVmaWxsR2FwczogcmVmaWxsR2FwcyxcbiAgICAgICAgICAgIF9zdGF0ZTogc3RhdGVcbiAgICAgICAgICB9LCBkZXByZWNhdGVkTWV0aG9kcyk7XG4gICAgICAgICAgLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IHNjcm9sbExvY2s7XG4gICAgICAgICAgLyoqKi9cbiAgICAgICAgfVxuICAgICAgICAvKioqKioqL1xuICAgICAgICBdKVtcImRlZmF1bHRcIl1cbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuICB2YXIgc2Nyb2xsTG9jayQxID0gdW53cmFwRXhwb3J0cyhzY3JvbGxMb2NrKTtcblxuICBmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7XG5cbiAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7XG5cbiAgICAgIGlmIChlbnVtZXJhYmxlT25seSkge1xuICAgICAgICBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkge1xuICAgICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpO1xuICAgIH1cblxuICAgIHJldHVybiBrZXlzO1xuICB9XG5cbiAgZnVuY3Rpb24gX29iamVjdFNwcmVhZDIodGFyZ2V0KSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9O1xuXG4gICAgICBpZiAoaSAlIDIpIHtcbiAgICAgICAgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cblxuICBmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gICAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gICAgcmV0dXJuIENvbnN0cnVjdG9yO1xuICB9XG5cbiAgZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICAgIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgdmFyIEhlYWRlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSGVhZGVyKGNvbnRhaW5lcikge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEhlYWRlcik7XG5cbiAgICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXIpO1xuICAgICAgdGhpcy5zY2hlbSA9IHtcbiAgICAgICAgbWFpbk1lbnU6ICdbZGF0YS1tYWluLWJhcl0nLFxuICAgICAgICBtYWluTWVudU5hdjogJ1tkYXRhLW1haW4tbmF2XScsXG4gICAgICAgIG1haW5Ub2dnbGU6ICdbZGF0YS1tYWluLXRvZ2dsZV0nLFxuICAgICAgICBzdWJpdGVtczogJ1tkYXRhLW1haW4tc3ViaXRlbV0nLFxuICAgICAgICBzdWJpdGVtVG9nZ2xlOiAnW2RhdGEtc3ViaXRlbS10b2dnbGVdJyxcbiAgICAgICAgc3ViaXRlbUxpc3Q6ICdbZGF0YS1zdWJpdGVtLWxpc3RdJ1xuICAgICAgfTtcbiAgICAgIHRoaXMubWFpblN1Yml0ZW1zID0gW107XG4gICAgICB0aGlzLm1haW5Ub2dnbGVzID0gW107XG4gICAgICB0aGlzLm1haW5NZW51ID0gbnVsbDtcbiAgICAgIHRoaXMubWFpbk1lbnVOYXYgPSBudWxsO1xuICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgbWVudU9wZW46IGZhbHNlLFxuICAgICAgICBpc1N1Ymxpc3RFeHBhbmRlZDogZmFsc2UsXG4gICAgICAgIGV4cGFuZGVkU3VibGlzdDogbnVsbCxcbiAgICAgICAgaXNIaWRkZW46IGZhbHNlLFxuICAgICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGhcbiAgICAgIH07XG4gICAgICB0aGlzLnNjcm9sbERpc3RhbmNlID0gMDtcbiAgICAgIHRoaXMuY2xhc3NlcyA9IHtcbiAgICAgICAgbWVudU9wZW46ICdpcy1vcGVuJyxcbiAgICAgICAgcGFnZVNjcm9sbDogJ2lzLXNjcm9sbCcsXG4gICAgICAgIHN1Ym1lbnVPcGVuOiAnaXMtZXhwYW5kZWQnLFxuICAgICAgICBoaWRkZW46ICdpcy1pbnZpc2libGUnXG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5jb250YWluZXIpIHtcbiAgICAgICAgLy8gdGhpcy5pbml0U3ViTWVudSgpO1xuICAgICAgICB0aGlzLmluaXRNb2JpbGVNZW51KCk7XG4gICAgICAgIHRoaXMuaW5pdFNjcm9sbExpc3RlbmVyKCk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICB2YXIga2V5ID0gZXZlbnQua2V5O1xuXG4gICAgICAgICAgaWYgKGtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgIF90aGlzLmNsb3NlTWVudSgpOyAvLyB0aGlzLmNvbGxhcHNlU3ViTWVudSgpO1xuXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoSGVhZGVyLCBbe1xuICAgICAga2V5OiBcImluaXRNb2JpbGVNZW51XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdE1vYmlsZU1lbnUoKSB7XG4gICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMubWFpbk1lbnUgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKHRoaXMuc2NoZW0ubWFpbk1lbnUpO1xuICAgICAgICB0aGlzLm1haW5NZW51TmF2ID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3Rvcih0aGlzLnNjaGVtLm1haW5NZW51TmF2KTtcbiAgICAgICAgdGhpcy5tYWluVG9nZ2xlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5zY2hlbS5tYWluVG9nZ2xlKSk7XG4gICAgICAgIHRoaXMubWFpblRvZ2dsZXMuZm9yRWFjaChmdW5jdGlvbiAoc3dpdGNoZXIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnc3NzcycpO1xuICAgICAgICAgIHN3aXRjaGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NsaWMnKTtcblxuICAgICAgICAgICAgaWYgKF90aGlzMi5zdGF0ZS5tZW51T3BlbiA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ29wJyk7XG5cbiAgICAgICAgICAgICAgX3RoaXMyLm9wZW5NZW51KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaGknKTtcblxuICAgICAgICAgICAgICBfdGhpczIuY2xvc2VNZW51KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCAhPT0gX3RoaXMyLnN0YXRlLndpZHRoICYmIF90aGlzMi5zdGF0ZS5tZW51T3Blbikge1xuICAgICAgICAgICAgX3RoaXMyLmNsb3NlTWVudSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF90aGlzMi5zdGF0ZS53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiaW5pdFNjcm9sbExpc3RlbmVyXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdFNjcm9sbExpc3RlbmVyKCkge1xuICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBpc0VuYWJsZSA9IHdpbmRvdy5wYWdlWU9mZnNldCA+IF90aGlzMy5zY3JvbGxEaXN0YW5jZTtcblxuICAgICAgICAgIF90aGlzMy5tYWluTWVudS5jbGFzc0xpc3QudG9nZ2xlKF90aGlzMy5jbGFzc2VzLnBhZ2VTY3JvbGwsIGlzRW5hYmxlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImluaXRTdWJNZW51XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdFN1Yk1lbnUoKSB7XG4gICAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5zY2hlbS5zdWJpdGVtcykpLmZvckVhY2goZnVuY3Rpb24gKHN1Yml0ZW0pIHtcbiAgICAgICAgICBfdGhpczQubWFpblN1Yml0ZW1zLnB1c2goe1xuICAgICAgICAgICAgY29udGFpbmVyOiBzdWJpdGVtLFxuICAgICAgICAgICAgbWVudTogc3ViaXRlbS5xdWVyeVNlbGVjdG9yKF90aGlzNC5zY2hlbS5zdWJpdGVtTGlzdCksXG4gICAgICAgICAgICB0b2dnbGU6IHN1Yml0ZW0ucXVlcnlTZWxlY3RvcihfdGhpczQuc2NoZW0uc3ViaXRlbVRvZ2dsZSlcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWFpblN1Yml0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICBpdGVtLnRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIF90aGlzNC5leHBhbmRTdWJNZW51KGl0ZW0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5zdGF0ZS5leHBhbmRlZFN1Ymxpc3QpO1xuICAgICAgICAgIGlmICghIV90aGlzNC5zdGF0ZS5leHBhbmRlZFN1Ymxpc3QgJiYgZXZ0LnRhcmdldCAhPT0gX3RoaXM0LnN0YXRlLmV4cGFuZGVkU3VibGlzdC5jb250YWluZXIgJiYgIV90aGlzNC5zdGF0ZS5leHBhbmRlZFN1Ymxpc3QuY29udGFpbmVyLmNvbnRhaW5zKGV2dC50YXJnZXQpKSB7XG4gICAgICAgICAgICBfdGhpczQuY29sbGFwc2VTdWJNZW51KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0SGVpZ2h0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SGVpZ2h0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYWluTWVudSA/IHRoaXMubWFpbk1lbnUub2Zmc2V0SGVpZ2h0IDogMDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwidG9nZ2xlSGlkZGVuXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdG9nZ2xlSGlkZGVuKGlzT2ZmKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuaXNIaWRkZW4gPSBpc09mZjtcbiAgICAgICAgdGhpcy5tYWluTWVudS5jbGFzc0xpc3QudG9nZ2xlKHRoaXMuY2xhc3Nlcy5oaWRkZW4sIHRoaXMuc3RhdGUuaXNIaWRkZW4pO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJleHBhbmRTdWJNZW51XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZXhwYW5kU3ViTWVudShpdGVtVG9PcGVuKSB7XG4gICAgICAgIGlmICghIXRoaXMuc3RhdGUuZXhwYW5kZWRTdWJsaXN0KSB7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5leHBhbmRlZFN1Ymxpc3QubWVudS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuY2xhc3Nlcy5zdWJtZW51T3Blbik7XG4gICAgICAgIH1cblxuICAgICAgICBpdGVtVG9PcGVuLm1lbnUuY2xhc3NMaXN0LmFkZCh0aGlzLmNsYXNzZXMuc3VibWVudU9wZW4pO1xuICAgICAgICB0aGlzLnN0YXRlLmV4cGFuZGVkU3VibGlzdCA9IF9vYmplY3RTcHJlYWQyKHt9LCBpdGVtVG9PcGVuKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiY29sbGFwc2VTdWJNZW51XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY29sbGFwc2VTdWJNZW51KCkge1xuICAgICAgICBpZiAoISF0aGlzLnN0YXRlLmV4cGFuZGVkU3VibGlzdCkge1xuICAgICAgICAgIHRoaXMuc3RhdGUuZXhwYW5kZWRTdWJsaXN0Lm1lbnUuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmNsYXNzZXMuc3VibWVudU9wZW4pO1xuICAgICAgICAgIHRoaXMuc3RhdGUuZXhwYW5kZWRTdWJsaXN0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJjbG9zZU1lbnVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZU1lbnUoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUubWVudU9wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tYWluTWVudS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuY2xhc3Nlcy5tZW51T3Blbik7XG4gICAgICAgIHRoaXMubWFpbk1lbnVOYXYuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmNsYXNzZXMubWVudU9wZW4pO1xuICAgICAgICB0aGlzLmNvbGxhcHNlU3ViTWVudSgpO1xuICAgICAgICBhcHAuc2Nyb2xsLmVuYWJsZSh0aGlzLm1haW5NZW51TmF2KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwib3Blbk1lbnVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuTWVudSgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5tZW51T3BlbiA9IHRydWU7XG4gICAgICAgIHRoaXMubWFpbk1lbnUuY2xhc3NMaXN0LmFkZCh0aGlzLmNsYXNzZXMubWVudU9wZW4pO1xuICAgICAgICB0aGlzLm1haW5NZW51TmF2LmNsYXNzTGlzdC5hZGQodGhpcy5jbGFzc2VzLm1lbnVPcGVuKTtcbiAgICAgICAgYXBwLnNjcm9sbC5kaXNhYmxlKHRoaXMubWFpbk1lbnVOYXYpO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBIZWFkZXI7XG4gIH0oKTtcblxuICB2YXIgdGVzdEFwaSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gdGVzdEFwaShjb250YWluZXIpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCB0ZXN0QXBpKTtcblxuICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICB0aGlzLnRyaWdnZXJCdG4gPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS10ZXN0LWFwaV0nKTtcbiAgICAgIHRoaXMucmVxdWVzdFJlc3VsdCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXRlc3QtcmVzdWx0XScpO1xuICAgICAgdGhpcy5yZXF1ZXN0VXJsID0gdGhpcy50cmlnZ2VyQnRuLmRhdGFzZXQudGVzdEFwaTtcbiAgICAgIHRoaXMudHJpZ2dlckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgX3RoaXMucmVxdWVzdFJlc3BvbnNlKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3ModGVzdEFwaSwgW3tcbiAgICAgIGtleTogXCJyZXF1ZXN0UmVzcG9uc2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXF1ZXN0UmVzcG9uc2UoKSB7XG4gICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgIGZldGNoKHRoaXMucmVxdWVzdFVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgIF90aGlzMi5yZXF1ZXN0UmVzdWx0LmlubmVySFRNTCA9IGRhdGEudGl0bGUgKyBkYXRhLm1lc3NhZ2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gdGVzdEFwaTtcbiAgfSgpO1xuXG4gIHZhciBWYWxpZGF0aW9uID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBWYWxpZGF0aW9uKGNvbnRhaW5lcikge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFZhbGlkYXRpb24pO1xuXG4gICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgIHRoaXMuZm9ybSA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcbiAgICAgIHRoaXMucmVzdWx0SW5wdXQgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1yZXN1bHRzLWlucHV0XScpO1xuICAgICAgdGhpcy5jYW5jZWwgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1idXR0b24tY2FuY2VsXScpO1xuICAgICAgdGhpcy52YWxpZGF0aW9uUnVsZXMgPSB7XG4gICAgICAgIHJlcXVpcmVkOiB7XG4gICAgICAgICAgdGVzdDogZnVuY3Rpb24gdGVzdCh2YWwpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWwuZW50cnkudmFsdWUubGVuZ3RoID49IDA7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoZmllbGQpIHtcbiAgICAgICAgICAgIHJldHVybiBcInBsZWFzZSBmaWxsIGluIHRoaXMgZmllbGRcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVtYWlsOiB7XG4gICAgICAgICAgdGVzdDogZnVuY3Rpb24gdGVzdCh2YWwpIHtcbiAgICAgICAgICAgIHZhciByZWdleCA9IC9eW0EtWjAtOS5fJSstXStAW0EtWjAtOS1dKy4rLltBLVpdezIsNH0kL2k7XG4gICAgICAgICAgICByZXR1cm4gcmVnZXgudGVzdCh2YWwuZW50cnkudmFsdWUpIHx8IHZhbC5lbnRyeS52YWx1ZS5sZW5ndGggPT09IDA7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoZmllbGQpIHtcbiAgICAgICAgICAgIHJldHVybiAnUGxlYXNlIGVudGVyIGEgdmFsaWQgZW1haWwnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcGhvbmU6IHtcbiAgICAgICAgICB0ZXN0OiBmdW5jdGlvbiB0ZXN0KHZhbCkge1xuICAgICAgICAgICAgdmFyIHJlZ2V4ID0gL14oWytdP1swLTlcXHMtXFwoXFwpXXszLDI1fSkqJC9pO1xuICAgICAgICAgICAgcmV0dXJuIHJlZ2V4LnRlc3QodmFsLmVudHJ5LnZhbHVlKSB8fCB2YWwuZW50cnkudmFsdWUubGVuZ3RoID09PSAwO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKGZpZWxkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1BsZWFzZSBlbnRlciBhIHZhbGlkIHBob25lIG51bWJlcic7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBhZGRyZXNzOiB7XG4gICAgICAgICAgdGVzdDogZnVuY3Rpb24gdGVzdCh2YWwpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWwuZW50cnkudmFsdWUubGVuZ3RoID4gNTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihmaWVsZCkge1xuICAgICAgICAgICAgcmV0dXJuICdQbGVhc2UgZW50ZXIgYSB2YWxpZCBhZGRyZXNzJztcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG5hbWU6IHtcbiAgICAgICAgICB0ZXN0OiBmdW5jdGlvbiB0ZXN0KHZhbCkge1xuICAgICAgICAgICAgLyogICAgbGV0IHJlZ2V4ID0gL15bYS16ICwuJy1dezIsMjB9JC9pOyByZWdleC50ZXN0KHZhbC5lbnRyeS52YWx1ZSkgfHwqL1xuXG4gICAgICAgICAgICAvKiByZXR1cm4gIHZhbC5lbnRyeS52YWx1ZS5sZW5ndGggPiA1Ki9cbiAgICAgICAgICAgIHJldHVybiB2YWwuZW50cnkudmFsdWUubGVuZ3RoID4gMiAmJiB2YWwuZW50cnkudmFsdWUubGVuZ3RoIDwgMjA7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoZmllbGQpIHtcbiAgICAgICAgICAgIHJldHVybiBcIlBsZWFzZSBlbnRlciBhIHZhbGlkIFwiLmNvbmNhdChmaWVsZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBtZXNzYWdlOiB7XG4gICAgICAgICAgdGVzdDogZnVuY3Rpb24gdGVzdCh2YWwpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWwuZW50cnkudmFsdWUubGVuZ3RoID4gNTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihmaWVsZCkge1xuICAgICAgICAgICAgcmV0dXJuIFwiUGxlYXNlIGVudGVyIGEgdmFsaWQgbWVzc2FnZVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY2hlY2tpZjoge1xuICAgICAgICAgIHRlc3Q6IGZ1bmN0aW9uIHRlc3QodmFsKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsLmVudHJ5LmNoZWNrZWQgPT09IHRydWU7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoZmllbGQpIHtcbiAgICAgICAgICAgIHJldHVybiBcIlBsZWFzZSBjaGVja2VkIGZpZWxkXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzdWl0YWJsZToge1xuICAgICAgICAgIHRlc3Q6IGZ1bmN0aW9uIHRlc3QodmFsKSB7XG4gICAgICAgICAgICB2YXIgc3VpdGFibGVFbGVtID0gX3RoaXMuZmlsZUZpZWxkcy5maWx0ZXIoZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGVsZW0ubmFtZSA9PT0gdmFsLmVudHJ5Lm5hbWUgJiYgZWxlbS5lbnRyeS5jaGVja2VkID09PSB0cnVlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBzdWl0YWJsZUVsZW0ubGVuZ3RoID4gMztcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihmaWVsZCkge1xuICAgICAgICAgICAgcmV0dXJuIFwiUGxlYXNlIGNoZWNrZWQgbW9yZSBvcHRpb25zXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICB0ZXN0OiBmdW5jdGlvbiB0ZXN0KHZhbCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbC5lbnRyeS5zZWxlY3RlZEluZGV4ID4gMDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihmaWVsZCkge1xuICAgICAgICAgICAgcmV0dXJuIFwiUGxlYXNlIGNoZWNrZWQgbW9yZSBvcHRpb25zXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgdGhpcy5maWxlRmllbGRzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXZhbGlkYXRlXScpKS5tYXAoZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgIHZhciB3cmFwcGVyID0gZmllbGQuY2xvc2VzdCgnW2RhdGEtZmllbGRdJyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgd3JhcDogd3JhcHBlcixcbiAgICAgICAgICBlbnRyeTogZmllbGQsXG4gICAgICAgICAgbmFtZTogZmllbGQubmFtZSxcbiAgICAgICAgICB2YWx1ZTogZmllbGQudmFsdWUsXG4gICAgICAgICAgdHlwZTogZmllbGQudHlwZSxcbiAgICAgICAgICBjaGVja2VkOiBmaWVsZC5jaGVja2VkLFxuICAgICAgICAgIG1lc3NhZ2U6IHdyYXBwZXIucXVlcnlTZWxlY3RvcignW2RhdGEtdmFsaWRhdGUtbWVzc10nKSxcbiAgICAgICAgICBydWxlczogZmllbGQuaGFzQXR0cmlidXRlKCdkYXRhLXZhbGlkYXRlJykgPyBmaWVsZC5kYXRhc2V0LnZhbGlkYXRlLnNwbGl0KCd8JykgOiBbXSxcbiAgICAgICAgICB2YWxpZGF0ZU5hbWU6IGZpZWxkLmhhc0F0dHJpYnV0ZSgnZGF0YS12YWxpZGF0ZS1hcycpID8gZmllbGQuZGF0YXNldC52YWxpZGF0ZUFzIDogZmllbGQubmFtZSxcbiAgICAgICAgICBpc1ZhbGlkOiBudWxsXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICAgIHRoaXMuZmlsZUZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIGlmIChpdGVtLnJ1bGVzLmxlbmd0aCkge1xuICAgICAgICAgIGl0ZW0uZW50cnkuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnZhbGlkYXRlRmllbGQoaXRlbSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaXRlbS5lbnRyeS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnZhbGlkYXRlRmllbGQoaXRlbSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGlmIChfdGhpcy52YWxpZGF0ZUZvcm0oKSkge1xuICAgICAgICAgIF90aGlzLnNjcm9sbFRvRWxlbWVudCgpO1xuXG4gICAgICAgICAgX3RoaXMuZm9ybVJlc3VsdCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRoaXMuY2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5maWxlRmllbGRzLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgZmllbGQubWVzc2FnZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICBmaWVsZC53cmFwLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWludmFsaWQnKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoVmFsaWRhdGlvbiwgW3tcbiAgICAgIGtleTogXCJ2YWxpZGF0ZUZvcm1cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB2YWxpZGF0ZUZvcm0oKSB7XG4gICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgIHZhciBmb3JtSXNWYWxpZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZmlsZUZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgIGZvcm1Jc1ZhbGlkID0gX3RoaXMyLnZhbGlkYXRlRmllbGQoZmllbGQpID8gZm9ybUlzVmFsaWQgOiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmb3JtSXNWYWxpZDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwidmFsaWRhdGVGaWVsZFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZhbGlkYXRlRmllbGQoZmllbGQpIHtcbiAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgICAgZmllbGQuaXNWYWxpZCA9IHRydWU7XG4gICAgICAgIGZpZWxkLnJ1bGVzLmZvckVhY2goZnVuY3Rpb24gKHJ1bGUpIHtcbiAgICAgICAgICBpZiAoX3RoaXMzLnZhbGlkYXRpb25SdWxlcy5oYXNPd25Qcm9wZXJ0eShydWxlKSAmJiAhX3RoaXMzLnZhbGlkYXRpb25SdWxlc1tydWxlXS50ZXN0KGZpZWxkKSkge1xuICAgICAgICAgICAgZmllbGQuaXNWYWxpZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICBfdGhpczMuc2hvd0Vycm9yKGZpZWxkLCBfdGhpczMudmFsaWRhdGlvblJ1bGVzW3J1bGVdLmVycm9yKGZpZWxkLnZhbGlkYXRlTmFtZSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGZpZWxkLmlzVmFsaWQpIHtcbiAgICAgICAgICB0aGlzLmhpZGVFcnJvcihmaWVsZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmllbGQuaXNWYWxpZDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZm9ybVJlc3VsdFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZvcm1SZXN1bHQoKSB7XG4gICAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICAgIHZhciB2YWx1ZUxpc3QgPSBbXTtcbiAgICAgICAgdGhpcy5maWxlRmllbGRzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAncmFkaW8nIHx8IGl0ZW0udHlwZSA9PT0gJ2NoZWNrYm94Jykge1xuICAgICAgICAgICAgaWYgKGl0ZW0uZW50cnkuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICB2YXIgY2hlY2tlZEVsZW1lbnQgPSB2YWx1ZUxpc3QuZmluZChmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpLm5hbWUgPT09IGl0ZW0ubmFtZTtcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjaGVja2VkRWxlbWVudCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgIHZhbHVlTGlzdC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLmVudHJ5LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgdHlwZTogaXRlbS50eXBlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2hlY2tlZEVsZW1lbnQudmFsdWUgKz0gaXRlbS5lbnRyeS52YWx1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5lbnRyeS52YWx1ZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgdmFsdWVMaXN0LnB1c2goe1xuICAgICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUsXG4gICAgICAgICAgICAgIHZhbHVlOiBpdGVtLmVudHJ5LnZhbHVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgbWVzc2FnZU1haWwgPSAnbWFpbCc7XG4gICAgICAgIHZhciBmaW5kTWFpbCA9IHZhbHVlTGlzdC5maW5kKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gbWVzc2FnZU1haWw7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0eXBlb2YgZmluZE1haWwgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICB2YWx1ZUxpc3QucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICAgICAgdmFsdWU6ICdEbyBub3QgYWRkIHRvIG1hbGluZyBsaXN0J1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpbmRNYWlsLnZhbHVlID0gJ0FkZCB0byBtYWxpbmcgbGlzdCc7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaWRUb1JlbW92ZSA9ICdwcml2YWN5JztcbiAgICAgICAgdmFyIGRlbFByaXZhY3kgPSB2YWx1ZUxpc3QuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSAhPT0gaWRUb1JlbW92ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRlbFByaXZhY3kuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgIGlmIChpdGVtLm5hbWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgX3RoaXM0LnJlc3VsdElucHV0LmlubmVySFRNTCArPSBcIjxsaT48c3Ryb25nPlwiLmNvbmNhdChpdGVtLm5hbWUsIFwiPC9zdHJvbmc+XCIpICsgJzogJyArIFwiXCIuY29uY2F0KGl0ZW0udmFsdWUsIFwiPC9saT5cIik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzNC5yZXN1bHRJbnB1dC5pbm5lckhUTUwgKz0gXCI8bGk+XCIuY29uY2F0KGl0ZW0udmFsdWUsIFwiPC9saT5cIik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwic2Nyb2xsVG9FbGVtZW50XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc2Nyb2xsVG9FbGVtZW50KCkge1xuICAgICAgICBpZiAodGhpcy5jb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZSgnaXMtc2VudC1zdWNjZXNzJykpIHtcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zY3JvbGxJbnRvVmlldyh7XG4gICAgICAgICAgICBibG9jazogXCJjZW50ZXJcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInNob3dFcnJvclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNob3dFcnJvcihmaWVsZCwgbWVzc2FnZSkge1xuICAgICAgICBmaWVsZC5tZXNzYWdlLmlubmVySFRNTCA9IG1lc3NhZ2U7XG4gICAgICAgIGZpZWxkLndyYXAuY2xhc3NMaXN0LmFkZCgnaXMtaW52YWxpZCcpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJoaWRlRXJyb3JcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBoaWRlRXJyb3IoZmllbGQpIHtcbiAgICAgICAgZmllbGQubWVzc2FnZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgZmllbGQud3JhcC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1pbnZhbGlkJyk7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFZhbGlkYXRpb247XG4gIH0oKTtcblxuICB2YXIgTG9hZE1vcmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIExvYWRNb3JlKGJ0bikge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExvYWRNb3JlKTtcblxuICAgICAgdGhpcy4kbG9hZE1vcmVCdG4gPSBidG4gPyBidG4gOiBudWxsO1xuICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDE7XG4gICAgICB0aGlzLm51bWJlck9mSXRlbXMgPSAwO1xuXG4gICAgICBpZiAodGhpcy4kbG9hZE1vcmVCdG4pIHtcbiAgICAgICAgdGhpcy5tYXRyaXhCbG9ja0lkID0gdGhpcy4kbG9hZE1vcmVCdG4uZGF0YXNldC5tYXRyaXhCbG9ja0lkO1xuICAgICAgICB0aGlzLmNhdGVnb3J5SWQgPSB0aGlzLiRsb2FkTW9yZUJ0bi5kYXRhc2V0LmNhdGVnb3J5SWQ7XG4gICAgICAgIHRoaXMubG9hZE1vcmVVUkwgPSB0aGlzLiRsb2FkTW9yZUJ0bi5kYXRhc2V0LmxvYWRNb3JlO1xuICAgICAgICB0aGlzLnRhcmdldENvbnRhaW5lcklkID0gdGhpcy4kbG9hZE1vcmVCdG4uZGF0YXNldC50YXJnZXRDb250YWluZXJJZDtcbiAgICAgICAgdGhpcy4kdGFyZ2V0Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy50YXJnZXRDb250YWluZXJJZCk7XG4gICAgICAgIHRoaXMubnVtYmVyT2ZJdGVtcyA9IHRoaXMuJHRhcmdldENvbnRhaW5lci5jaGlsZEVsZW1lbnRDb3VudDtcbiAgICAgICAgdGhpcy4kbG9hZE1vcmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgX3RoaXMuZmlyZUxvYWRpbmcoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKExvYWRNb3JlLCBbe1xuICAgICAga2V5OiBcImZpcmVMb2FkaW5nXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZmlyZUxvYWRpbmcoKSB7XG4gICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgIHZhciBidG5VcmwgPSB0aGlzLmxvYWRNb3JlVVJMICsgJz9wYWdlPScgKyB0aGlzLmN1cnJlbnRQYWdlICsgJyZjYXRlZ29yeUlkPScgKyB0aGlzLmNhdGVnb3J5SWQgKyAnJm1hdHJpeEJsb2NrSWQ9JyArIHRoaXMubWF0cml4QmxvY2tJZDtcbiAgICAgICAgdGhpcy5jdXJyZW50UGFnZSsrO1xuICAgICAgICBmZXRjaChidG5VcmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoanNvblJlc3BvbnNlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coanNvblJlc3BvbnNlKTtcblxuICAgICAgICAgIF90aGlzMi5kcmF3Q29udGVudChqc29uUmVzcG9uc2UuaHRtbCk7XG5cbiAgICAgICAgICBpZiAoanNvblJlc3BvbnNlLmlzTGFzdFBhZ2UpIHtcbiAgICAgICAgICAgIF90aGlzMi4kbG9hZE1vcmVCdG4uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlbXCJjYXRjaFwiXShmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkcmF3Q29udGVudFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXdDb250ZW50KG5ld0l0ZW1zTGlzdCkge1xuICAgICAgICBpZiAodGhpcy4kdGFyZ2V0Q29udGFpbmVyKSB7XG4gICAgICAgICAgdGhpcy4kdGFyZ2V0Q29udGFpbmVyLmlubmVySFRNTCArPSBuZXdJdGVtc0xpc3Q7XG4gICAgICAgICAgdmFyIG5ld051bWJlck9mSXRlbXMgPSB0aGlzLiR0YXJnZXRDb250YWluZXIuY2hpbGRFbGVtZW50Q291bnQ7XG4gICAgICAgICAgdmFyIG51bWJlck9mTmV3TmV3cyA9IG5ld051bWJlck9mSXRlbXMgLSB0aGlzLm51bWJlck9mSXRlbXM7XG4gICAgICAgICAgdGhpcy5maXJlQTExeSh0aGlzLiR0YXJnZXRDb250YWluZXIsIG51bWJlck9mTmV3TmV3cyk7XG4gICAgICAgICAgdmFyICRmaXJzdE5ld0l0ZW0gPSB0aGlzLiR0YXJnZXRDb250YWluZXIuY2hpbGRyZW5bdGhpcy5udW1iZXJPZkl0ZW1zXTtcblxuICAgICAgICAgIGlmICgkZmlyc3ROZXdJdGVtLnF1ZXJ5U2VsZWN0b3IoJ2EnKSkge1xuICAgICAgICAgICAgJGZpcnN0TmV3SXRlbS5xdWVyeVNlbGVjdG9yKCdhJykuZm9jdXMoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLm51bWJlck9mSXRlbXMgPSBuZXdOdW1iZXJPZkl0ZW1zO1xuICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDtcbiAgICAgICAgICB3aW5kb3cuc2Nyb2xsKHtcbiAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICB0b3A6ICRmaXJzdE5ld0l0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgc2Nyb2xsVG9wXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZmlyZUExMXlcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaXJlQTExeShwYXJlbnQsIGNvdW50KSB7XG4gICAgICAgIHZhciAkaGlkZGVuRGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICRoaWRkZW5EZXNjcmlwdGlvbi5jbGFzc0xpc3QuYWRkKCd2aXN1YWxseS1oaWRkZW4nKTtcbiAgICAgICAgJGhpZGRlbkRlc2NyaXB0aW9uLnNldEF0dHJpYnV0ZSgncm9sZScsICdhbGVydCcpO1xuICAgICAgICAkaGlkZGVuRGVzY3JpcHRpb24uaW5uZXJUZXh0ID0gY291bnQgKyAnIG5ld3MgbG9hZGVkLic7XG4gICAgICAgIHBhcmVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2JlZm9yZWJlZ2luJywgJGhpZGRlbkRlc2NyaXB0aW9uKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJGhpZGRlbkRlc2NyaXB0aW9uLnJlbW92ZSgpO1xuICAgICAgICB9LCAzMDAwMCk7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIExvYWRNb3JlO1xuICB9KCk7XG5cbiAgc3ZnNGV2ZXJ5Ym9keSgpO1xuICB3aW5kb3cuYXBwID0ge1xuICAgIGhlYWRlcjogbnVsbCxcbiAgICBzY3JvbGw6IHtcbiAgICAgIGRpc2FibGU6IHNjcm9sbExvY2skMS5kaXNhYmxlUGFnZVNjcm9sbCxcbiAgICAgIGVuYWJsZTogc2Nyb2xsTG9jayQxLmVuYWJsZVBhZ2VTY3JvbGxcbiAgICB9LFxuICAgIHNldEluZXJ0OiBmdW5jdGlvbiBzZXRJbmVydCgpIHtcbiAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuXG4gICAgICBhcmdzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgaXRlbS5zZXRBdHRyaWJ1dGUoJ2luZXJ0JywgdHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHJlbW92ZUluZXJ0OiBmdW5jdGlvbiByZW1vdmVJbmVydCgpIHtcbiAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgICBhcmdzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgICB9XG5cbiAgICAgIGFyZ3MuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICBpdGVtLnJlbW92ZUF0dHJpYnV0ZSgnaW5lcnQnKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgaW5pdE1vZHVsZTogZnVuY3Rpb24gaW5pdE1vZHVsZShNb2R1bGUsIHNlbGVjdG9yKSB7XG4gICAgICBpZiAoISFzZWxlY3Rvcikge1xuICAgICAgICB2YXIgYmxvY2tzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xuICAgICAgICBibG9ja3MuZm9yRWFjaChmdW5jdGlvbiAoYmxvY2spIHtcbiAgICAgICAgICBuZXcgTW9kdWxlKGJsb2NrKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTW9kdWxlKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgd2luZG93LmFwcC5oZWFkZXIgPSBuZXcgSGVhZGVyKCcuanMtaGVhZGVyJyk7XG4gICAgICB3aW5kb3cuYXBwLmluaXRNb2R1bGUoVmFsaWRhdGlvbiwgJy5qcy12YWxpZGF0ZScpO1xuICAgICAgd2luZG93LmFwcC5pbml0TW9kdWxlKExvYWRNb3JlLCAnLmpzLWxvYWQtbW9yZScpO1xuICAgICAgYXBwLmluaXRNb2R1bGUodGVzdEFwaSwgJy5qcy10ZXN0LWFwaScpO1xuICAgIH1cbiAgfTtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBhcHAuaW5pdCk7XG59KTsiXX0=
